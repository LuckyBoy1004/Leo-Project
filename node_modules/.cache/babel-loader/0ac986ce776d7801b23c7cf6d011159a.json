{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{useAuth}from\"../context/userContext\";// context\nimport{useHistory}from'react-router-dom';import{ButtonSmall}from'../components/utilities/Buttons';var PaymentConfirm=function PaymentConfirm(){var history=useHistory();var _useState=useState(window.innerWidth),_useState2=_slicedToArray(_useState,2),windowsWidth=_useState2[0],setWindowsWidth=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),emails=_useState4[0],setEmails=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newEmail=_useState6[0],setNewEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSent=_useState12[0],setIsSent=_useState12[1];var _useAuth=useAuth(),user=_useAuth.user,event=_useAuth.event,setCurrentStepProcess=_useAuth.setCurrentStepProcess,sendInBlue_sendInvitations=_useAuth.sendInBlue_sendInvitations;// context\nfunction handleResize(width){setWindowsWidth(width);}useEffect(function(){window.addEventListener(\"resize\",function(e){return handleResize(window.innerWidth);});},[window.innerWidth]);setCurrentStepProcess(32);function handleAddNewEmail(){var containAt=newEmail.indexOf(\"@\");if(containAt<1)return setError(\"Veuillez entrer un email valide\");var containDot=newEmail.indexOf(\".\");if(containDot<=containAt+2)return setError(\"Veuillez entrer un email valide\");if(containDot===newEmail.length-1)return setError(\"Veuillez entrer un email valide\");var newArray=_toConsumableArray(emails);newArray.push(newEmail);setEmails(newArray);setNewEmail(\"\");setError(\"\");}function handleDeleteEmail(item){var newArray=_toConsumableArray(emails);var index=newArray.indexOf(item);if(index>-1){newArray.splice(index,1);}setEmails(newArray);}function handleSendInvitations(){return _handleSendInvitations.apply(this,arguments);}function _handleSendInvitations(){_handleSendInvitations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendInBlue_sendInvitations(emails,message,user,event);case 2:req=_context.sent;if(req===true){setIsSent(true);history.push(\"/dashboard\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleSendInvitations.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"invitationsContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"headerInvitations\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Invitations\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ajoutez les personnes que vous souhaitez inviter \\xE0 votre \\xE9v\\xE8nement\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contentInvitations\",children:!isSent?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"emailsBlocInvitations\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Emails des invit\\xE9(e)s\"}),/*#__PURE__*/_jsx(\"div\",{className:\"displayEmailsInvitations\",children:emails.map(function(item){return/*#__PURE__*/_jsxs(\"span\",{children:[item,/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return handleDeleteEmail(item);},children:\"X\"})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"input\",{value:newEmail,onChange:function onChange(e){return setNewEmail(e.target.value);},type:\"text\",placeholder:\"Email de l'invit\\xE9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleAddNewEmail();},children:\"Ajouter\"})]}),error.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"messageInvitations\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Message de l'invitation\"}),/*#__PURE__*/_jsx(\"textarea\",{value:message,onChange:function onChange(e){return setMessage(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSendInvitations();},children:\"Envoyer les invitations\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Merci, vos invitations ont \\xE9t\\xE9 envoy\\xE9es.\"}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return history.push(\"/dashboard\");},color:\"orange\",value:\"Revenir au tableau de bord\"})]})})]})});};export default PaymentConfirm;","map":{"version":3,"sources":["/Users/bonnieclyde/Desktop/Nivid/src/pages/Invitations.js"],"names":["React","useState","useEffect","useAuth","useHistory","ButtonSmall","PaymentConfirm","history","window","innerWidth","windowsWidth","setWindowsWidth","emails","setEmails","newEmail","setNewEmail","error","setError","message","setMessage","isSent","setIsSent","user","event","setCurrentStepProcess","sendInBlue_sendInvitations","handleResize","width","addEventListener","e","handleAddNewEmail","containAt","indexOf","containDot","length","newArray","push","handleDeleteEmail","item","index","splice","handleSendInvitations","req","map","target","value"],"mappings":"8uBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,wBAAxB,CAAkD;AAClD,OAASC,UAAT,KAA2B,kBAA3B,CAEA,OAASC,WAAT,KAA4B,iCAA5B,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAEzB,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CAFyB,cAGeH,QAAQ,CAACO,MAAM,CAACC,UAAR,CAHvB,wCAGlBC,YAHkB,eAGJC,eAHI,8BAIGV,QAAQ,CAAC,EAAD,CAJX,yCAIlBW,MAJkB,eAIVC,SAJU,8BAKOZ,QAAQ,CAAC,EAAD,CALf,yCAKlBa,QALkB,eAKRC,WALQ,8BAMCd,QAAQ,CAAC,EAAD,CANT,yCAMlBe,KANkB,eAMXC,QANW,8BAOKhB,QAAQ,CAAC,EAAD,CAPb,0CAOlBiB,OAPkB,gBAOTC,UAPS,gCAQGlB,QAAQ,CAAC,KAAD,CARX,2CAQlBmB,MARkB,gBAQVC,SARU,6BAUkDlB,OAAO,EAVzD,CAUjBmB,IAViB,UAUjBA,IAViB,CAUXC,KAVW,UAUXA,KAVW,CAUJC,qBAVI,UAUJA,qBAVI,CAUmBC,0BAVnB,UAUmBA,0BAVnB,CAU4D;AAErF,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CACzBhB,eAAe,CAACgB,KAAD,CAAf,CACH,CAEDzB,SAAS,CAAC,UAAM,CACZM,MAAM,CAACoB,gBAAP,CAAwB,QAAxB,CAAkC,SAACC,CAAD,QAAOH,CAAAA,YAAY,CAAClB,MAAM,CAACC,UAAR,CAAnB,EAAlC,EACH,CAFQ,CAEN,CAACD,MAAM,CAACC,UAAR,CAFM,CAAT,CAIAe,qBAAqB,CAAC,EAAD,CAArB,CAEA,QAASM,CAAAA,iBAAT,EAA6B,CAEzB,GAAIC,CAAAA,SAAS,CAAGjB,QAAQ,CAACkB,OAAT,CAAiB,GAAjB,CAAhB,CACA,GAAID,SAAS,CAAG,CAAhB,CAAmB,MAAOd,CAAAA,QAAQ,CAAC,iCAAD,CAAf,CAEnB,GAAIgB,CAAAA,UAAU,CAAGnB,QAAQ,CAACkB,OAAT,CAAiB,GAAjB,CAAjB,CACA,GAAIC,UAAU,EAAIF,SAAS,CAAG,CAA9B,CAAiC,MAAOd,CAAAA,QAAQ,CAAC,iCAAD,CAAf,CAGjC,GAAIgB,UAAU,GAAKnB,QAAQ,CAACoB,MAAT,CAAkB,CAArC,CAAwC,MAAOjB,CAAAA,QAAQ,CAAC,iCAAD,CAAf,CAEpC,GAAMkB,CAAAA,QAAQ,oBAAOvB,MAAP,CAAd,CACAuB,QAAQ,CAACC,IAAT,CAActB,QAAd,EACAD,SAAS,CAACsB,QAAD,CAAT,CACApB,WAAW,CAAC,EAAD,CAAX,CACAE,QAAQ,CAAC,EAAD,CAAR,CACP,CAED,QAASoB,CAAAA,iBAAT,CAA2BC,IAA3B,CAAiC,CAC7B,GAAMH,CAAAA,QAAQ,oBAAOvB,MAAP,CAAd,CACA,GAAM2B,CAAAA,KAAK,CAAGJ,QAAQ,CAACH,OAAT,CAAiBM,IAAjB,CAAd,CACA,GAAIC,KAAK,CAAG,CAAC,CAAb,CAAgB,CACZJ,QAAQ,CAACK,MAAT,CAAgBD,KAAhB,CAAuB,CAAvB,EACH,CACD1B,SAAS,CAACsB,QAAD,CAAT,CACH,CA/CwB,QAiDVM,CAAAA,qBAjDU,yKAiDzB,iKACsBhB,CAAAA,0BAA0B,CAACb,MAAD,CAASM,OAAT,CAAkBI,IAAlB,CAAwBC,KAAxB,CADhD,QACUmB,GADV,eAEI,GAAIA,GAAG,GAAK,IAAZ,CAAkB,CACdrB,SAAS,CAAC,IAAD,CAAT,CACAd,OAAO,CAAC6B,IAAR,CAAa,YAAb,EACH,CALL,sDAjDyB,wDAyDzB,mBACI,kCACI,aAAK,SAAS,CAAC,sBAAf,wBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,mCADJ,cAEI,kGAFJ,GADJ,cAKI,YAAK,SAAS,CAAC,oBAAf,UACK,CAAChB,MAAD,cACG,wCACI,aAAK,SAAS,CAAC,uBAAf,wBACI,gDADJ,cAEI,YAAK,SAAS,CAAC,0BAAf,UACKR,MAAM,CAAC+B,GAAP,CAAW,SAAAL,IAAI,CAAI,CAChB,mBAAO,wBAAOA,IAAP,cAAY,UAAG,OAAO,CAAE,yBAAMD,CAAAA,iBAAiB,CAACC,IAAD,CAAvB,EAAZ,eAAZ,GAAP,CACH,CAFA,CADL,EAFJ,cAOI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,KAAK,CAAExB,QAAd,CAAwB,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,WAAW,CAACc,CAAC,CAACe,MAAF,CAASC,KAAV,CAAlB,EAAlC,CAAsE,IAAI,CAAC,MAA3E,CAAkF,WAAW,CAAC,sBAA9F,EADJ,cAEI,eAAQ,OAAO,CAAE,yBAAMf,CAAAA,iBAAiB,EAAvB,EAAjB,qBAFJ,GAPJ,CAWKd,KAAK,CAACkB,MAAN,CAAe,CAAf,eACG,UAAG,SAAS,CAAC,cAAb,UAA6BlB,KAA7B,EAZR,GADJ,cAgBI,aAAK,SAAS,CAAC,oBAAf,wBACI,+CADJ,cAEI,iBAAU,KAAK,CAAEE,OAAjB,CAA0B,QAAQ,CAAE,kBAACW,CAAD,QAAOV,CAAAA,UAAU,CAACU,CAAC,CAACe,MAAF,CAASC,KAAV,CAAjB,EAApC,EAFJ,cAGI,eAAQ,OAAO,CAAE,yBAAMJ,CAAAA,qBAAqB,EAA3B,EAAjB,qCAHJ,GAhBJ,GADH,cAwBG,wCACI,wEADJ,cAEI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMlC,CAAAA,OAAO,CAAC6B,IAAR,CAAa,YAAb,CAAN,EADb,CAEI,KAAK,CAAC,QAFV,CAGI,KAAK,CAAC,4BAHV,EAFJ,GAzBR,EALJ,GADJ,EADJ,CA6CH,CAtGD,CAwGA,cAAe9B,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../context/userContext\"; // context\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport { ButtonSmall } from '../components/utilities/Buttons'\r\n\r\nconst PaymentConfirm = () => {\r\n\r\n    const history = useHistory()\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    const [emails, setEmails] = useState([])\r\n    const [newEmail, setNewEmail] = useState(\"\")\r\n    const [error, setError] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [isSent, setIsSent] = useState(false)\r\n\r\n    const { user, event, setCurrentStepProcess, sendInBlue_sendInvitations } = useAuth() // context\r\n\r\n    function handleResize(width) {\r\n        setWindowsWidth(width)\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n    }, [window.innerWidth])\r\n\r\n    setCurrentStepProcess(32)\r\n\r\n    function handleAddNewEmail() {\r\n        \r\n        let containAt = newEmail.indexOf(\"@\")\r\n        if (containAt < 1) return setError(\"Veuillez entrer un email valide\")\r\n\r\n        let containDot = newEmail.indexOf(\".\")\r\n        if (containDot <= containAt + 2) return setError(\"Veuillez entrer un email valide\")\r\n\r\n\r\n        if (containDot === newEmail.length - 1) return setError(\"Veuillez entrer un email valide\")\r\n\r\n            const newArray = [...emails]\r\n            newArray.push(newEmail)\r\n            setEmails(newArray)\r\n            setNewEmail(\"\")\r\n            setError(\"\")\r\n    }\r\n\r\n    function handleDeleteEmail(item) {\r\n        const newArray = [...emails]\r\n        const index = newArray.indexOf(item);\r\n        if (index > -1) {\r\n            newArray.splice(index, 1);\r\n        }\r\n        setEmails(newArray)\r\n    }\r\n\r\n    async function handleSendInvitations() {\r\n        const req = await sendInBlue_sendInvitations(emails, message, user, event)\r\n        if (req === true) {\r\n            setIsSent(true)\r\n            history.push(\"/dashboard\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"invitationsContainer\">\r\n                <div className=\"headerInvitations\">\r\n                    <h2>Invitations</h2>\r\n                    <p>Ajoutez les personnes que vous souhaitez inviter à votre évènement</p>\r\n                </div>\r\n                <div className=\"contentInvitations\">\r\n                    {!isSent ?\r\n                        <>\r\n                            <div className=\"emailsBlocInvitations\">\r\n                                <h3>Emails des invité(e)s</h3>\r\n                                <div className=\"displayEmailsInvitations\">\r\n                                    {emails.map(item => {\r\n                                        return <span>{item}<p onClick={() => handleDeleteEmail(item)}>X</p></span>\r\n                                    })}\r\n                                </div>\r\n                                <div className=\"formField\">\r\n                                    <input value={newEmail} onChange={(e) => setNewEmail(e.target.value)} type=\"text\" placeholder=\"Email de l'invité\" />\r\n                                    <button onClick={() => handleAddNewEmail()}>Ajouter</button>\r\n                                </div>\r\n                                {error.length > 0 &&\r\n                                    <p className=\"errorMessage\">{error}</p>\r\n                                }\r\n                            </div>\r\n                            <div className=\"messageInvitations\">\r\n                                <h3>Message de l'invitation</h3>\r\n                                <textarea value={message} onChange={(e) => setMessage(e.target.value)} />\r\n                                <button onClick={() => handleSendInvitations()}>Envoyer les invitations</button>\r\n                            </div>\r\n                        </>\r\n                        :\r\n                        <>\r\n                            <p>Merci, vos invitations ont été envoyées.</p>\r\n                            <ButtonSmall\r\n                                onClick={() => history.push(\"/dashboard\")}\r\n                                color=\"orange\"\r\n                                value=\"Revenir au tableau de bord\"\r\n                            />\r\n                        </>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PaymentConfirm;\r\n"]},"metadata":{},"sourceType":"module"}