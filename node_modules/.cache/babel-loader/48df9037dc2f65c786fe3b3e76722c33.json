{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import'../styles/Etape1.css';import NumericInput from'react-numeric-input';import LocationSearchInput from\"../components/autocompletePlaces\";import{useAuth}from\"../context/userContext\";// context\nimport{useFirebase}from\"../assets/base-context\";import{useHistory}from'react-router-dom';import InputRange from'react-input-range';import\"react-input-range/lib/css/index.css\";import AdapterDateFns from'@mui/lab/AdapterDateFns';import LocalizationProvider from'@mui/lab/LocalizationProvider';import DatePicker from'@mui/lab/DatePicker';import frLocale from'date-fns/locale/fr';import MobileDatePicker from'@mui/lab/MobileDatePicker';import{ButtonLarge}from'../components/utilities/Buttons';import Loader from'../components/Loader.js';import{FaQuestionCircle}from'react-icons/fa';import{Hidden}from\"@mui/material\";function sizeFormat(num){return num+' m²';}function euroFormat(num){return num+'€';}var Etape1=function Etape1(){var firebaseContext=useFirebase();var auth=firebaseContext.auth();var history=useHistory();var _useAuth=useAuth(),event=_useAuth.event,addEvent=_useAuth.addEvent,setCurrentStepProcess=_useAuth.setCurrentStepProcess,formatLabelTimePicker=_useAuth.formatLabelTimePicker;// context\nvar _useState=useState(event.name),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(new Date(event.date)),_useState4=_slicedToArray(_useState3,2),startDate=_useState4[0],setStartDate=_useState4[1];var _useState5=useState(event.startAt),_useState6=_slicedToArray(_useState5,2),startTime=_useState6[0],setStartTime=_useState6[1];var _useState7=useState(event.endAt),_useState8=_slicedToArray(_useState7,2),endTime=_useState8[0],setEndTime=_useState8[1];var _useState9=useState(event.people),_useState10=_slicedToArray(_useState9,2),nbrPeople=_useState10[0],setNbrPeople=_useState10[1];var _useState11=useState(event.placeSize),_useState12=_slicedToArray(_useState11,2),placeSize=_useState12[0],setPlaceSize=_useState12[1];var _useState13=useState(event.place),_useState14=_slicedToArray(_useState13,2),place=_useState14[0],setPlace=_useState14[1];var _useState15=useState(event.latLng),_useState16=_slicedToArray(_useState15,2),latLng=_useState16[0],setLatLng=_useState16[1];var _useState17=useState(event.budget),_useState18=_slicedToArray(_useState17,2),budget=_useState18[0],setBudget=_useState18[1];var _useState19=useState(event.status),_useState20=_slicedToArray(_useState19,2),status=_useState20[0],setStatus=_useState20[1];var _useState21=useState(window.innerWidth),_useState22=_slicedToArray(_useState21,2),windowsWidth=_useState22[0],setWindowsWidth=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),error=_useState24[0],setError=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),fieldError=_useState26[0],setFieldError=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),loading=_useState28[0],setLoading=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isCalendarOpened=_useState30[0],setIsCalendarOpened=_useState30[1];var _useState31=useState(true),_useState32=_slicedToArray(_useState31,2),animationLoaderDone=_useState32[0],setAnimationLoaderDone=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),buttonSendDisabled=_useState34[0],setButtonSendDisabled=_useState34[1];var _useState35=useState(1),_useState36=_slicedToArray(_useState35,2),cEventInput=_useState36[0],setCEventInput=_useState36[1];var inputIntro=[\"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\"Parce que l’on veut vous simplifier la vie, et vous aider à gérer votre budget.\",\"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\"Grâce à nos partenaires de proximité sélectionnés selon nos critères de qualités.\",\"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\"Grâce à nos partenaires de proximité sélectionnés selon nos critères de qualités.\"];var datePlusYear=new Date();datePlusYear.setFullYear(datePlusYear.getFullYear());var isMobile=function isMobile(){return windowsWidth<1100;};var handleResize=function handleResize(width){return setWindowsWidth(width);};useEffect(function(){event&&(event.status===undefined||event.status===\"validated\"||event.status===\"pending\")&&history.push('/dashboard');window.addEventListener(\"resize\",function(e){return handleResize(window.innerWidth);});appendToSliderTimePicker();setCurrentStepProcess(1);},[endTime,startTime,window.innerWidth]);function handleSendForm(_x){return _handleSendForm.apply(this,arguments);}function _handleSendForm(){_handleSendForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return isValid().then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(res===true){setLoading(true);setAnimationLoaderDone(false);item={name:name,date:startDate,startAt:startTime,endAt:endTime,people:nbrPeople,placeSize:placeSize,place:place,latLng:latLng,budget:budget,user:auth.currentUser.uid,paid:0,status:status,id:event.id};if(status!==\"creating\"){item.budgetLeft=budget;}try{addEvent(item).then(function(){history.push('/creer-mon-evenement/etape-2');});}catch(e){setLoading(false);setError('Une erreur inconnue est survenue');}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref.apply(this,arguments);};}());case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSendForm.apply(this,arguments);}function isValid(){return _isValid.apply(this,arguments);}function _isValid(){_isValid=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(name.length>2)){_context3.next=9;break;}if(!(latLng!==undefined&&latLng.lat>0&&latLng.lng>0)){_context3.next=5;break;}return _context3.abrupt(\"return\",true);case 5:setError(\"Veuillez renseigner une adresse valide\");setFieldError(\"place\");case 7:_context3.next=11;break;case 9:setError(\"Veuillez renseigner le nom de votre évènement\");setFieldError(\"name\");case 11:case\"end\":return _context3.stop();}}},_callee3);}));return _isValid.apply(this,arguments);}function handleAdressChanged(adress,latLng){setButtonSendDisabled(true);setPlace(adress);setLatLng(latLng);setButtonSendDisabled(false);}function appendToSliderTimePicker(){var element=document.getElementsByClassName(\"input-range__slider\");var formatedEndTime=formatLabelTimePicker(endTime);var formatedStartTime=formatLabelTimePicker(startTime);if(element[0]!==undefined){element[0].innerHTML=\"Commence à \"+formatedStartTime;element[1].innerHTML=\"Termine à \"+formatedEndTime;}}function handleOnChangeInputs(name,value){if(name===fieldError){setFieldError(\"\");}if(name===\"name\"){setName(value);}else if(name===\"nbrPeople\"){setNbrPeople(value);}else if(name===\"placeSize\"){setPlaceSize(value);}else if(name===\"budget\"){setBudget(value);}}function handleDateChanged(val){setStartDate(val);setIsCalendarOpened(false);}var nextPage=function nextPage(plus){var number=cEventInput;if(cEventInput==1&&plus==-1){}else{setCEventInput(number+plus);}};return loading||!animationLoaderDone?/*#__PURE__*/_jsx(\"div\",{className:\"formEtape1Container\",children:/*#__PURE__*/_jsx(Loader,{callBack:function callBack(){return setAnimationLoaderDone(true);}})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"formEtape1Container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{height:'100px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'rgb(245, 192, 67)',fontFamily:\"Roboto-medium\"},children:[cEventInput,\"/6\"]})}),/*#__PURE__*/_jsx(\"p\",{children:inputIntro[cEventInput-1]})]}),/*#__PURE__*/_jsxs(\"form\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{height:\"25vh\",width:\"100%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==1?1:0,zIndex:cEventInput==1?'1':'0'},children:/*#__PURE__*/_jsxs(\"div\",{className:fieldError===\"name\"?\"formField error\":\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom de l'\\xE9v\\xE8nement\"}),/*#__PURE__*/_jsx(\"input\",{className:\"nameEventInput\",type:\"text\",name:\"name\",value:name,onChange:function onChange(e){return handleOnChangeInputs(\"name\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==2?1:0,zIndex:cEventInput==2?'1':'0'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"formFieldSpecialDate\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quand a-t-il lieu ?\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setIsCalendarOpened(!isCalendarOpened);},className:\"etape1DatePicker\",children:new Date(startDate).toLocaleDateString(\"fr-FR\",{weekday:\"long\",year:\"numeric\",month:\"long\",day:\"numeric\"})}),isCalendarOpened&&/*#__PURE__*/_jsx(\"div\",{className:\"calendarContainerAbsolute\",children:/*#__PURE__*/_jsx(LocalizationProvider,{style:{position:\"relative!important\"},locale:frLocale,dateAdapter:AdapterDateFns,children:isMobile()?/*#__PURE__*/_jsx(MobileDatePicker,{label:\"Date de l'\\xE9v\\xE8nement\",open:isCalendarOpened,onClose:function onClose(){return setIsCalendarOpened(false);},value:startDate,onChange:function onChange(val){return handleDateChanged(val);},renderInput:function renderInput(){return null;},minDate:datePlusYear}):/*#__PURE__*/_jsx(DatePicker,{open:isCalendarOpened,onClose:function onClose(){return setIsCalendarOpened(false);},value:startDate,onChange:function onChange(val){return handleDateChanged(val);},renderInput:function renderInput(){return null;},minDate:datePlusYear})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==3?1:0,zIndex:cEventInput==3?'1':'0'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cr\\xE9neau horaire\"}),/*#__PURE__*/_jsx(\"div\",{className:\"etape1TimePickerContainer\",style:{display:!isMobile()&&'inline-block',width:!isMobile()&&'45%'},children:/*#__PURE__*/_jsx(InputRange,{maxValue:86400,minValue:0,draggableTrack:true,step:900,value:startTime,formatLabel:function formatLabel(value){return formatLabelTimePicker(value);},onChange:function onChange(value){return setStartTime(value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"etape1TimePickerContainer endAt\",style:{display:!isMobile()&&'inline-block',width:!isMobile()&&'45%'},children:/*#__PURE__*/_jsx(InputRange,{maxValue:86400,minValue:0,draggableTrack:true,step:900,value:endTime,formatLabel:function formatLabel(value){return formatLabelTimePicker(value);},onChange:function onChange(value){return setEndTime(value);}})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:!isMobile()?\"formLine  inputview\":\"formLine mobile  inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==4?1:0,zIndex:cEventInput==4?'1':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre de personnes\"}),/*#__PURE__*/_jsx(NumericInput,{className:\"form-control\",value:nbrPeople,min:0,max:5000,step:1,precision:0,size:4,mobile:true,onChange:function onChange(value){return handleOnChangeInputs(\"nbrPeople\",value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formField_info\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"m\\xB2 du lieu\"}),/*#__PURE__*/_jsx(FaQuestionCircle,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Nombre de m2 de l\\u2019espace o\\xF9 l\\u2019\\xE9v\\xE8nement pour l\\u2019indiquer \\xE0 nos partenaires si besoin.\"})]}),/*#__PURE__*/_jsx(NumericInput,{format:sizeFormat,className:\"form-control\",value:placeSize,min:0,max:10000,step:1,precision:0,size:9,mobile:true,onChange:function onChange(value){return handleOnChangeInputs(\"placeSize\",value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==5?1:0,zIndex:cEventInput==5?'1':'0'},children:/*#__PURE__*/_jsxs(\"div\",{className:fieldError===\"place\"?\"formField error\":\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de ton \\xE9v\\xE8nement\"}),/*#__PURE__*/_jsx(LocationSearchInput,{placeType:\"address\",value:place,onChanged:handleAdressChanged})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine inputview\",style:{position:'absolute',top:0,width:'100%',opacity:cEventInput==6?1:0,zIndex:cEventInput==6?'1':'0'},children:/*#__PURE__*/_jsxs(\"div\",{className:fieldError===\"budget\"?\"formField error\":\"formField\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formField_info\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Budget\"}),/*#__PURE__*/_jsx(FaQuestionCircle,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Il te sera possible de suivre l\\u2019avanc\\xE9e de ton budget durant l\\u2019organisation de ton \\xE9v\\xE8nement. Celui-ci peut \\xEAtre modifi\\xE9 \\xE0 tout moment.\"})]}),/*#__PURE__*/_jsx(NumericInput,{format:euroFormat,className:\"form-control\",value:budget,min:50,max:50000,step:50,precision:0,size:9,mobile:true,onChange:function onChange(value){return handleOnChangeInputs(\"budget\",value);}})]})}),error.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error})]}),cEventInput==6?/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",style:{display:!isMobile()&&\"inline-block\",width:!isMobile()&&'25vw'},children:/*#__PURE__*/_jsx(\"div\",{className:\"formField\",children:/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(e){return handleSendForm(e);},color:\"orange\",value:\"C'est Party!\",backgroundColor:\"rgba(245, 192, 67)\",marginTop:\"10px\",disabled:buttonSendDisabled,width:!isMobile()&&'21vw'})})}):/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",style:{display:!isMobile()&&\"inline-block\",width:!isMobile()&&'25vw'},children:/*#__PURE__*/_jsx(\"div\",{className:\"formField\",children:/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(){return nextPage(1);},color:\"orange\",value:\"Passez \\xE0 l'\\xE9tape suivante\",backgroundColor:\"rgba(245, 192, 67)\",marginTop:\"10px\",width:!isMobile()&&'21vw'})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",style:{display:!isMobile()&&\"inline-block\",width:!isMobile()&&'25vw'},children:/*#__PURE__*/_jsx(\"div\",{className:\"formField\",children:/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(){return nextPage(-1);},color:\"grey\",value:\"Revenir en arri\\xE8re\",backgroundColor:\"rgba(245, 192, 67)\",marginTop:\"10px\",disable:cEventInput==1&&'false',width:!isMobile()&&'21vw'})})})]})});};export default Etape1;","map":{"version":3,"sources":["/Users/bonnieclyde/Desktop/Nivid/src/pages/Etape1.js"],"names":["React","useState","useEffect","NumericInput","LocationSearchInput","useAuth","useFirebase","useHistory","InputRange","AdapterDateFns","LocalizationProvider","DatePicker","frLocale","MobileDatePicker","ButtonLarge","Loader","FaQuestionCircle","Hidden","sizeFormat","num","euroFormat","Etape1","firebaseContext","auth","history","event","addEvent","setCurrentStepProcess","formatLabelTimePicker","name","setName","Date","date","startDate","setStartDate","startAt","startTime","setStartTime","endAt","endTime","setEndTime","people","nbrPeople","setNbrPeople","placeSize","setPlaceSize","place","setPlace","latLng","setLatLng","budget","setBudget","status","setStatus","window","innerWidth","windowsWidth","setWindowsWidth","error","setError","fieldError","setFieldError","loading","setLoading","isCalendarOpened","setIsCalendarOpened","animationLoaderDone","setAnimationLoaderDone","buttonSendDisabled","setButtonSendDisabled","cEventInput","setCEventInput","inputIntro","datePlusYear","setFullYear","getFullYear","isMobile","handleResize","width","undefined","push","addEventListener","e","appendToSliderTimePicker","handleSendForm","preventDefault","isValid","then","res","item","user","currentUser","uid","paid","id","budgetLeft","length","lat","lng","handleAdressChanged","adress","element","document","getElementsByClassName","formatedEndTime","formatedStartTime","innerHTML","handleOnChangeInputs","value","handleDateChanged","val","nextPage","plus","number","height","color","fontFamily","position","top","opacity","zIndex","target","toLocaleDateString","weekday","year","month","day","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport '../styles/Etape1.css'\r\nimport NumericInput from 'react-numeric-input';\r\nimport LocationSearchInput from \"../components/autocompletePlaces\"\r\nimport { useAuth } from \"../context/userContext\"; // context\r\nimport { useFirebase } from \"../assets/base-context\";\r\nimport { useHistory } from 'react-router-dom'\r\nimport InputRange from 'react-input-range';\r\nimport \"react-input-range/lib/css/index.css\";\r\n\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport frLocale from 'date-fns/locale/fr';\r\nimport MobileDatePicker from '@mui/lab/MobileDatePicker';\r\n\r\nimport { ButtonLarge } from '../components/utilities/Buttons'\r\nimport Loader from '../components/Loader.js'\r\nimport { FaQuestionCircle } from 'react-icons/fa'\r\nimport { Hidden } from \"@mui/material\";\r\n\r\n\r\nfunction sizeFormat(num) { return num + ' m²'; }\r\nfunction euroFormat(num) { return num + '€'; }\r\n\r\nconst Etape1 = () => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const auth = firebaseContext.auth()\r\n\r\n    const history = useHistory()\r\n\r\n    const { event, addEvent, setCurrentStepProcess, formatLabelTimePicker } = useAuth() // context\r\n\r\n\r\n    const [name, setName] = useState(event.name);\r\n    const [startDate, setStartDate] = useState(new Date(event.date));\r\n    const [startTime, setStartTime] = useState(event.startAt);\r\n    const [endTime, setEndTime] = useState(event.endAt);\r\n    const [nbrPeople, setNbrPeople] = useState(event.people);\r\n    const [placeSize, setPlaceSize] = useState(event.placeSize);\r\n    const [place, setPlace] = useState(event.place);\r\n    const [latLng, setLatLng] = useState(event.latLng);\r\n    const [budget, setBudget] = useState(event.budget);\r\n    const [status, setStatus] = useState(event.status);\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    const [error, setError] = useState(\"\");\r\n    const [fieldError, setFieldError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [isCalendarOpened, setIsCalendarOpened] = useState(false);\r\n    const [animationLoaderDone, setAnimationLoaderDone] = useState(true)\r\n    const [buttonSendDisabled, setButtonSendDisabled] = useState(false);\r\n    const [cEventInput, setCEventInput] = useState(1)\r\n    const inputIntro = [\r\n            \"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\r\n            \"Parce que l’on veut vous simplifier la vie, et vous aider à gérer votre budget.\",\r\n            \"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\r\n            \"Grâce à nos partenaires de proximité sélectionnés selon nos critères de qualités.\",\r\n            \"Commandez et réservez vos produits et prestations sur NIVID.fr gratuitement, sans bouger de votre canapé.\",\r\n            \"Grâce à nos partenaires de proximité sélectionnés selon nos critères de qualités.\",\r\n    ];\r\n\r\n    let datePlusYear = new Date()\r\n    datePlusYear.setFullYear(datePlusYear.getFullYear());\r\n\r\n\r\n    const isMobile = () =>  windowsWidth < 1100\r\n\r\n    const handleResize = (width) => setWindowsWidth(width)\r\n\r\n    useEffect(() => {\r\n        event && (event.status === undefined || event.status === \"validated\" || event.status === \"pending\") && history.push('/dashboard')\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n\r\n        appendToSliderTimePicker()\r\n        setCurrentStepProcess(1)\r\n    }, [endTime, startTime, window.innerWidth])\r\n\r\n\r\n    async function handleSendForm(e) {\r\n        e.preventDefault()\r\n        await isValid().then(async res => {\r\n            if (res === true) {\r\n                setLoading(true)\r\n                setAnimationLoaderDone(false)\r\n                const item = {\r\n                    name: name,\r\n                    date: startDate,\r\n                    startAt: startTime,\r\n                    endAt: endTime,\r\n                    people: nbrPeople,\r\n                    placeSize: placeSize,\r\n                    place: place,\r\n                    latLng: latLng,\r\n                    budget: budget,\r\n                    user: auth.currentUser.uid,\r\n                    paid: 0,\r\n                    status: status,\r\n                    id: event.id\r\n                }\r\n                if (status !== \"creating\") { item.budgetLeft = budget }\r\n                try {\r\n                    addEvent(item).then(() => {\r\n                        history.push('/creer-mon-evenement/etape-2')\r\n                    })\r\n                } catch (e) {\r\n                    setLoading(false)\r\n                    setError('Une erreur inconnue est survenue')\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    async function isValid() {\r\n        // else if(birthDate !== 0) {setError(\"Veuillez renseigner votre nom\")} A faire avec la date de naissance\r\n        if (name.length > 2) {\r\n            if (latLng !== undefined && latLng.lat > 0 && latLng.lng > 0) {\r\n                return true\r\n            }\r\n            else {\r\n                setError(\"Veuillez renseigner une adresse valide\")\r\n                setFieldError(\"place\")\r\n            }\r\n        }\r\n        else {\r\n            setError(\"Veuillez renseigner le nom de votre évènement\")\r\n            setFieldError(\"name\")\r\n        }\r\n    }\r\n\r\n    function handleAdressChanged(adress, latLng) {\r\n        setButtonSendDisabled(true)\r\n        setPlace(adress)\r\n        setLatLng(latLng)\r\n        setButtonSendDisabled(false)\r\n    }\r\n\r\n    function appendToSliderTimePicker() {\r\n        const element = document.getElementsByClassName(\"input-range__slider\")\r\n        const formatedEndTime = formatLabelTimePicker(endTime)\r\n        const formatedStartTime = formatLabelTimePicker(startTime)\r\n        if (element[0] !== undefined) {\r\n            element[0].innerHTML = \"Commence à \" + formatedStartTime\r\n            element[1].innerHTML = \"Termine à \" + formatedEndTime\r\n        }\r\n    }\r\n\r\n    function handleOnChangeInputs(name, value) {\r\n        if (name === fieldError) {\r\n            setFieldError(\"\")\r\n        }\r\n        if (name === \"name\") { setName(value) }\r\n        else if (name === \"nbrPeople\") { setNbrPeople(value) }\r\n        else if (name === \"placeSize\") { setPlaceSize(value) }\r\n        else if (name === \"budget\") { setBudget(value) }\r\n    }\r\n\r\n    function handleDateChanged(val) {\r\n        setStartDate(val)\r\n        setIsCalendarOpened(false)\r\n    }\r\n\r\n    const nextPage = (plus) =>{\r\n        var number = cEventInput\r\n        if(cEventInput==1&&plus==-1){\r\n        } else {\r\n            setCEventInput(number+plus)\r\n        }\r\n    }\r\n\r\n    return (loading || !animationLoaderDone) ? <div className=\"formEtape1Container\"><Loader callBack={() => setAnimationLoaderDone(true)} /></div> : (\r\n        <div>\r\n            <div className=\"formEtape1Container\">\r\n                <div style={{height:'100px'}}>\r\n                    <h2><span style={{color: 'rgb(245, 192, 67)', fontFamily: \"Roboto-medium\"}}>{cEventInput}/6</span></h2>\r\n                    <p>{inputIntro[cEventInput-1]}</p>\r\n                </div>\r\n                <form style={{position:'relative'}}>\r\n                    \r\n                    <div style={{height:\"25vh\",width:\"100%\"}}>\r\n                    </div>\r\n                    <div className=\"formLine inputview\" style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 1 ? 1 : 0, zIndex:cEventInput == 1 ? '1' : '0'}}>\r\n                        <div className={fieldError === \"name\" ? \"formField error\" : \"formField\"}>\r\n                            <label>Nom de l'évènement</label>\r\n                            <input className=\"nameEventInput\" type=\"text\" name=\"name\" value={name} onChange={e => handleOnChangeInputs(\"name\", e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"formLine inputview\" style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 2 ? 1 : 0, zIndex:cEventInput == 2 ? '1' :'0'}}>\r\n                        <div className=\"formFieldSpecialDate\">\r\n                            <label>Quand a-t-il lieu ?</label>\r\n                            <div\r\n                                onClick={() => setIsCalendarOpened(!isCalendarOpened)}\r\n                                className=\"etape1DatePicker\"\r\n                            >\r\n                                {new Date(startDate).toLocaleDateString(\"fr-FR\", { weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\" })}\r\n                            </div>\r\n                            {isCalendarOpened &&\r\n                                <div className=\"calendarContainerAbsolute\">\r\n                                    <LocalizationProvider style={{ position: \"relative!important\" }} locale={frLocale} dateAdapter={AdapterDateFns}>\r\n                                        {isMobile() ?\r\n                                            <MobileDatePicker\r\n                                                label=\"Date de l'évènement\"\r\n                                                open={isCalendarOpened}\r\n                                                onClose={() => setIsCalendarOpened(false)}\r\n                                                value={startDate}\r\n                                                onChange={(val) => handleDateChanged(val)}\r\n                                                renderInput={() => null}\r\n                                                minDate={datePlusYear}\r\n                                            />\r\n                                            :\r\n                                            <DatePicker\r\n                                                open={isCalendarOpened}\r\n                                                onClose={() => setIsCalendarOpened(false)}\r\n                                                value={startDate}\r\n                                                onChange={(val) => handleDateChanged(val)}\r\n                                                renderInput={() => null}\r\n                                                minDate={datePlusYear}\r\n                                            />\r\n                                        }\r\n                                    </LocalizationProvider>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"formLine inputview\" style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 3 ? 1 : 0, zIndex:cEventInput == 3 ? '1' : '0'}}>\r\n                        <div className=\"formField\">\r\n                            <label>Créneau horaire</label>\r\n                            <div className=\"etape1TimePickerContainer\" style={{display:!isMobile()&&'inline-block',width:!isMobile()&&'45%'}}>\r\n                                <InputRange\r\n                                    maxValue={86400}\r\n                                    minValue={0}\r\n                                    draggableTrack\r\n                                    step={900}\r\n                                    value={startTime}\r\n                                    formatLabel={value => formatLabelTimePicker(value)}\r\n                                    onChange={value => setStartTime(value)} />\r\n                            </div>\r\n                            <div className=\"etape1TimePickerContainer endAt\" style={{display:!isMobile()&&'inline-block',width:!isMobile()&&'45%'}}>\r\n                                <InputRange\r\n                                    maxValue={86400}\r\n                                    minValue={0}\r\n                                    draggableTrack\r\n                                    step={900}\r\n                                    value={endTime}\r\n                                    formatLabel={value => formatLabelTimePicker(value)}\r\n                                    onChange={value => setEndTime(value)} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={!isMobile() ? \"formLine  inputview\" : \"formLine mobile  inputview\"} style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 4 ? 1 : 0, zIndex:cEventInput == 4 ? '1' : '0'}}>\r\n                        <div className=\"formField\">\r\n                            <label>Nombre de personnes</label>\r\n                            <NumericInput\r\n                                className=\"form-control\"\r\n                                value={nbrPeople}\r\n                                min={0}\r\n                                max={5000}\r\n                                step={1}\r\n                                precision={0}\r\n                                size={4}\r\n                                mobile\r\n                                onChange={(value) => handleOnChangeInputs(\"nbrPeople\", value)} />\r\n                        </div>\r\n                        <div className=\"formField\">\r\n                            <div className=\"formField_info\">\r\n                                <label>m² du lieu</label><FaQuestionCircle />\r\n                                <span>Nombre de m2 de l’espace où l’évènement pour l’indiquer à nos partenaires si besoin.</span>\r\n                            </div>\r\n                            <NumericInput\r\n                                format={sizeFormat}\r\n                                className=\"form-control\"\r\n                                value={placeSize}\r\n                                min={0}\r\n                                max={10000}\r\n                                step={1}\r\n                                precision={0}\r\n                                size={9}\r\n                                mobile\r\n                                onChange={(value) => handleOnChangeInputs(\"placeSize\", value)} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"formLine inputview\" style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 5 ? 1 : 0, zIndex:cEventInput == 5 ? '1' : '0'}}>\r\n                        <div className={fieldError === \"place\" ? \"formField error\" : \"formField\"}>\r\n                            <label>Lieu de ton évènement</label>\r\n                            <LocationSearchInput placeType=\"address\" value={place} onChanged={handleAdressChanged} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"formLine inputview\" style={{position:'absolute',top:0,width:'100%',opacity:cEventInput == 6 ? 1 : 0, zIndex:cEventInput == 6 ? '1' : '0'}}>\r\n                        <div className={fieldError === \"budget\" ? \"formField error\" : \"formField\"}>\r\n                            <div className=\"formField_info\">\r\n                                <label>Budget</label><FaQuestionCircle />\r\n                                <span>Il te sera possible de suivre l’avancée de ton budget durant l’organisation de ton évènement. Celui-ci peut être modifié à tout moment.</span>\r\n                            </div>\r\n\r\n                            <NumericInput\r\n                                format={euroFormat}\r\n                                className=\"form-control\"\r\n                                value={budget}\r\n                                min={50}\r\n                                max={50000}\r\n                                step={50}\r\n                                precision={0}\r\n                                size={9}\r\n                                mobile\r\n                                onChange={(value) => handleOnChangeInputs(\"budget\", value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    {error.length > 0 &&\r\n                        <p className=\"errorMessage\">{error}</p>\r\n                    }\r\n                </form>\r\n                {cEventInput==6 ?\r\n                    <div className=\"formLine\" style={{display:!isMobile() && \"inline-block\",width:!isMobile() && '25vw'}}>\r\n                        <div className=\"formField\">\r\n                            <ButtonLarge\r\n                                onClick={(e) => handleSendForm(e)}\r\n                                color=\"orange\"\r\n                                value=\"C'est Party!\"\r\n                                backgroundColor=\"rgba(245, 192, 67)\"\r\n                                marginTop=\"10px\"\r\n                                disabled={buttonSendDisabled}\r\n                                width={!isMobile() && '21vw'}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                :\r\n                    <div className=\"formLine\" style={{display:!isMobile() && \"inline-block\",width:!isMobile() && '25vw'}}>\r\n                        <div className=\"formField\">\r\n                            <ButtonLarge\r\n                                onClick={() => nextPage(1)}\r\n                                color=\"orange\"\r\n                                value=\"Passez à l'étape suivante\"\r\n                                backgroundColor=\"rgba(245, 192, 67)\"\r\n                                marginTop=\"10px\"\r\n                                width={!isMobile() && '21vw'}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                }\r\n                <div className=\"formLine\" style={{display:!isMobile() && \"inline-block\",width:!isMobile() && '25vw'}}>\r\n                    <div className=\"formField\">\r\n                        <ButtonLarge\r\n                            onClick={() => nextPage(-1)}\r\n                            color=\"grey\"\r\n                            value=\"Revenir en arrière\"\r\n                            backgroundColor=\"rgba(245, 192, 67)\"\r\n                            marginTop=\"10px\"\r\n                            disable={cEventInput==1 && 'false'}\r\n                            width={!isMobile() && '21vw'}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Etape1"]},"metadata":{},"sourceType":"module"}