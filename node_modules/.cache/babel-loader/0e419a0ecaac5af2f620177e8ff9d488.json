{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\My Project\\\\Copie de Nivid\\\\Copie de Nivid (1)\\\\src\\\\pages\\\\Prest_Step2.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles/Prest_.css\";\nimport { useHistory } from 'react-router-dom';\nimport { useAuth } from \"../context/userContext\"; // context\n\nimport DeleteIcon from '@mui/icons-material/DeleteOutline';\nimport IconButton from '@mui/material/IconButton';\nimport AddIcon from '@mui/icons-material/Add';\nimport { useDetectClickOutside } from 'react-detect-click-outside';\nimport { ButtonSmall, ButtonLarge } from '../components/utilities/Buttons';\nimport Layout from '../components/utilities/Layout';\nimport Title from '../components/utilities/Title';\nimport SubTitle from '../components/utilities/SubTitle';\nimport NumericInput from 'react-numeric-input';\nimport { useFirebase } from \"../assets/base-context\";\nimport ReactLoading from 'react-loading';\nimport { FaTrashAlt } from 'react-icons/fa';\nimport { CSSTransition } from 'react-transition-group';\nimport Image from '../components/utilities/Image';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\n\nconst BoxConfirm = ({\n  type,\n  position,\n  callback,\n  callbackClose\n}) => {\n  _s();\n\n  const refConfirmBox = useDetectClickOutside({\n    onTriggered: callbackClose\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: refConfirmBox,\n    className: `confirmBox ${position}`,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: [type === \"delete\" && \"Confirmation de suprresion d'une variation\", type === \"save\" && \"Confirmation de sauvegarde\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [type === \"delete\" && \"Êtes-vous sûr de vouloir supprimer cette variation ?\", type === \"save\" && \"Vous n'avez rien oublié ?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [type === \"delete\" && \"Cette action est irréversible\", type === \"save\" && \"Si jamais... Vous pouvez toujours modifier ce service directement depuis votre dashboard\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n      onClick: callback,\n      color: type === \"delete\" ? \"red\" : \"green\",\n      value: \"Je confirme\",\n      marginTop: \"20px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 12\n  }, this);\n};\n\n_s(BoxConfirm, \"Mqm6DHivUEoOi7PWz+tHvxIRV+Y=\", false, function () {\n  return [useDetectClickOutside];\n});\n\n_c = BoxConfirm;\n\nconst Prest_Step2 = () => {\n  _s2();\n\n  const firebaseContext = useFirebase();\n  const storage = firebaseContext.storage();\n  const [error, setError] = useState({\n    type: \"\",\n    message: \"\"\n  });\n  const [buttonLoading, setButtonLoading] = useState(false);\n  const [services, setServices] = useState([]);\n  const [pictureTokensToDelete, setPictureTokensToDelete] = useState([]);\n  const [isFormOpened, setIsFormOpened] = useState(false);\n  const {\n    seller,\n    setCurrentStepProcess,\n    addSellerServices,\n    getServicesOfCurrentSellerFromDB,\n    deleteOldSellerPicture,\n    addFoodTypeToSeller\n  } = useAuth(); // context\n\n  const history = useHistory();\n  seller.status !== \"subscribing\" && history.push('/mon-compte-partenaire');\n  const initialNewService = {\n    category: seller.category,\n    name: \"\",\n    images: [],\n    description: \"\",\n    price: 0,\n    variations: [],\n    foodType: \"Aucun\",\n    id: null\n  };\n  const [newService, setNewService] = useState(initialNewService);\n  const [isMounted, setIsMounted] = useState(false);\n  const [isPopupConfirmDeleteOpened, setIsPopupConfirmDeleteOpened] = useState(false);\n  const [isPopupConfirmSaveOpened, setIsPopupConfirmSaveOpened] = useState(false);\n  const [currentDeletingVariation, setCurrentDeletingVariation] = useState(-1);\n  const [isServiceAddedCorrectly, setIsServiceAddedCorrectly] = useState(false);\n  const [isVariations, setIsVariations] = useState(false);\n  setCurrentStepProcess(2);\n  useEffect(() => {\n    function getCurrentServicesFromDB() {\n      getServicesOfCurrentSellerFromDB().then(data => {\n        setServices(data);\n      });\n    }\n\n    getCurrentServicesFromDB();\n    setIsMounted(true);\n  }, []);\n\n  function handleChange(e) {\n    const type = e.target.files[0].type;\n    const size = e.target.files[0].size;\n\n    if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\" && type !== \"application/pdf\") {\n      setError({\n        type: \"imageType\",\n        message: \"Votre fichier n'est ni une image jpeg, jpg, png ou PDF.\"\n      });\n    } else if (size > 2000000) {\n      setError({\n        type: \"imageSize\",\n        message: \"Votre image fait plus de 2Mo.\"\n      });\n    } else {\n      const newURL = URL.createObjectURL(e.target.files[0]);\n      e.target.files[0].localURL = newURL;\n      setNewService({ ...newService,\n        images: [...newService.images, e.target.files[0]]\n      });\n      setError({\n        type: \"\",\n        message: \"\"\n      });\n    }\n  }\n\n  function euroFormat(num) {\n    return num + '€';\n  }\n\n  function handleDeletePicture(item) {\n    const newPictures = [...newService.images];\n\n    for (var i = 0; i < newPictures.length; i++) {\n      if (newPictures[i].localURL === item || newPictures[i].url === item) {\n        if (newPictures[i].url === item) {\n          setPictureTokensToDelete([...pictureTokensToDelete, newPictures[i].token]);\n        }\n\n        newPictures.splice(i, 1);\n      }\n    }\n\n    setNewService({ ...newService,\n      images: newPictures\n    });\n  }\n\n  function handleServiceClicked(item) {\n    setIsVariations(item.variations.length > 0 ? true : false);\n    clearInputs();\n    setNewService(item);\n    setIsFormOpened(true);\n  }\n\n  function clearInputs() {\n    setNewService(initialNewService);\n    setError({\n      type: \"\",\n      message: \"\"\n    });\n  }\n\n  function handleAddService() {\n    setIsPopupConfirmSaveOpened(false);\n\n    if (newService.name.length < 5) {\n      setError({\n        type: \"name\",\n        message: \"Le nom de votre offre doit faire au minimum 5 caractères.\"\n      });\n    } else if (newService.description.length < 20 || newService.description.length > 300) {\n      setError({\n        type: \"description\",\n        message: \"Votre description doit comporter entre 20 et 300 caractères.\"\n      });\n    } else if (newService.images.length === 0) {\n      setError({\n        type: \"noPictures\",\n        message: \"Vous devez ajouter au moins une photo de votre service.\"\n      });\n    } else {\n      setIsFormOpened(false); //Si l'id est égal à Null, c'est que le service est nouveau\n      //Si l'id n'est pas null, on ne créera pas un nouveau service on modifiera l'actuel\n\n      if (newService.id !== null) {\n        const newServicesList = [...services];\n        var index = newServicesList.findIndex(service => service.id === newService.id);\n        const serviceToUpload = { ...newService\n        };\n        if (!isVariations) serviceToUpload.variations = [];\n        newServicesList[index] = serviceToUpload;\n        setServices(newServicesList);\n        clearInputs();\n        setIsServiceAddedCorrectly(true);\n        setTimeout(() => {\n          setIsServiceAddedCorrectly(false);\n        }, 2000);\n      } else {\n        if (services.length >= 5) {\n          setError({\n            type: \"maxServices\",\n            message: \"Vous avez déjà atteint le maximum d'offres sur votre boutique.\"\n          });\n        } else {\n          const reconstructedService = newService;\n          reconstructedService.id = services.length;\n          if (!isVariations) reconstructedService.variations = [];\n          setServices([...services, reconstructedService]);\n          clearInputs();\n          setIsServiceAddedCorrectly(true);\n          setTimeout(() => {\n            setIsServiceAddedCorrectly(false);\n          }, 2000);\n        }\n      }\n    }\n  }\n\n  function handleClickedAddService() {\n    setIsFormOpened(true);\n    setIsVariations(false);\n    clearInputs();\n    document.getElementById('serviceName').focus();\n  }\n\n  function handleFormSend() {\n    setButtonLoading(true);\n\n    if (services.length > 0) {\n      var newAllServicesArray = [];\n      services.forEach(async service => {\n        var newServiceImageArray = service.images.filter(image => !image.localURL);\n        var newServiceArray = {\n          description: service.description,\n          id: service.id,\n          name: service.name,\n          images: newServiceImageArray,\n          price: service.price,\n          category: service.category,\n          variations: service.variations,\n          foodType: service.foodType !== undefined ? service.foodType : \"Aucun\"\n        };\n        if (seller.category === \"nourriture\") await addFoodTypeToSeller(service.foodType !== undefined ? service.foodType : \"Aucun\");\n\n        for (var i = 0; i < service.images.length; i++) {\n          if (service.images[i].localURL) {\n            const token = Math.random().toString(36).substr(2, 19);\n            const url = await handleUploadFile(service.images[i], token);\n            let newImg = {\n              url: url,\n              token: token\n            };\n            newServiceImageArray.push(newImg);\n            newServiceArray.images = newServiceImageArray;\n            pictureTokensToDelete.length > 0 && deleteOldSellerPicture(pictureTokensToDelete, \"services\");\n          }\n        }\n\n        newAllServicesArray = [...newAllServicesArray, newServiceArray];\n\n        if (services.length === newAllServicesArray.length) {\n          await addSellerServices(newAllServicesArray);\n          history.push('/mon-compte-partenaire/process/verification-1');\n        }\n      });\n    } else {\n      setError({\n        type: \"serviceSize\",\n        message: \"Merci d'ajouter au moins un service à votre boutique.\"\n      });\n      setButtonLoading(false);\n    }\n  }\n\n  function handleUploadFile(image, token) {\n    return new Promise((resolve, reject) => {\n      const upload = storage.ref(`services/${token}`).put(image);\n      upload.on(\"state_changed\", snapshot => {}, error => {\n        console.log(error);\n      }, () => {\n        storage.ref(\"services\").child(token).getDownloadURL().then(url => {\n          resolve(url);\n        }).catch(error => {\n          console.error(error);\n          reject(error);\n        });\n      });\n    });\n  }\n\n  function handleVariationChanged(type, val, key) {\n    let newVariations = [...newService.variations];\n    let newVariation = { ...newService.variations[key]\n    };\n    if (type === \"name\") newVariation.name = val;else if (type === \"price\") newVariation.price = val;\n    newVariations[key] = newVariation;\n    setNewService({ ...newService,\n      variations: newVariations\n    });\n  }\n\n  function handleDeleteVariation(key) {\n    let newVariations = [...newService.variations];\n    newVariations.splice(key, key + 1);\n    setNewService({ ...newService,\n      variations: newVariations\n    });\n    setCurrentDeletingVariation(-1);\n    setIsPopupConfirmDeleteOpened(false);\n  }\n\n  function handleFoodTypeChanged(e) {\n    let newNewService = { ...newService\n    };\n    newNewService.foodType = e.target.value;\n    setNewService(newNewService);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(CSSTransition, {\n        in: isMounted,\n        timeout: 300,\n        classNames: \"pageTransition\",\n        unmountOnExit: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Prest-Step2-Header\",\n            children: [/*#__PURE__*/_jsxDEV(SubTitle, {\n              value: \"Cr\\xE9ation de vos services\",\n              type: \"big\",\n              font: \"roboto-medium\",\n              align: \"left\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Sur cette page vous pourrez cr\\xE9er vos services, qui seront ensuite visibles sur la page de votre profil NIVID.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Prenez donc le temps de r\\xE9fl\\xE9chir vos prix & r\\xE9diger une bonne description.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"d\\xE8s validation de votre dossier nous viendrons prendre des photos professionnelles de vos services/produits\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Title, {\n              value: \"Ajouter vos services/produits\",\n              type: \"h2\",\n              font: \"roboto-medium\",\n              align: \"left\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"servicesListeContainer\",\n              children: [services.map((item, key) => {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"serviceContainer\",\n                  onClick: () => handleServiceClicked(item),\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"detailsServiceItem active\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"serviceItem\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"imgDetailsServiceItem\",\n                        children: /*#__PURE__*/_jsxDEV(Image, {\n                          url: item.images[0].localURL || item.images[0].url\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 336,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 335,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"contentDetailsServiceItem\",\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"title\",\n                          children: item.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 339,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [item.variations.length > 0 ? item.variations[0].price : item.price, \",00\\u20AC\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 340,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 338,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 334,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 49\n                  }, this)\n                }, key, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 45\n                }, this);\n              }), services.length < 5 && /*#__PURE__*/_jsxDEV(\"label\", {\n                onClick: () => handleClickedAddService(),\n                className: \"label-file\",\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [services.length, \" / 5\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: isFormOpened ? \"formWrapContainer active\" : \"formWrapContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Prest-Step2-Section0\",\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                value: \"Type de service:\",\n                type: \"h3\",\n                font: \"roboto-medium\",\n                align: \"left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Prest-Step2-Section0_serviceType\",\n                children: [/*#__PURE__*/_jsxDEV(Title, {\n                  onClick: () => setIsVariations(false),\n                  customClass: !isVariations && \"active\",\n                  value: \"Service simple\",\n                  type: \"h2\",\n                  font: \"roboto-medium\",\n                  align: \"left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Title, {\n                  onClick: () => {\n                    newService.variations.length === 0 && setNewService({ ...newService,\n                      variations: [{\n                        name: \"\",\n                        price: 0\n                      }]\n                    });\n                    setIsVariations(true);\n                  },\n                  customClass: isVariations && \"active\",\n                  value: \"Service variable\",\n                  type: \"h2\",\n                  font: \"roboto-medium\",\n                  align: \"left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `Prest-Step2-Section1 ${isVariations ? \"noFlex\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left\",\n                children: [/*#__PURE__*/_jsxDEV(Title, {\n                  value: \"Intitul\\xE9 du service\",\n                  type: \"h2\",\n                  font: \"roboto-medium\",\n                  align: \"left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Le nom de votre offre, par exemple : x5 fleurs de d\\xE9corations de table\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"formField withoutMargin\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: `${error.type === \"name\" ? \"invalid\" : \"\"}`,\n                    id: \"serviceName\",\n                    type: \"text\",\n                    value: newService.name,\n                    onChange: e => (setError({\n                      type: \"\",\n                      message: \"\"\n                    }), setNewService({ ...newService,\n                      name: e.target.value\n                    }))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 366,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 33\n              }, this), !isVariations && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right\",\n                children: [/*#__PURE__*/_jsxDEV(Title, {\n                  value: \"Prix de votre service\",\n                  type: \"h2\",\n                  font: \"roboto-medium\",\n                  align: \"left\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"formField withoutMargin\",\n                  children: /*#__PURE__*/_jsxDEV(NumericInput, {\n                    format: euroFormat,\n                    className: \"form-control\",\n                    value: newService.price,\n                    min: 20,\n                    max: 1000,\n                    step: 1,\n                    precision: 0,\n                    size: 9,\n                    mobile: true,\n                    onChange: value => (setError({\n                      type: \"\",\n                      message: \"\"\n                    }), setNewService({ ...newService,\n                      price: value\n                    }))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 29\n            }, this), seller.category === \"nourriture\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Prest-Step2-Section1bis\",\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                value: \"R\\xE9gime alimentaire\",\n                type: \"h2\",\n                font: \"roboto-medium\",\n                align: \"left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n                row: true,\n                \"aria-label\": \"gender\",\n                name: \"row-radio-buttons-group\",\n                onChange: handleFoodTypeChanged,\n                value: newService.foodType !== undefined ? newService.foodType : \"Aucun\",\n                children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: \"Vegan\",\n                  control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 82\n                  }, this),\n                  label: \"Vegan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: \"Casher\",\n                  control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 83\n                  }, this),\n                  label: \"Casher\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: \"Halal\",\n                  control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 82\n                  }, this),\n                  label: \"Halal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: \"Vegetarien\",\n                  control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 87\n                  }, this),\n                  label: \"V\\xE9g\\xE9tarien\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: \"Aucun\",\n                  control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 82\n                  }, this),\n                  label: \"Aucun\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Prest-Step2-Section2\",\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                value: \"Description de votre service\",\n                type: \"h2\",\n                font: \"roboto-medium\",\n                align: \"left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"D\\xE9crivez au mieux le service que vous proposez au travers de cette offre.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: newService.description,\n                onChange: e => setNewService({ ...newService,\n                  description: e.target.value\n                }),\n                className: `${error.type === \"description\" && \"invalid\"}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 29\n            }, this), isVariations && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Prest-Step2-Section2bis\",\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                value: \"Cr\\xE9ation des d\\xE9clinaisons\",\n                type: \"h2\",\n                font: \"roboto-medium\",\n                align: \"left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Prest-Step2-Section2bis_variations\",\n                children: newService.variations.map((variation, key) => {\n                  return /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"variation_header\",\n                      children: [/*#__PURE__*/_jsxDEV(Title, {\n                        value: `Variation ${key}`,\n                        type: \"h3\",\n                        font: \"roboto-medium\",\n                        align: \"left\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 441,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: () => {\n                          setCurrentDeletingVariation(key);\n                          setIsPopupConfirmDeleteOpened(true);\n                        },\n                        color: \"error\",\n                        \"aria-label\": \"delete\",\n                        children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 447,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 442,\n                        columnNumber: 53\n                      }, this), isPopupConfirmDeleteOpened && currentDeletingVariation === key && /*#__PURE__*/_jsxDEV(BoxConfirm, {\n                        type: \"delete\",\n                        position: \"bottom\",\n                        callback: () => handleDeleteVariation(key),\n                        callbackClose: () => {\n                          setCurrentDeletingVariation(-1);\n                          setIsPopupConfirmDeleteOpened(false);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 450,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"Prest-Step2-Section2bis_variation_item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"left\",\n                        children: [/*#__PURE__*/_jsxDEV(Title, {\n                          value: \"Intitul\\xE9 de la variation\",\n                          type: \"h2\",\n                          font: \"roboto-medium\",\n                          align: \"left\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 459,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: \"Le nom de votre variation, par exemple : 6 parts/6 personnes\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 460,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"formField withoutMargin\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: error.type === \"name\" && \"invalid\",\n                            id: \"serviceName\",\n                            type: \"text\",\n                            value: newService.variations[key].name,\n                            onChange: e => handleVariationChanged(\"name\", e.target.value, key)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 462,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 461,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 458,\n                        columnNumber: 105\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"right\",\n                        children: [/*#__PURE__*/_jsxDEV(Title, {\n                          value: \"Prix de la variation\",\n                          type: \"h2\",\n                          font: \"roboto-medium\",\n                          align: \"left\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 472,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"formField withoutMargin\",\n                          children: /*#__PURE__*/_jsxDEV(NumericInput, {\n                            format: euroFormat,\n                            className: \"form-control\",\n                            value: newService.variations[key].price,\n                            min: 20,\n                            max: 1000,\n                            step: 1,\n                            precision: 0,\n                            size: 9,\n                            mobile: true,\n                            onChange: value => handleVariationChanged(\"price\", value, key)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 474,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 473,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 471,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 458,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                onClick: () => setNewService({ ...newService,\n                  variations: [...newService.variations, {\n                    name: \"\",\n                    price: 0\n                  }]\n                }),\n                color: \"blue\",\n                value: \"Ajouter une variation\",\n                marginTop: \"20px\",\n                classname: \"flex\",\n                iconMUIStart: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 55\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Prest-Step2-Section3\",\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                value: \"Photos du service\",\n                type: \"h2\",\n                font: \"roboto-medium\",\n                align: \"left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 33\n              }, this), (error.type === \"imageSize\" || error.type === \"imageType\" || error.type === \"noPictures\") && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"errorMessage\",\n                children: error.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 127\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Plusieurs photos peuvent \\xEAtre utiles pour le client, cela lui permettra de voir votre service plus en d\\xE9tail.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"servicesListeContainer\",\n                children: [newService.images.map((item, key) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => handleDeletePicture(item.localURL || item.url),\n                  style: {\n                    position: \"relative\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    url: item.localURL || item.url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(FaTrashAlt, {\n                    color: \"white\",\n                    size: 32\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 86\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 41\n                }, this)), newService.images.length < 4 && /*#__PURE__*/_jsxDEV(\"label\", {\n                  for: \"file\",\n                  className: \"label-file\",\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 70\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/jpeg, image/jpg, image/png, application/pdf\",\n                id: \"file\",\n                className: \"input-file\",\n                type: \"file\",\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Prest-Step2-Section3-bottom\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"2Mo max par photo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Type de fichiers accept\\xE9s : jpeg, jpg, png ou PDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"buttonSaveOffer\",\n                children: [error.type === \"maxServices\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"errorMessage\",\n                  children: error.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 70\n                }, this), error.type === \"name\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"errorMessage\",\n                  children: error.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 63\n                }, this), error.type === \"description\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"errorMessage\",\n                  children: error.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 70\n                }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                  onClick: () => setIsPopupConfirmSaveOpened(true),\n                  color: \"green\",\n                  value: \"Sauvergarder cette offre\",\n                  marginTop: \"20px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 37\n                }, this), isPopupConfirmSaveOpened && /*#__PURE__*/_jsxDEV(BoxConfirm, {\n                  type: \"save\",\n                  position: \"top\",\n                  callback: () => handleAddService(),\n                  callbackClose: () => setIsPopupConfirmSaveOpened(false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Prest-Step2-Section4\",\n            children: [/*#__PURE__*/_jsxDEV(Title, {\n              value: \"Une fois termin\\xE9, passez \\xE0 l\\u2019\\xE9tape suivante\",\n              type: \"h2\",\n              font: \"roboto-medium\",\n              align: \"right\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Vos services pourront \\xEAtre modifi\\xE9s sur votre tableau de bord plus tard.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ButtonLarge, {\n              onClick: () => handleFormSend(),\n              color: \"orange\",\n              width: \"400px\",\n              value: buttonLoading ? /*#__PURE__*/_jsxDEV(ReactLoading, {\n                className: \"loadingSpinnerButton\",\n                type: \"spin\",\n                color: \"white\",\n                height: 23,\n                width: 23\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 56\n              }, this) : \"Passer à l'étape suivante\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 25\n          }, this), error.type === \"serviceSize\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"PrestErrorMessage\",\n            children: error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 58\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: isServiceAddedCorrectly,\n      timeout: 300,\n      classNames: \"pageTransition\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"serviceAddedMessage\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Annonce sauvegard\\xE9e avec succ\\xE8s\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(Prest_Step2, \"plYxNjB4H+E+6Qg2ZOeP1mrQSoY=\", false, function () {\n  return [useFirebase, useAuth, useHistory];\n});\n\n_c2 = Prest_Step2;\nexport default Prest_Step2;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BoxConfirm\");\n$RefreshReg$(_c2, \"Prest_Step2\");","map":{"version":3,"sources":["F:/My Project/Copie de Nivid/Copie de Nivid (1)/src/pages/Prest_Step2.js"],"names":["React","useState","useEffect","useHistory","useAuth","DeleteIcon","IconButton","AddIcon","useDetectClickOutside","ButtonSmall","ButtonLarge","Layout","Title","SubTitle","NumericInput","useFirebase","ReactLoading","FaTrashAlt","CSSTransition","Image","Radio","RadioGroup","FormControlLabel","BoxConfirm","type","position","callback","callbackClose","refConfirmBox","onTriggered","Prest_Step2","firebaseContext","storage","error","setError","message","buttonLoading","setButtonLoading","services","setServices","pictureTokensToDelete","setPictureTokensToDelete","isFormOpened","setIsFormOpened","seller","setCurrentStepProcess","addSellerServices","getServicesOfCurrentSellerFromDB","deleteOldSellerPicture","addFoodTypeToSeller","history","status","push","initialNewService","category","name","images","description","price","variations","foodType","id","newService","setNewService","isMounted","setIsMounted","isPopupConfirmDeleteOpened","setIsPopupConfirmDeleteOpened","isPopupConfirmSaveOpened","setIsPopupConfirmSaveOpened","currentDeletingVariation","setCurrentDeletingVariation","isServiceAddedCorrectly","setIsServiceAddedCorrectly","isVariations","setIsVariations","getCurrentServicesFromDB","then","data","handleChange","e","target","files","size","newURL","URL","createObjectURL","localURL","euroFormat","num","handleDeletePicture","item","newPictures","i","length","url","token","splice","handleServiceClicked","clearInputs","handleAddService","newServicesList","index","findIndex","service","serviceToUpload","setTimeout","reconstructedService","handleClickedAddService","document","getElementById","focus","handleFormSend","newAllServicesArray","forEach","newServiceImageArray","filter","image","newServiceArray","undefined","Math","random","toString","substr","handleUploadFile","newImg","Promise","resolve","reject","upload","ref","put","on","snapshot","console","log","child","getDownloadURL","catch","handleVariationChanged","val","key","newVariations","newVariation","handleDeleteVariation","handleFoodTypeChanged","newNewService","value","map","variation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles/Prest_.css\"\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from \"../context/userContext\"; // context\r\n\r\nimport DeleteIcon from '@mui/icons-material/DeleteOutline';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nimport { useDetectClickOutside } from 'react-detect-click-outside';\r\n\r\nimport { ButtonSmall, ButtonLarge } from '../components/utilities/Buttons'\r\nimport Layout from '../components/utilities/Layout'\r\nimport Title from '../components/utilities/Title'\r\nimport SubTitle from '../components/utilities/SubTitle'\r\nimport NumericInput from 'react-numeric-input';\r\nimport { useFirebase } from \"../assets/base-context\";\r\nimport ReactLoading from 'react-loading';\r\n\r\nimport { FaTrashAlt } from 'react-icons/fa'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nimport Image from '../components/utilities/Image'\r\n\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\n\r\nconst BoxConfirm = ({ type, position, callback, callbackClose }) => {\r\n    const refConfirmBox = useDetectClickOutside({ onTriggered: callbackClose });\r\n    return <div ref={refConfirmBox} className={`confirmBox ${position}`}>\r\n        <span>\r\n            {type === \"delete\" && \"Confirmation de suprresion d'une variation\"}\r\n            {type === \"save\" && \"Confirmation de sauvegarde\"}\r\n        </span>\r\n        <h2>\r\n            {type === \"delete\" && \"Êtes-vous sûr de vouloir supprimer cette variation ?\"}\r\n            {type === \"save\" && \"Vous n'avez rien oublié ?\"}\r\n        </h2>\r\n        <p>\r\n            {type === \"delete\" && \"Cette action est irréversible\"}\r\n            {type === \"save\" && \"Si jamais... Vous pouvez toujours modifier ce service directement depuis votre dashboard\"}\r\n        </p>\r\n\r\n        <ButtonSmall\r\n            onClick={callback}\r\n            color={type === \"delete\" ? \"red\" : \"green\"}\r\n            value=\"Je confirme\"\r\n            marginTop=\"20px\"\r\n        />\r\n    </div>\r\n}\r\n\r\n\r\nconst Prest_Step2 = () => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const storage = firebaseContext.storage()\r\n\r\n    const [error, setError] = useState({ type: \"\", message: \"\" });\r\n    const [buttonLoading, setButtonLoading] = useState(false)\r\n\r\n    const [services, setServices] = useState([])\r\n    const [pictureTokensToDelete, setPictureTokensToDelete] = useState([])\r\n\r\n    const [isFormOpened, setIsFormOpened] = useState(false)\r\n\r\n    const { seller, setCurrentStepProcess, addSellerServices, getServicesOfCurrentSellerFromDB, deleteOldSellerPicture, addFoodTypeToSeller } = useAuth() // context\r\n    const history = useHistory()\r\n\r\n    seller.status !== \"subscribing\" && history.push('/mon-compte-partenaire')\r\n\r\n    const initialNewService = {\r\n        category: seller.category,\r\n        name: \"\",\r\n        images: [],\r\n        description: \"\",\r\n        price: 0,\r\n        variations: [],\r\n        foodType: \"Aucun\",\r\n        id: null\r\n    }\r\n\r\n    const [newService, setNewService] = useState(initialNewService)\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n    const [isPopupConfirmDeleteOpened, setIsPopupConfirmDeleteOpened] = useState(false)\r\n    const [isPopupConfirmSaveOpened, setIsPopupConfirmSaveOpened] = useState(false)\r\n    const [currentDeletingVariation, setCurrentDeletingVariation] = useState(-1)\r\n\r\n    const [isServiceAddedCorrectly, setIsServiceAddedCorrectly] = useState(false)\r\n\r\n    const [isVariations, setIsVariations] = useState(false)\r\n\r\n    setCurrentStepProcess(2)\r\n\r\n    useEffect(() => {\r\n        function getCurrentServicesFromDB() {\r\n            getServicesOfCurrentSellerFromDB().then(data => {\r\n                setServices(data)\r\n            })\r\n        }\r\n        getCurrentServicesFromDB()\r\n        setIsMounted(true)\r\n    }, [])\r\n\r\n\r\n    function handleChange(e) {\r\n        const type = e.target.files[0].type\r\n        const size = e.target.files[0].size\r\n        if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\" && type !== \"application/pdf\") {\r\n            setError({ type: \"imageType\", message: \"Votre fichier n'est ni une image jpeg, jpg, png ou PDF.\" })\r\n        }\r\n        else if (size > 2000000) {\r\n            setError({ type: \"imageSize\", message: \"Votre image fait plus de 2Mo.\" })\r\n        }\r\n        else {\r\n            const newURL = URL.createObjectURL(e.target.files[0])\r\n            e.target.files[0].localURL = newURL\r\n            setNewService({ ...newService, images: [...newService.images, e.target.files[0]] })\r\n            setError({ type: \"\", message: \"\" })\r\n        }\r\n    }\r\n\r\n    function euroFormat(num) { return num + '€'; }\r\n\r\n    function handleDeletePicture(item) {\r\n        const newPictures = [...newService.images]\r\n        for (var i = 0; i < newPictures.length; i++) {\r\n            if (newPictures[i].localURL === item || newPictures[i].url === item) {\r\n                if (newPictures[i].url === item) {\r\n                    setPictureTokensToDelete([...pictureTokensToDelete, newPictures[i].token])\r\n                }\r\n                newPictures.splice(i, 1);\r\n            }\r\n        }\r\n        setNewService({ ...newService, images: newPictures })\r\n    }\r\n\r\n    function handleServiceClicked(item) {\r\n        setIsVariations(item.variations.length > 0 ? true : false)\r\n        clearInputs()\r\n        setNewService(item)\r\n        setIsFormOpened(true)\r\n    }\r\n\r\n    function clearInputs() {\r\n        setNewService(initialNewService)\r\n        setError({ type: \"\", message: \"\" })\r\n    }\r\n\r\n    function handleAddService() {\r\n        setIsPopupConfirmSaveOpened(false)\r\n        if (newService.name.length < 5) {\r\n            setError({ type: \"name\", message: \"Le nom de votre offre doit faire au minimum 5 caractères.\" })\r\n        }\r\n        else if (newService.description.length < 20 || newService.description.length > 300) {\r\n            setError({ type: \"description\", message: \"Votre description doit comporter entre 20 et 300 caractères.\" })\r\n        }\r\n        else if (newService.images.length === 0) {\r\n            setError({ type: \"noPictures\", message: \"Vous devez ajouter au moins une photo de votre service.\" })\r\n        }\r\n        else {\r\n            setIsFormOpened(false)\r\n\r\n            //Si l'id est égal à Null, c'est que le service est nouveau\r\n            //Si l'id n'est pas null, on ne créera pas un nouveau service on modifiera l'actuel\r\n            if (newService.id !== null) {\r\n                const newServicesList = [...services]\r\n                var index = newServicesList.findIndex(service => service.id === newService.id)\r\n\r\n                const serviceToUpload = { ...newService }\r\n                if (!isVariations) serviceToUpload.variations = []\r\n                newServicesList[index] = serviceToUpload\r\n\r\n                setServices(newServicesList)\r\n                clearInputs()\r\n                setIsServiceAddedCorrectly(true)\r\n                setTimeout(() => {\r\n                    setIsServiceAddedCorrectly(false)\r\n                }, 2000)\r\n            }\r\n            else {\r\n\r\n                if (services.length >= 5) {\r\n                    setError({ type: \"maxServices\", message: \"Vous avez déjà atteint le maximum d'offres sur votre boutique.\" })\r\n                }\r\n                else {\r\n                    const reconstructedService = newService\r\n                    reconstructedService.id = services.length\r\n                    if (!isVariations) reconstructedService.variations = []\r\n\r\n                    setServices([...services, reconstructedService])\r\n                    clearInputs()\r\n                    setIsServiceAddedCorrectly(true)\r\n                    setTimeout(() => {\r\n                        setIsServiceAddedCorrectly(false)\r\n                    }, 2000)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function handleClickedAddService() {\r\n        setIsFormOpened(true)\r\n        setIsVariations(false)\r\n        clearInputs()\r\n        document.getElementById('serviceName').focus()\r\n    }\r\n\r\n    function handleFormSend() {\r\n        setButtonLoading(true)\r\n        if (services.length > 0) {\r\n            var newAllServicesArray = []\r\n\r\n            services.forEach(async service => {\r\n                var newServiceImageArray = service.images.filter(image => !image.localURL)\r\n                var newServiceArray = {\r\n                    description: service.description,\r\n                    id: service.id,\r\n                    name: service.name,\r\n                    images: newServiceImageArray,\r\n                    price: service.price,\r\n                    category: service.category,\r\n                    variations: service.variations,\r\n                    foodType: service.foodType !== undefined ? service.foodType : \"Aucun\"\r\n                }\r\n                \r\n                if (seller.category === \"nourriture\")\r\n                    await addFoodTypeToSeller(service.foodType !== undefined ? service.foodType : \"Aucun\")\r\n\r\n                for (var i = 0; i < service.images.length; i++) {\r\n\r\n                    if (service.images[i].localURL) {\r\n                        const token = Math.random().toString(36).substr(2, 19)\r\n                        const url = await handleUploadFile(service.images[i], token)\r\n                        let newImg = { url: url, token: token }\r\n                        newServiceImageArray.push(newImg)\r\n                        newServiceArray.images = newServiceImageArray\r\n                        pictureTokensToDelete.length > 0 && deleteOldSellerPicture(pictureTokensToDelete, \"services\")\r\n                    }\r\n                }\r\n                newAllServicesArray = [...newAllServicesArray, newServiceArray]\r\n                if (services.length === newAllServicesArray.length) {\r\n                    await addSellerServices(newAllServicesArray)\r\n                    history.push('/mon-compte-partenaire/process/verification-1')\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            setError({ type: \"serviceSize\", message: \"Merci d'ajouter au moins un service à votre boutique.\" })\r\n            setButtonLoading(false)\r\n        }\r\n    }\r\n\r\n    function handleUploadFile(image, token) {\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const upload = storage.ref(`services/${token}`).put(image)\r\n            upload.on(\r\n                \"state_changed\", snapshot => { },\r\n                error => {\r\n                    console.log(error)\r\n                }, () => {\r\n                    storage\r\n                        .ref(\"services\")\r\n                        .child(token)\r\n                        .getDownloadURL()\r\n                        .then(url => {\r\n                            resolve(url);\r\n                        })\r\n                        .catch(error => {\r\n                            console.error(error)\r\n                            reject(error);\r\n                        })\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    function handleVariationChanged(type, val, key) {\r\n        let newVariations = [...newService.variations]\r\n        let newVariation = { ...newService.variations[key] }\r\n        if (type === \"name\") newVariation.name = val\r\n        else if (type === \"price\") newVariation.price = val\r\n        newVariations[key] = newVariation\r\n        setNewService({ ...newService, variations: newVariations })\r\n    }\r\n\r\n    function handleDeleteVariation(key) {\r\n        let newVariations = [...newService.variations]\r\n        newVariations.splice(key, key + 1)\r\n        setNewService({ ...newService, variations: newVariations })\r\n        setCurrentDeletingVariation(-1)\r\n        setIsPopupConfirmDeleteOpened(false)\r\n    }\r\n\r\n\r\n    function handleFoodTypeChanged(e) {\r\n        let newNewService = { ...newService }\r\n        newNewService.foodType = e.target.value\r\n        setNewService(newNewService)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Layout>\r\n                <CSSTransition\r\n                    in={isMounted}\r\n                    timeout={300}\r\n                    classNames=\"pageTransition\"\r\n                    unmountOnExit\r\n                >\r\n                    <div>\r\n                        <div className=\"Prest-Step2-Header\">\r\n                            <SubTitle value=\"Création de vos services\" type=\"big\" font=\"roboto-medium\" align=\"left\" />\r\n                            <p>Sur cette page vous pourrez créer vos services, qui seront ensuite visibles sur la page de votre profil NIVID.</p>\r\n                            <p>Prenez donc le temps de réfléchir vos prix & rédiger une bonne description.</p>\r\n                            <p>dès validation de votre dossier nous viendrons prendre des photos professionnelles de vos services/produits</p>\r\n                            <Title value=\"Ajouter vos services/produits\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                            <div className=\"servicesListeContainer\">\r\n                                {\r\n                                    services.map((item, key) => {\r\n                                        return (\r\n                                            <div\r\n                                                className=\"serviceContainer\"\r\n                                                onClick={() => handleServiceClicked(item)}\r\n                                                key={key}\r\n                                            >\r\n\r\n                                                <div className=\"detailsServiceItem active\">\r\n                                                    <div className=\"serviceItem\">\r\n                                                        <div className=\"imgDetailsServiceItem\">\r\n                                                            <Image url={item.images[0].localURL || item.images[0].url} />\r\n                                                        </div>\r\n                                                        <div className=\"contentDetailsServiceItem\">\r\n                                                            <p className=\"title\">{item.name}</p>\r\n                                                            <p>{item.variations.length > 0 ? item.variations[0].price : item.price},00€</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                {services.length < 5 && <label onClick={() => handleClickedAddService()} className=\"label-file\">+</label>}\r\n                            </div>\r\n                            <span>{services.length} / 5</span>\r\n                        </div>\r\n                        <div className=\"divider\"></div>\r\n\r\n                        <div className={isFormOpened ? \"formWrapContainer active\" : \"formWrapContainer\"}>\r\n                            <div className=\"Prest-Step2-Section0\">\r\n                                <Title value=\"Type de service:\" type=\"h3\" font=\"roboto-medium\" align=\"left\" />\r\n                                <div className=\"Prest-Step2-Section0_serviceType\">\r\n                                    <Title onClick={() => setIsVariations(false)} customClass={!isVariations && \"active\"} value=\"Service simple\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                    <Title onClick={() => { newService.variations.length === 0 && setNewService({ ...newService, variations: [{ name: \"\", price: 0 }] }); setIsVariations(true) }} customClass={isVariations && \"active\"} value=\"Service variable\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className={`Prest-Step2-Section1 ${isVariations ? \"noFlex\" : \"\"}`}>\r\n                                <div className=\"left\">\r\n                                    <Title value=\"Intitulé du service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                    <p>Le nom de votre offre, par exemple : x5 fleurs de décorations de table</p>\r\n                                    <div className=\"formField withoutMargin\">\r\n                                        <input\r\n                                            className={`${error.type === \"name\" ? \"invalid\" : \"\"}`}\r\n                                            id=\"serviceName\"\r\n                                            type=\"text\"\r\n                                            value={newService.name}\r\n                                            onChange={(e) => (setError({ type: \"\", message: \"\" }), setNewService({ ...newService, name: e.target.value }))}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                {!isVariations &&\r\n                                    <div className=\"right\">\r\n                                        <Title value=\"Prix de votre service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                        <div className=\"formField withoutMargin\">\r\n                                            <NumericInput\r\n                                                format={euroFormat}\r\n                                                className=\"form-control\"\r\n                                                value={newService.price}\r\n                                                min={20}\r\n                                                max={1000}\r\n                                                step={1}\r\n                                                precision={0}\r\n                                                size={9}\r\n                                                mobile\r\n                                                onChange={(value) => (setError({ type: \"\", message: \"\" }), setNewService({ ...newService, price: value }))}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n\r\n                            {\r\n                                seller.category === \"nourriture\" &&\r\n                                <div className=\"Prest-Step2-Section1bis\">\r\n                                    <Title value=\"Régime alimentaire\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                    {/* <FormGroup style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                                    <FormControlLabel onChange={(e) => handleFoodTypeChanged(e, \"Vegan\")} control={<Checkbox />} label=\"Vegan\" />\r\n                                    <FormControlLabel onChange={(e) => handleFoodTypeChanged(e, \"Casher\")} control={<Checkbox />} label=\"Casher\" />\r\n                                    <FormControlLabel onChange={(e) => handleFoodTypeChanged(e, \"Halal\")} control={<Checkbox />} label=\"Halal\" />\r\n                                    <FormControlLabel onChange={(e) => handleFoodTypeChanged(e, \"Vegetarien\")} control={<Checkbox />} label=\"Végétarien\" />\r\n                                </FormGroup>  */}\r\n                                    <RadioGroup\r\n                                        row\r\n                                        aria-label=\"gender\"\r\n                                        name=\"row-radio-buttons-group\"\r\n                                        onChange={handleFoodTypeChanged}\r\n                                        value={newService.foodType !== undefined ? newService.foodType : \"Aucun\"}\r\n                                    >\r\n                                        <FormControlLabel value=\"Vegan\" control={<Radio />} label=\"Vegan\" />\r\n                                        <FormControlLabel value=\"Casher\" control={<Radio />} label=\"Casher\" />\r\n                                        <FormControlLabel value=\"Halal\" control={<Radio />} label=\"Halal\" />\r\n                                        <FormControlLabel value=\"Vegetarien\" control={<Radio />} label=\"Végétarien\" />\r\n                                        <FormControlLabel value=\"Aucun\" control={<Radio />} label=\"Aucun\" />\r\n                                    </RadioGroup>\r\n                                </div>\r\n\r\n                            }\r\n\r\n                            <div className=\"Prest-Step2-Section2\">\r\n                                <Title value=\"Description de votre service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                <p>Décrivez au mieux le service que vous proposez au travers de cette offre.</p>\r\n                                <textarea\r\n                                    value={newService.description}\r\n                                    onChange={(e) => setNewService({ ...newService, description: e.target.value })}\r\n                                    className={`${error.type === \"description\" && \"invalid\"}`}\r\n                                >\r\n                                </textarea>\r\n                            </div>\r\n\r\n                            {isVariations &&\r\n                                <div className=\"Prest-Step2-Section2bis\">\r\n                                    <Title value=\"Création des déclinaisons\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                    <div className=\"Prest-Step2-Section2bis_variations\">\r\n                                        {newService.variations.map((variation, key) => {\r\n                                            return <>\r\n                                                <div className=\"variation_header\">\r\n                                                    <Title value={`Variation ${key}`} type=\"h3\" font=\"roboto-medium\" align=\"left\" />\r\n                                                    <IconButton\r\n                                                        onClick={() => { setCurrentDeletingVariation(key); setIsPopupConfirmDeleteOpened(true) }}\r\n                                                        color=\"error\"\r\n                                                        aria-label=\"delete\"\r\n                                                    >\r\n                                                        <DeleteIcon />\r\n                                                    </IconButton>\r\n                                                    {(isPopupConfirmDeleteOpened && currentDeletingVariation === key) &&\r\n                                                        <BoxConfirm\r\n                                                            type=\"delete\"\r\n                                                            position=\"bottom\"\r\n                                                            callback={() => handleDeleteVariation(key)}\r\n                                                            callbackClose={() => { setCurrentDeletingVariation(-1); setIsPopupConfirmDeleteOpened(false) }}\r\n                                                        />\r\n                                                    }\r\n                                                </div>\r\n                                                <div className=\"Prest-Step2-Section2bis_variation_item\"><div className=\"left\">\r\n                                                    <Title value=\"Intitulé de la variation\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                                    <p>Le nom de votre variation, par exemple : 6 parts/6 personnes</p>\r\n                                                    <div className=\"formField withoutMargin\">\r\n                                                        <input\r\n                                                            className={error.type === \"name\" && \"invalid\"}\r\n                                                            id=\"serviceName\"\r\n                                                            type=\"text\"\r\n                                                            value={newService.variations[key].name}\r\n                                                            onChange={(e) => handleVariationChanged(\"name\", e.target.value, key)}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                                    <div className=\"right\">\r\n                                                        <Title value=\"Prix de la variation\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                                        <div className=\"formField withoutMargin\">\r\n                                                            <NumericInput\r\n                                                                format={euroFormat}\r\n                                                                className=\"form-control\"\r\n                                                                value={newService.variations[key].price}\r\n                                                                min={20}\r\n                                                                max={1000}\r\n                                                                step={1}\r\n                                                                precision={0}\r\n                                                                size={9}\r\n                                                                mobile\r\n                                                                onChange={(value) => handleVariationChanged(\"price\", value, key)}\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </>\r\n                                        })}\r\n                                    </div>\r\n                                    <ButtonSmall\r\n                                        onClick={() => setNewService({ ...newService, variations: [...newService.variations, { name: \"\", price: 0 }] })}\r\n                                        color=\"blue\"\r\n                                        value=\"Ajouter une variation\"\r\n                                        marginTop=\"20px\"\r\n                                        classname=\"flex\"\r\n                                        iconMUIStart={<AddIcon />}\r\n                                    />\r\n                                </div>\r\n                            }\r\n\r\n                            <div className=\"Prest-Step2-Section3\">\r\n                                <Title value=\"Photos du service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                {(error.type === \"imageSize\" || error.type === \"imageType\" || error.type === \"noPictures\") && <p className=\"errorMessage\">{error.message}</p>}\r\n                                <p>Plusieurs photos peuvent être utiles pour le client, cela lui permettra de voir votre service plus en détail.</p>\r\n                                <div className=\"servicesListeContainer\">\r\n                                    {newService.images.map((item, key) =>\r\n                                        <div onClick={() => handleDeletePicture(item.localURL || item.url)} style={{ position: \"relative\" }}>\r\n                                            <Image url={item.localURL || item.url} /><FaTrashAlt color={\"white\"} size={32} />\r\n                                        </div>\r\n                                    )}\r\n                                    {newService.images.length < 4 && <label for=\"file\" className=\"label-file\">+</label>}\r\n                                </div>\r\n\r\n                                <input accept=\"image/jpeg, image/jpg, image/png, application/pdf\" id=\"file\" className=\"input-file\" type=\"file\" onChange={(e) => handleChange(e)} />\r\n                                <div className=\"Prest-Step2-Section3-bottom\">\r\n                                    <p>2Mo max par photo</p>\r\n                                    <p>Type de fichiers acceptés : jpeg, jpg, png ou PDF</p>\r\n                                </div>\r\n                                <div className=\"buttonSaveOffer\">\r\n                                    {error.type === \"maxServices\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                    {error.type === \"name\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                    {error.type === \"description\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                    <ButtonSmall\r\n                                        onClick={() => setIsPopupConfirmSaveOpened(true)}\r\n                                        color=\"green\"\r\n                                        value=\"Sauvergarder cette offre\"\r\n                                        marginTop=\"20px\"\r\n                                    />\r\n                                    {isPopupConfirmSaveOpened &&\r\n                                        <BoxConfirm\r\n                                            type=\"save\"\r\n                                            position=\"top\"\r\n                                            callback={() => handleAddService()}\r\n                                            callbackClose={() => setIsPopupConfirmSaveOpened(false)}\r\n                                        />\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"divider\"></div>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"Prest-Step2-Section4\">\r\n                            <Title value=\"Une fois terminé, passez à l’étape suivante\" type=\"h2\" font=\"roboto-medium\" align=\"right\" />\r\n                            <p>Vos services pourront être modifiés sur votre tableau de bord plus tard.</p>\r\n                            <ButtonLarge\r\n                                onClick={() => handleFormSend()}\r\n                                color=\"orange\"\r\n                                width=\"400px\"\r\n                                value={buttonLoading ? <ReactLoading className=\"loadingSpinnerButton\" type=\"spin\" color=\"white\" height={23} width={23} /> : \"Passer à l'étape suivante\"}\r\n                            />\r\n                        </div>\r\n\r\n                        {error.type === \"serviceSize\" && <p className=\"PrestErrorMessage\">{error.message}</p>}\r\n                    </div>\r\n                </CSSTransition>\r\n            </Layout>\r\n\r\n            <CSSTransition\r\n                in={isServiceAddedCorrectly}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"serviceAddedMessage\">\r\n                    <p>Annonce sauvegardée avec succès</p>\r\n                </div>\r\n            </CSSTransition>\r\n        </>\r\n    )\r\n}\r\nexport default Prest_Step2;\r\n"]},"metadata":{},"sourceType":"module"}