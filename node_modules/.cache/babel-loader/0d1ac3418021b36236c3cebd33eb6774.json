{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Home\\\\Desktop\\\\Boulot\\\\Nivid\\\\src\\\\components\\\\Prest_Dashboard_Commandes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/userContext';\nimport { CSSTransition } from 'react-transition-group';\nimport Loader from './Loader';\nimport ModalYesNo from './utilities/ModalYesNo';\nimport Title from './utilities/Title';\nimport SubTitle from './utilities/SubTitle';\nimport { ButtonSmall } from './utilities/Buttons';\nimport Image from '../components/utilities/Image';\nimport PrintIcon from '@mui/icons-material/Print';\nimport { FaChevronDown } from 'react-icons/fa';\nimport IconButton from '@mui/material/IconButton';\nimport Fade from '@mui/material/Fade';\n\nconst Prest_Dashboard_Commandes = () => {\n  _s();\n\n  const {\n    seller,\n    getSalesOfSellerIdFromDB,\n    formateToDateWithWords,\n    formateToDate,\n    formatLabelTimePicker,\n    updateSaleStatusInDB,\n    updateSaleNote,\n    sendInBlue_sendBillRequestToAdmin\n  } = useAuth();\n  const [openedEvent, setOpenedEvent] = useState(\"\");\n  const [sales, setSales] = useState([]);\n  const [noteObj, setNoteObj] = useState({\n    saleID: 0,\n    message: \"\"\n  });\n  const [isModalOpened, setIsModalOpened] = useState(false);\n  const [currentKey, setCurrentKey] = useState();\n  const [filterStatus, setFilterStatus] = useState(\"\");\n  const [filterYear, setFilterYear] = useState(0);\n  const [isBillEmailSent, setIsBillEmailSent] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n  useEffect(() => {\n    getSales().then(() => {\n      console.log(sales);\n      setIsMounted(true);\n    });\n  }, []);\n\n  async function getSales() {\n    const salesList = await getSalesOfSellerIdFromDB(seller.uid);\n    return setSales(salesList);\n  }\n\n  async function handleActionSale(key, status) {\n    if (status === \"rejected\") {\n      setIsModalOpened(true);\n      setCurrentKey(key);\n      return;\n    } else {\n      let sale = sales.filter(sale => sale.id === key);\n      sale[0].status = status;\n      let newSales = sales.filter(sale => sale.id !== key);\n      newSales = [...newSales, sale[0]];\n      await updateSaleStatusInDB(sale[0].id, sale[0].sellerID, status);\n      return setSales(newSales);\n    }\n  }\n\n  async function handleModalYesNoReturn(val) {\n    setIsModalOpened(false);\n    if (val === \"no\") return;\n    let sale = sales.filter(sale => sale.id === currentKey);\n    sale[0].status = \"rejected\";\n    let newSales = sales.filter(sale => sale.id !== currentKey);\n    newSales = [...newSales, sale[0]];\n    await updateSaleStatusInDB(sale[0].id, sale[0].sellerID, \"rejected\");\n    return setSales(newSales);\n  }\n\n  function handleChangeNote(saleID, value) {\n    setNoteObj({\n      saleID,\n      message: value\n    });\n  }\n\n  async function handleSaveNote(eventID) {\n    let newSale;\n    let newSaleList = [...sales];\n    sales.forEach((sale, key) => {\n      if (sale.eventID === eventID) {\n        newSale = sale;\n        newSale.note = noteObj.message;\n        newSaleList[key] = newSale;\n      }\n    });\n    await updateSaleNote(noteObj.saleID, noteObj.message);\n    setSales(newSaleList);\n    return;\n  }\n\n  function handleOpeningSale(key) {\n    if (openedEvent === key) {\n      setOpenedEvent(\"\");\n      setNoteObj({\n        saleID: 0,\n        message: \"\"\n      });\n    } else {\n      setOpenedEvent(key);\n      let newSale = {};\n      sales.forEach(sale => {\n        if (sale.id === key) {\n          newSale = sale;\n        }\n      });\n      setNoteObj({\n        saleID: key,\n        message: newSale.note\n      });\n    }\n  }\n\n  function getStartYearMinus(val) {\n    let yearWanted = new Date(new Date().setFullYear(new Date().getFullYear() - val));\n    yearWanted = yearWanted.getFullYear();\n    const dateWanted = new Date(yearWanted, 0, 1);\n    return dateWanted.getTime();\n  }\n\n  function getEndYearMinus(val) {\n    let yearWanted = new Date(new Date().setFullYear(new Date().getFullYear() - val));\n    yearWanted = yearWanted.getFullYear();\n    const dateWanted = new Date(yearWanted, 12, 31);\n    return dateWanted.getTime();\n  }\n\n  function handlePrintClicked(transcationID, sellerID) {\n    sendInBlue_sendBillRequestToAdmin(transcationID, sellerID).then(res => {\n      if (res === true) {\n        setIsBillEmailSent(true);\n        setTimeout(() => {\n          setIsBillEmailSent(false);\n        }, 2000);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: !isMounted,\n      timeout: 300,\n      classNames: \"pageTransition\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: isMounted,\n      timeout: 300,\n      classNames: \"pageTransition\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"prest_Dashboard_Commandes\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"prest_dashboard_header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(SubTitle, {\n              type: \"big\",\n              font: \"roboto-bold\",\n              value: \"Commandes re\\xE7ues\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Vos commandes r\\xE9centes s'afficheront ici, ne s'afficherint que celle de l'ann\\xE9e en cours.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 121\n              }, this), \"Si vous avez besoin de voit vos commandes archiv\\xE9es, vous pourrez y acc\\xE9der en filtrant les commandes \\xE0 afficher dans la liste ci-dessous.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"prest_dashboard_commandes_list\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prest_dashboard_commandes_list__header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Filtrer par:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"filterBloc\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"filterField year\",\n                  children: [\"Ann\\xE9e \", /*#__PURE__*/_jsxDEV(FaChevronDown, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 77\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"filterOptions year\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterYear(0),\n                    children: new Date().getFullYear()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterYear(1),\n                    children: new Date().getFullYear() - 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterYear(2),\n                    children: new Date().getFullYear() - 2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterYear(3),\n                    children: new Date().getFullYear() - 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"filterBloc\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"filterField year\",\n                  children: [\"Statut \", /*#__PURE__*/_jsxDEV(FaChevronDown, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 78\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"filterOptions year\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterStatus(\"\"),\n                    children: \"Tous\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterStatus(\"validated\"),\n                    children: \"Valid\\xE9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterStatus(\"rejected\"),\n                    children: \"Rejet\\xE9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => setFilterStatus(\"pending\"),\n                    children: \"En attente\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), sales.filter(sale => sale.date > getStartYearMinus(filterYear) && sale.date < getEndYearMinus(filterYear)).filter(sale => filterStatus.length > 0 ? sale.status === filterStatus : sale.status.length > 0).sort((a, b) => b.date - a.date).map((sale, key) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prest_dashboard_commandes_list__item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item__header\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"commandTitle\",\n                children: [\"Commande #\", sale.id, \" - \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: formateToDate(sale.date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 91\n                }, this), sale.status === \"validated\" &&\n                /*#__PURE__*/\n                // Traitement à changer, je lemet comme ça pour qu'il soit visible \n                // de Léo, mais ensuite on devra ne l'afficher que sur c'est à \"passed\"\n                _jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handlePrintClicked(sale.transactionID, sale.sellerID),\n                    \"aria-label\": \"bill\",\n                    children: /*#__PURE__*/_jsxDEV(PrintIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(Fade, {\n                    in: isBillEmailSent,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"confirmBox_print\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"Votre demande de facture a bien \\xE9t\\xE9 prise en compte, vous recevrez un mail d'ici peu.\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 216,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"blueLink\",\n                onClick: () => handleOpeningSale(sale.id),\n                children: openedEvent === sale.id ? \"Fermer les détails de la commande\" : \"Voir les détails de la commande\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"commandTitle\",\n                children: [\"Montant de la commande : \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [sale.total, \"\\u20AC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 94\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item__content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `item__content__left imagesSuperpos ${openedEvent === sale.id && \"closed\"}`,\n                children: sale.choosedServices.slice(0, 3).map(service => /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Image, {\n                    url: service.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 54\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `item__content__right ${sale.status}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date de l'\\xE9v\\xE8nement :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: formateToDateWithWords(sale.eventDate)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Nombre de personne :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [sale.people, \" personnes\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Cr\\xE9neau :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Commence \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatLabelTimePicker(sale.startAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 63\n                    }, this), \" & se termine \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatLabelTimePicker(sale.endAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 129\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Nombre de m\\xB2 :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [sale.placeSize, \"m\\xB2\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: openedEvent === sale.id ? \"item__details active\" : \"item__details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item__details__services__list\",\n                children: sale.choosedServices.map((service, key) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item__details__services__item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"services__item__left\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: service.image,\n                        alt: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"services__item__right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: service.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"price\",\n                        children: [service.price, \"\\u20AC\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"quantity\",\n                        children: [\"x\", service.quantity]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 269,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 53\n                  }, this)]\n                }, key, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item__details__note\",\n                children: [/*#__PURE__*/_jsxDEV(Title, {\n                  type: \"h2\",\n                  font: \"roboto-bold\",\n                  value: \"Ajouter une note pense-b\\xEAte\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Si vous avez besoin de noter quelque chose \\xE0 ne pas oublier concernant cette commande, c'est ici.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: noteObj.message,\n                  onChange: e => handleChangeNote(sale.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 45\n                }, this), noteObj.message !== sale.note && /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                  onClick: () => handleSaveNote(sale.eventID),\n                  color: \"blue\",\n                  value: \"Sauvegarder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 79\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item__bottom\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item__bottom__left\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Reste \\xE0 payer \\xE0 charge du client : \", sale.paid !== sale.total ? sale.total * 0.7 : 0, \"\\u20AC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Ce montant sera r\\xE9gl\\xE9 2 jours avant le d\\xE9but de l'\\xE9v\\xE8nement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n                in: sale.status !== \"pending\",\n                timeout: 0,\n                classNames: \"opacityTransition\",\n                unmountOnExit: true,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item__bottom__center\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: sale.status,\n                    children: [\"Statut : \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: sale.status === \"validated\" ? \"Validé\" : \"Refusé\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 62\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 41\n              }, this), sale.status === \"pending\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item__bottom__right\",\n                children: [/*#__PURE__*/_jsxDEV(ButtonSmall, {\n                  onClick: () => handleActionSale(sale.id, \"rejected\"),\n                  color: \"red\",\n                  value: \"Refuser la commande\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                  onClick: () => handleActionSale(sale.id, \"validated\"),\n                  color: \"green\",\n                  value: \"Accepter la commande\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n                in: sale.status === \"validated\",\n                timeout: 200,\n                classNames: \"fromLeftTransition\",\n                unmountOnExit: true,\n                children: /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                  onClick: () => handleActionSale(sale.id, \"rejected\"),\n                  color: \"red\",\n                  value: \"Annuler la commmande\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n              in: isModalOpened,\n              timeout: 200,\n              classNames: \"pageTransition\",\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(ModalYesNo, {\n                callback: val => handleModalYesNoReturn(val),\n                value: \"L'annulation d'une commande est irr\\xE9versible.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 37\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 33\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Prest_Dashboard_Commandes, \"kSQGRCnDr8K6RT4QtdE3GeBmlmU=\", false, function () {\n  return [useAuth];\n});\n\n_c = Prest_Dashboard_Commandes;\nexport default Prest_Dashboard_Commandes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Prest_Dashboard_Commandes\");","map":{"version":3,"sources":["C:/Users/Home/Desktop/Boulot/Nivid/src/components/Prest_Dashboard_Commandes.js"],"names":["React","useState","useEffect","useAuth","CSSTransition","Loader","ModalYesNo","Title","SubTitle","ButtonSmall","Image","PrintIcon","FaChevronDown","IconButton","Fade","Prest_Dashboard_Commandes","seller","getSalesOfSellerIdFromDB","formateToDateWithWords","formateToDate","formatLabelTimePicker","updateSaleStatusInDB","updateSaleNote","sendInBlue_sendBillRequestToAdmin","openedEvent","setOpenedEvent","sales","setSales","noteObj","setNoteObj","saleID","message","isModalOpened","setIsModalOpened","currentKey","setCurrentKey","filterStatus","setFilterStatus","filterYear","setFilterYear","isBillEmailSent","setIsBillEmailSent","isMounted","setIsMounted","getSales","then","console","log","salesList","uid","handleActionSale","key","status","sale","filter","id","newSales","sellerID","handleModalYesNoReturn","val","handleChangeNote","value","handleSaveNote","eventID","newSale","newSaleList","forEach","note","handleOpeningSale","getStartYearMinus","yearWanted","Date","setFullYear","getFullYear","dateWanted","getTime","getEndYearMinus","handlePrintClicked","transcationID","res","setTimeout","date","length","sort","a","b","map","transactionID","total","choosedServices","slice","service","image","eventDate","people","startAt","endAt","placeSize","name","price","quantity","e","target","paid"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '../context/userContext'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nimport Loader from './Loader'\r\nimport ModalYesNo from './utilities/ModalYesNo'\r\n\r\nimport Title from './utilities/Title'\r\nimport SubTitle from './utilities/SubTitle'\r\nimport { ButtonSmall } from './utilities/Buttons'\r\nimport Image from '../components/utilities/Image'\r\nimport PrintIcon from '@mui/icons-material/Print';\r\nimport { FaChevronDown } from 'react-icons/fa';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\nimport Fade from '@mui/material/Fade';\r\n\r\nconst Prest_Dashboard_Commandes = () => {\r\n\r\n    const {\r\n        seller,\r\n        getSalesOfSellerIdFromDB,\r\n        formateToDateWithWords,\r\n        formateToDate,\r\n        formatLabelTimePicker,\r\n        updateSaleStatusInDB,\r\n        updateSaleNote,\r\n        sendInBlue_sendBillRequestToAdmin\r\n    } = useAuth()\r\n\r\n    const [openedEvent, setOpenedEvent] = useState(\"\")\r\n    const [sales, setSales] = useState([]);\r\n    const [noteObj, setNoteObj] = useState({ saleID: 0, message: \"\" });\r\n    const [isModalOpened, setIsModalOpened] = useState(false);\r\n    const [currentKey, setCurrentKey] = useState();\r\n\r\n    const [filterStatus, setFilterStatus] = useState(\"\");\r\n    const [filterYear, setFilterYear] = useState(0);\r\n\r\n    const [isBillEmailSent, setIsBillEmailSent] = useState(false);\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        getSales().then(() => {\r\n            console.log(sales)\r\n            setIsMounted(true)\r\n        })\r\n    }, [])\r\n\r\n    async function getSales() {\r\n        const salesList = await getSalesOfSellerIdFromDB(seller.uid)\r\n        return setSales(salesList)\r\n    }\r\n\r\n    async function handleActionSale(key, status) {\r\n        if (status === \"rejected\") {\r\n            setIsModalOpened(true)\r\n            setCurrentKey(key)\r\n            return\r\n        }\r\n        else {\r\n            let sale = sales.filter(sale => sale.id === key)\r\n            sale[0].status = status\r\n            let newSales = sales.filter(sale => sale.id !== key)\r\n            newSales = [...newSales, sale[0]]\r\n            await updateSaleStatusInDB(sale[0].id, sale[0].sellerID, status)\r\n            return setSales(newSales)\r\n        }\r\n\r\n    }\r\n\r\n    async function handleModalYesNoReturn(val) {\r\n        setIsModalOpened(false)\r\n        if (val === \"no\") return\r\n\r\n        let sale = sales.filter(sale => sale.id === currentKey)\r\n        sale[0].status = \"rejected\"\r\n        let newSales = sales.filter(sale => sale.id !== currentKey)\r\n        newSales = [...newSales, sale[0]]\r\n        await updateSaleStatusInDB(sale[0].id, sale[0].sellerID, \"rejected\")\r\n        return setSales(newSales)\r\n    }\r\n\r\n    function handleChangeNote(saleID, value) {\r\n        setNoteObj({ saleID, message: value })\r\n    }\r\n\r\n    async function handleSaveNote(eventID) {\r\n        let newSale\r\n        let newSaleList = [...sales]\r\n        sales.forEach((sale, key) => {\r\n            if (sale.eventID === eventID) {\r\n                newSale = sale\r\n                newSale.note = noteObj.message\r\n                newSaleList[key] = newSale\r\n            }\r\n        })\r\n        await updateSaleNote(noteObj.saleID, noteObj.message)\r\n        setSales(newSaleList)\r\n        return\r\n    }\r\n\r\n    function handleOpeningSale(key) {\r\n        if (openedEvent === key) {\r\n            setOpenedEvent(\"\")\r\n            setNoteObj({ saleID: 0, message: \"\" })\r\n        } else {\r\n            setOpenedEvent(key)\r\n            let newSale = {}\r\n            sales.forEach(sale => {\r\n                if (sale.id === key) {\r\n                    newSale = sale\r\n                }\r\n            })\r\n            setNoteObj({ saleID: key, message: newSale.note })\r\n        }\r\n    }\r\n\r\n    function getStartYearMinus(val) {\r\n        let yearWanted = new Date(new Date().setFullYear(new Date().getFullYear() - val))\r\n        yearWanted = yearWanted.getFullYear()\r\n        const dateWanted = new Date(yearWanted, 0, 1)\r\n        return dateWanted.getTime()\r\n    }\r\n\r\n    function getEndYearMinus(val) {\r\n        let yearWanted = new Date(new Date().setFullYear(new Date().getFullYear() - val))\r\n        yearWanted = yearWanted.getFullYear()\r\n        const dateWanted = new Date(yearWanted, 12, 31)\r\n        return dateWanted.getTime()\r\n    }\r\n\r\n    function handlePrintClicked(transcationID, sellerID) {\r\n        sendInBlue_sendBillRequestToAdmin(transcationID, sellerID).then(res => {\r\n            if (res === true) {\r\n                setIsBillEmailSent(true)\r\n                setTimeout(() => {\r\n                    setIsBillEmailSent(false)\r\n                }, 2000)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CSSTransition\r\n                in={!isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <Loader />\r\n            </CSSTransition>\r\n\r\n            <CSSTransition\r\n                in={isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"prest_Dashboard_Commandes\">\r\n\r\n                    <section className=\"prest_dashboard_header\">\r\n                        <div>\r\n                            <SubTitle type=\"big\" font=\"roboto-bold\" value=\"Commandes reçues\" />\r\n                            <p>Vos commandes récentes s'afficheront ici, ne s'afficherint que celle de l'année en cours.<br />\r\n                                Si vous avez besoin de voit vos commandes archivées, vous pourrez y accéder en filtrant\r\n                                les commandes à afficher dans la liste ci-dessous.</p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"prest_dashboard_commandes_list\">\r\n                        <div className=\"prest_dashboard_commandes_list__header\">\r\n                            <div>\r\n                                <label>Filtrer par:</label>\r\n                                <div className=\"filterBloc\">\r\n                                    <div className=\"filterField year\">Année <FaChevronDown /></div>\r\n                                    <div className=\"filterOptions year\">\r\n                                        <div onClick={() => setFilterYear(0)}>{new Date().getFullYear()}</div>\r\n                                        <div onClick={() => setFilterYear(1)}>{new Date().getFullYear() - 1}</div>\r\n                                        <div onClick={() => setFilterYear(2)}>{new Date().getFullYear() - 2}</div>\r\n                                        <div onClick={() => setFilterYear(3)}>{new Date().getFullYear() - 3}</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"filterBloc\">\r\n                                    <div className=\"filterField year\">Statut <FaChevronDown /></div>\r\n                                    <div className=\"filterOptions year\">\r\n                                        <div onClick={() => setFilterStatus(\"\")}>Tous</div>\r\n                                        <div onClick={() => setFilterStatus(\"validated\")}>Validé</div>\r\n                                        <div onClick={() => setFilterStatus(\"rejected\")}>Rejeté</div>\r\n                                        <div onClick={() => setFilterStatus(\"pending\")}>En attente</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {sales\r\n                            .filter(sale => sale.date > getStartYearMinus(filterYear) && sale.date < getEndYearMinus(filterYear))\r\n                            .filter(sale => (filterStatus.length > 0 ? sale.status === filterStatus : sale.status.length > 0))\r\n                            .sort((a, b) => b.date - a.date)\r\n                            .map((sale, key) =>\r\n                                <div key={key} className=\"prest_dashboard_commandes_list__item\">\r\n                                    <div className=\"item__header\">\r\n\r\n                                        <p className=\"commandTitle\">Commande #{sale.id} - <span>{formateToDate(sale.date)}</span>\r\n                                            {(sale.status === \"validated\") &&\r\n                                                // Traitement à changer, je lemet comme ça pour qu'il soit visible \r\n                                                // de Léo, mais ensuite on devra ne l'afficher que sur c'est à \"passed\"\r\n                                                <>\r\n                                                    <IconButton onClick={() => handlePrintClicked(sale.transactionID, sale.sellerID)} aria-label=\"bill\">\r\n                                                        <PrintIcon />\r\n                                                    </IconButton>\r\n                                                    <Fade in={isBillEmailSent}>\r\n                                                        <div className=\"confirmBox_print\">\r\n                                                            <p>Votre demande de facture a bien été prise en compte, vous recevrez un mail d'ici peu.</p>\r\n                                                        </div>\r\n                                                    </Fade>\r\n                                                </>\r\n                                            }\r\n                                        </p>\r\n                                        <p className=\"blueLink\" onClick={() => handleOpeningSale(sale.id)}>\r\n                                            {openedEvent === sale.id ? \"Fermer les détails de la commande\" : \"Voir les détails de la commande\"}\r\n                                        </p>\r\n                                        <p className=\"commandTitle\">Montant de la commande : <span>{sale.total}€</span></p>\r\n                                    </div>\r\n                                    <div className=\"item__content\">\r\n\r\n                                        <div className={`item__content__left imagesSuperpos ${openedEvent === sale.id && \"closed\"}`}>\r\n                                            {sale.choosedServices.slice(0, 3).map(service =>\r\n                                                <div><Image url={service.image} /></div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className={`item__content__right ${sale.status}`}>\r\n                                            <div>\r\n                                                <label>Date de l'évènement :</label>\r\n                                                <p>{formateToDateWithWords(sale.eventDate)}</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <label>Nombre de personne :</label>\r\n                                                <p>{sale.people} personnes</p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <label>Créneau :</label>\r\n                                                <p>Commence à <span>{formatLabelTimePicker(sale.startAt)}</span> & se termine à <span>{formatLabelTimePicker(sale.endAt)}</span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div>\r\n                                                <label>Nombre de m² :</label>\r\n                                                <p>{sale.placeSize}m²</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div\r\n                                        className={openedEvent === sale.id ? \"item__details active\" : \"item__details\"}\r\n                                    >\r\n                                        <div className=\"item__details__services__list\">\r\n                                            {sale.choosedServices.map((service, key) =>\r\n                                                <div key={key} className=\"item__details__services__item\">\r\n                                                    <div className=\"services__item__left\">\r\n                                                        <div>\r\n                                                            <img src={service.image} alt=\"\" />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"services__item__right\">\r\n                                                        <p>{service.name}</p>\r\n                                                        <div>\r\n                                                            <span className=\"price\">{service.price}€</span>\r\n                                                            <span className=\"quantity\">x{service.quantity}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"item__details__note\">\r\n                                            <Title type=\"h2\" font=\"roboto-bold\" value=\"Ajouter une note pense-bête\" />\r\n                                            <p>Si vous avez besoin de noter quelque chose à ne pas oublier concernant cette commande, c'est ici.</p>\r\n                                            <textarea value={noteObj.message} onChange={(e) => handleChangeNote(sale.id, e.target.value)}></textarea>\r\n                                            {noteObj.message !== sale.note && <ButtonSmall onClick={() => handleSaveNote(sale.eventID)} color=\"blue\" value=\"Sauvegarder\" />}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"item__bottom\">\r\n                                        <div className=\"item__bottom__left\">\r\n                                            <p>Reste à payer à charge du client : {sale.paid !== sale.total ? sale.total * 0.7 : 0}€</p>\r\n                                            <span>Ce montant sera réglé 2 jours avant le début de l'évènement</span>\r\n                                        </div>\r\n\r\n                                        <CSSTransition\r\n                                            in={sale.status !== \"pending\"}\r\n                                            timeout={0}\r\n                                            classNames=\"opacityTransition\"\r\n                                            unmountOnExit\r\n                                        >\r\n                                            <div className=\"item__bottom__center\">\r\n                                                <p className={sale.status}>\r\n                                                    Statut : <span>{sale.status === \"validated\" ? \"Validé\" : \"Refusé\"}</span>\r\n                                                </p>\r\n                                            </div>\r\n                                        </CSSTransition>\r\n                                        {sale.status === \"pending\" &&\r\n                                            <div className=\"item__bottom__right\">\r\n                                                <ButtonSmall onClick={() => handleActionSale(sale.id, \"rejected\")} color=\"red\" value=\"Refuser la commande\" />\r\n                                                <ButtonSmall onClick={() => handleActionSale(sale.id, \"validated\")} color=\"green\" value=\"Accepter la commande\" />\r\n                                            </div>\r\n                                        }\r\n\r\n                                        <CSSTransition\r\n                                            in={sale.status === \"validated\"}\r\n                                            timeout={200}\r\n                                            classNames=\"fromLeftTransition\"\r\n                                            unmountOnExit\r\n                                        >\r\n                                            <ButtonSmall onClick={() => handleActionSale(sale.id, \"rejected\")} color=\"red\" value=\"Annuler la commmande\" />\r\n                                        </CSSTransition>\r\n\r\n                                    </div>\r\n                                    <CSSTransition\r\n                                        in={isModalOpened}\r\n                                        timeout={200}\r\n                                        classNames=\"pageTransition\"\r\n                                        unmountOnExit\r\n                                    >\r\n                                        <ModalYesNo\r\n                                            callback={(val) => handleModalYesNoReturn(val)}\r\n                                            value=\"L'annulation d'une commande est irréversible.\"\r\n                                        />\r\n                                    </CSSTransition>\r\n                                </div>\r\n                            )}\r\n                    </section>\r\n                </div>\r\n            </CSSTransition>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Prest_Dashboard_Commandes"]},"metadata":{},"sourceType":"module"}