{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\My Project\\\\Leo\\\\Nivid\\\\src\\\\pages\\\\Prest_Step3.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles/Prest_.css\";\nimport { useHistory } from 'react-router-dom';\nimport { useAuth } from \"../context/userContext\"; // context\n\nimport { ButtonSmall, ButtonLarge } from '../components/utilities/Buttons';\nimport Layout from '../components/utilities/Layout';\nimport Title from '../components/utilities/Title';\nimport SubTitle from '../components/utilities/SubTitle';\nimport ReactLoading from 'react-loading';\nimport { useFirebase } from \"../assets/base-context\";\nimport { FaCheckCircle } from 'react-icons/fa';\nimport { CSSTransition } from 'react-transition-group';\n\nconst Prest_Step3 = () => {\n  _s();\n\n  const firebaseContext = useFirebase();\n  const storage = firebaseContext.storage();\n  const initialDocuments = {\n    kbis: \"\",\n    ci: \"\",\n    assurance: \"\",\n    sepa: \"\",\n    rib: \"\"\n  };\n  const [error, setError] = useState({\n    type: \"\",\n    message: \"\"\n  });\n  const [buttonLoading, setButtonLoading] = useState(false);\n  const [documents, setDocuments] = useState(initialDocuments);\n  const [isMounted, setIsMounted] = useState(false);\n  const {\n    seller,\n    setCurrentStepProcess,\n    addSellerDocuments,\n    getSellerDocumentsFromDB\n  } = useAuth(); // context\n\n  const history = useHistory(); // seller.status !== \"subscribing\" && history.push('/mon-compte-partenaire')\n\n  setCurrentStepProcess(3);\n  useEffect(() => {\n    function getCurrentDocumentsFromDB() {\n      getSellerDocumentsFromDB().then(data => {\n        if (data === null) {\n          setDocuments(initialDocuments);\n        } else {\n          setDocuments(data);\n        }\n      });\n    }\n\n    getCurrentDocumentsFromDB();\n    setIsMounted(true);\n  }, []);\n\n  function handleInputChange(e, docType) {\n    const type = e.target.files[0].type;\n    const size = e.target.files[0].size;\n\n    if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\" && type !== \"application/pdf\") {\n      setError({\n        type: docType,\n        message: \"Votre fichier n'est ni une image jpeg, jpg, png ou PDF.\"\n      });\n    } else if (size > 2000000) {\n      setError({\n        type: docType,\n        message: \"Votre image fait plus de 2Mo.\"\n      });\n    } else {\n      e.target.files[0].docType = docType;\n      docType === \"kbis\" ? setDocuments({ ...documents,\n        kbis: e.target.files[0]\n      }) : docType === \"ci\" ? setDocuments({ ...documents,\n        ci: e.target.files[0]\n      }) : docType === \"assurance\" && setDocuments({ ...documents,\n        assurance: e.target.files[0]\n      });\n      setError({\n        type: \"\",\n        message: \"\"\n      });\n    }\n  }\n\n  async function handleSendForm() {\n    setButtonLoading(true);\n\n    if (documents.kbis.name && documents.ci.name && documents.assurance.name) {\n      let documentsUrlArray = { ...documents\n      };\n\n      for (const doc in documents) {\n        if (documents[doc].lastModified) {\n          const token = `${documents[doc].docType}-${Math.random().toString(36).substr(2, 19)}`;\n          const url = await handleUploadFile(documents[doc], token);\n          documentsUrlArray[documents[doc].docType] = {\n            url: url,\n            token: token,\n            name: documents[doc].name\n          };\n        }\n      }\n\n      const modifiedFiles = Object.values(documents).filter(doc => doc.lastModified !== undefined);\n      modifiedFiles.length > 0 && (await addSellerDocuments(documentsUrlArray));\n      history.push('/mon-compte-partenaire/process/verification-2');\n    } else {\n      setError({\n        type: \"docCount\",\n        message: \"Il manque des documents. Le Kbis, la carte d'identité, et l'assurance de responsabilité civile, sont obligatoires.\"\n      });\n      setButtonLoading(false);\n    }\n  }\n\n  function handleUploadFile(image, token) {\n    return new Promise((resolve, reject) => {\n      const upload = storage.ref(`sellers/${token}`).put(image);\n      upload.on(\"state_changed\", snapshot => {}, error => {\n        console.log(error);\n      }, () => {\n        storage.ref(\"sellers\").child(token).getDownloadURL().then(url => {\n          resolve(url);\n        }).catch(error => {\n          console.error(error);\n          reject(error);\n        });\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: isMounted,\n      timeout: 300,\n      classNames: \"pageTransition\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"layoutDocumentPrest\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Prest-Step3-Header\",\n          children: [/*#__PURE__*/_jsxDEV(SubTitle, {\n            value: \"V\\xE9rification documents\",\n            type: \"big\",\n            font: \"roboto-medium\",\n            align: \"left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Sur cette page vous allez devoir nous transmettre vos documents, pour que nous puissions v\\xE9rifier votre activit\\xE9.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Merci de bien les v\\xE9rifier avant envoi, il ne peut y avoir de modifications possibles.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Prest-Step3-Section1\",\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            value: \"KBIS actualis\\xE9 ou relev\\xE9 Siren\",\n            type: \"h2\",\n            font: \"roboto-medium\",\n            align: \"left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), error.type === \"kbis\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorMessage\",\n            children: error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 51\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Evitez les photos floues ou trop sombres.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"fileKbis\",\n            className: \"input-file\",\n            type: \"file\",\n            onChange: e => handleInputChange(e, \"kbis\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fileConditions\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"2Mo max\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Type de fichiers accept\\xE9s : jpeg, jpg, png ou PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), documents.kbis.status && documents.kbis.status === \"validated\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"validMessage\",\n            children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n              style: {\n                marginRight: \"5px\"\n              },\n              size: \"25\",\n              color: \"rgb(120, 213, 152)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 61\n            }, this), \"Votre document a \\xE9t\\xE9 accept\\xE9\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [documents.kbis.status && documents.kbis.status === \"rejected\" && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"errorMessage\",\n              children: \"Votre document a \\xE9t\\xE9 refus\\xE9.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n              onClick: () => document.getElementById('fileKbis').click(),\n              color: \"blue\",\n              value: \"Charger le document\",\n              marginTop: \"15px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 37\n            }, this), documents.kbis && documents.kbis.status !== \"rejected\" && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fileNameOnRight\",\n              children: documents.kbis.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 98\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Prest-Step3-Section2\",\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            value: \"Carte d'identit\\xE9 du g\\xE9rant\",\n            type: \"h2\",\n            font: \"roboto-medium\",\n            align: \"left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), error.type === \"ci\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorMessage\",\n            children: error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Evitez les photos floues ou trop sombres.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Merci de nous fournir un document avec le recto et le verso de votre carte d'identit\\xE9.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"fileCi\",\n            className: \"input-file\",\n            type: \"file\",\n            onChange: e => handleInputChange(e, \"ci\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fileConditions\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"2Mo max\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Type de fichiers accept\\xE9s : jpeg, jpg, png ou PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), documents.ci.status && documents.ci.status === \"validated\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"validMessage\",\n            children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n              style: {\n                marginRight: \"5px\"\n              },\n              size: \"25\",\n              color: \"rgb(120, 213, 152)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 61\n            }, this), \"Votre document a \\xE9t\\xE9 accept\\xE9\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [documents.ci.status && documents.ci.status === \"rejected\" && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"errorMessage\",\n              children: \"Votre document a \\xE9t\\xE9 refus\\xE9.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n              onClick: () => document.getElementById('fileCi').click(),\n              color: \"blue\",\n              value: \"Charger le document\",\n              marginTop: \"15px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 37\n            }, this), documents.ci && documents.ci.status !== \"rejected\" && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fileNameOnRight\",\n              children: documents.ci.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 94\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Prest-Step3-Section4\",\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            value: \"Assurance responsabilit\\xE9 civile professionnelle\",\n            type: \"h2\",\n            font: \"roboto-medium\",\n            align: \"left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this), error.type === \"assurance\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorMessage\",\n            children: error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 56\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Evitez les photos floues ou trop sombres.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"fileAssurance\",\n            className: \"input-file\",\n            type: \"file\",\n            onChange: e => handleInputChange(e, \"assurance\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fileConditions\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"2Mo max\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Type de fichiers accept\\xE9s : jpeg, jpg, png ou PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), documents.assurance.status && documents.assurance.status === \"validated\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"validMessage\",\n            children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n              style: {\n                marginRight: \"5px\"\n              },\n              size: \"25\",\n              color: \"rgb(120, 213, 152)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 61\n            }, this), \"Votre document a \\xE9t\\xE9 accept\\xE9\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [documents.assurance.status && documents.assurance.status === \"rejected\" && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"errorMessage\",\n              children: \"Votre document a \\xE9t\\xE9 refus\\xE9.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(ButtonSmall, {\n              onClick: () => document.getElementById('fileAssurance').click(),\n              color: \"blue\",\n              value: \"Charger le document\",\n              marginTop: \"15px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 37\n            }, this), documents.assurance && documents.assurance.status !== \"rejected\" && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fileNameOnRight\",\n              children: documents.assurance.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 108\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Prest-Step3-Section3\",\n          children: /*#__PURE__*/_jsxDEV(ButtonLarge, {\n            onClick: () => handleSendForm(),\n            color: \"orange\",\n            value: buttonLoading ? /*#__PURE__*/_jsxDEV(ReactLoading, {\n              className: \"loadingSpinnerButton\",\n              type: \"spin\",\n              color: \"white\",\n              height: 23,\n              width: 23\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 52\n            }, this) : \"Passer aux documents suivants\",\n            width: \"400px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), error.type === \"docCount\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"PrestErrorMessage\",\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 51\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Prest_Step3, \"hiTXYUxXq3Vqw1jt/WojvZ1Un30=\", false, function () {\n  return [useFirebase, useAuth, useHistory];\n});\n\n_c = Prest_Step3;\nexport default Prest_Step3;\n\nvar _c;\n\n$RefreshReg$(_c, \"Prest_Step3\");","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/pages/Prest_Step3.js"],"names":["React","useState","useEffect","useHistory","useAuth","ButtonSmall","ButtonLarge","Layout","Title","SubTitle","ReactLoading","useFirebase","FaCheckCircle","CSSTransition","Prest_Step3","firebaseContext","storage","initialDocuments","kbis","ci","assurance","sepa","rib","error","setError","type","message","buttonLoading","setButtonLoading","documents","setDocuments","isMounted","setIsMounted","seller","setCurrentStepProcess","addSellerDocuments","getSellerDocumentsFromDB","history","getCurrentDocumentsFromDB","then","data","handleInputChange","e","docType","target","files","size","handleSendForm","name","documentsUrlArray","doc","lastModified","token","Math","random","toString","substr","url","handleUploadFile","modifiedFiles","Object","values","filter","undefined","length","push","image","Promise","resolve","reject","upload","ref","put","on","snapshot","console","log","child","getDownloadURL","catch","status","marginRight","document","getElementById","click"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles/Prest_.css\"\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from \"../context/userContext\"; // context\r\n\r\nimport { ButtonSmall, ButtonLarge } from '../components/utilities/Buttons'\r\nimport Layout from '../components/utilities/Layout'\r\nimport Title from '../components/utilities/Title'\r\nimport SubTitle from '../components/utilities/SubTitle'\r\nimport ReactLoading from 'react-loading';\r\nimport { useFirebase } from \"../assets/base-context\";\r\nimport { FaCheckCircle } from 'react-icons/fa';\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nconst Prest_Step3 = () => {\r\n    \r\n    const firebaseContext = useFirebase()\r\n    const storage = firebaseContext.storage()\r\n\r\n    const initialDocuments = {\r\n        kbis: \"\",\r\n        ci: \"\",\r\n        assurance: \"\",\r\n        sepa: \"\",\r\n        rib: \"\"\r\n    }\r\n\r\n    const [error, setError] = useState({ type: \"\", message: \"\" });\r\n    const [buttonLoading, setButtonLoading] = useState(false)\r\n\r\n    const [documents, setDocuments] = useState(initialDocuments)\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n\r\n    const { seller, setCurrentStepProcess, addSellerDocuments, getSellerDocumentsFromDB } = useAuth() // context\r\n    const history = useHistory()\r\n    \r\n    // seller.status !== \"subscribing\" && history.push('/mon-compte-partenaire')\r\n\r\n    setCurrentStepProcess(3)\r\n\r\n    useEffect(() => {\r\n        function getCurrentDocumentsFromDB() {\r\n            getSellerDocumentsFromDB().then(data => {\r\n                if (data === null) {\r\n                    setDocuments(initialDocuments)\r\n                }\r\n                else {\r\n                    setDocuments(data)\r\n                }\r\n            })\r\n        }\r\n        getCurrentDocumentsFromDB()\r\n        setIsMounted(true)\r\n    }, [])\r\n\r\n\r\n    function handleInputChange(e, docType) {\r\n        const type = e.target.files[0].type\r\n        const size = e.target.files[0].size\r\n        if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\" && type !== \"application/pdf\") {\r\n            setError({ type: docType, message: \"Votre fichier n'est ni une image jpeg, jpg, png ou PDF.\" })\r\n        }\r\n        else if (size > 2000000) {\r\n            setError({ type: docType, message: \"Votre image fait plus de 2Mo.\" })\r\n        }\r\n        else {\r\n            e.target.files[0].docType = docType\r\n            docType === \"kbis\" ? setDocuments({ ...documents, kbis: e.target.files[0] })\r\n                : docType === \"ci\" ? setDocuments({ ...documents, ci: e.target.files[0] })\r\n                    : docType === \"assurance\" && setDocuments({ ...documents, assurance: e.target.files[0] })\r\n            setError({ type: \"\", message: \"\" })\r\n        }\r\n    }\r\n\r\n    async function handleSendForm() {\r\n        setButtonLoading(true)\r\n        if (documents.kbis.name && documents.ci.name && documents.assurance.name) {\r\n            let documentsUrlArray = { ...documents }\r\n\r\n            for (const doc in documents) {\r\n                if (documents[doc].lastModified) {\r\n                    const token = `${documents[doc].docType}-${Math.random().toString(36).substr(2, 19)}`\r\n                    const url = await handleUploadFile(documents[doc], token)\r\n                    documentsUrlArray[documents[doc].docType] = { url: url, token: token, name: documents[doc].name }\r\n                }\r\n            }\r\n            \r\n            const modifiedFiles = Object.values(documents).filter(doc => doc.lastModified !== undefined)\r\n            modifiedFiles.length > 0 && await addSellerDocuments(documentsUrlArray)\r\n            history.push('/mon-compte-partenaire/process/verification-2')\r\n\r\n        } else {\r\n            setError({ type: \"docCount\", message: \"Il manque des documents. Le Kbis, la carte d'identité, et l'assurance de responsabilité civile, sont obligatoires.\" })\r\n            setButtonLoading(false)\r\n        }\r\n\r\n    }\r\n\r\n    function handleUploadFile(image, token) {\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const upload = storage.ref(`sellers/${token}`).put(image)\r\n            upload.on(\r\n                \"state_changed\", snapshot => { },\r\n                error => {\r\n                    console.log(error)\r\n                }, () => {\r\n                    storage\r\n                        .ref(\"sellers\")\r\n                        .child(token)\r\n                        .getDownloadURL()\r\n                        .then(url => {\r\n                            resolve(url);\r\n                        })\r\n                        .catch(error => {\r\n                            console.error(error)\r\n                            reject(error);\r\n                        })\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <CSSTransition\r\n                in={isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"layoutDocumentPrest\">\r\n                    <div className=\"Prest-Step3-Header\">\r\n                        <SubTitle value=\"Vérification documents\" type=\"big\" font=\"roboto-medium\" align=\"left\" />\r\n                        <p>Sur cette page vous allez devoir nous transmettre vos documents, pour que nous puissions vérifier votre activité.</p>\r\n                        <p>Merci de bien les vérifier avant envoi, il ne peut y avoir de modifications possibles.</p>\r\n                    </div>\r\n\r\n                    <div className=\"Prest-Step3-Section1\">\r\n                        <Title value=\"KBIS actualisé ou relevé Siren\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                        {error.type === \"kbis\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                        <p>Evitez les photos floues ou trop sombres.</p>\r\n                        <input id=\"fileKbis\" className=\"input-file\" type=\"file\" onChange={(e) => handleInputChange(e, \"kbis\")} />\r\n                        <div className=\"fileConditions\">\r\n                            <p>2Mo max</p>\r\n                            <p>Type de fichiers acceptés : jpeg, jpg, png ou PDF</p>\r\n                        </div>\r\n                        {\r\n                            (documents.kbis.status && documents.kbis.status === \"validated\") ?\r\n                                <p className=\"validMessage\"><FaCheckCircle style={{ marginRight: \"5px\" }} size=\"25\" color=\"rgb(120, 213, 152)\" />Votre document a été accepté</p>\r\n                                :\r\n                                <div>\r\n                                    {(documents.kbis.status && documents.kbis.status === \"rejected\") &&\r\n                                        <p className=\"errorMessage\">Votre document a été refusé.</p>\r\n                                    }\r\n                                    <ButtonSmall\r\n                                        onClick={() => document.getElementById('fileKbis').click()}\r\n                                        color=\"blue\"\r\n                                        value=\"Charger le document\"\r\n                                        marginTop=\"15px\"\r\n                                    />\r\n                                    {(documents.kbis && documents.kbis.status !== \"rejected\") && <span className=\"fileNameOnRight\">{documents.kbis.name}</span>}\r\n                                </div>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"Prest-Step3-Section2\">\r\n                        <Title value=\"Carte d'identité du gérant\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                        {error.type === \"ci\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                        <p>Evitez les photos floues ou trop sombres.</p>\r\n                        <p>Merci de nous fournir un document avec le recto et le verso de votre carte d'identité.</p>\r\n                        <input id=\"fileCi\" className=\"input-file\" type=\"file\" onChange={(e) => handleInputChange(e, \"ci\")} />\r\n                        <div className=\"fileConditions\">\r\n                            <p>2Mo max</p>\r\n                            <p>Type de fichiers acceptés : jpeg, jpg, png ou PDF</p>\r\n                        </div>\r\n                        {\r\n                            (documents.ci.status && documents.ci.status === \"validated\") ?\r\n                                <p className=\"validMessage\"><FaCheckCircle style={{ marginRight: \"5px\" }} size=\"25\" color=\"rgb(120, 213, 152)\" />Votre document a été accepté</p>\r\n                                :\r\n                                <div>\r\n                                    {(documents.ci.status && documents.ci.status === \"rejected\") &&\r\n                                        <p className=\"errorMessage\">Votre document a été refusé.</p>\r\n                                    }\r\n                                    <ButtonSmall\r\n                                        onClick={() => document.getElementById('fileCi').click()}\r\n                                        color=\"blue\"\r\n                                        value=\"Charger le document\"\r\n                                        marginTop=\"15px\"\r\n                                    />\r\n                                    {(documents.ci && documents.ci.status !== \"rejected\") && <span className=\"fileNameOnRight\">{documents.ci.name}</span>}\r\n                                </div>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"Prest-Step3-Section4\">\r\n                        <Title value=\"Assurance responsabilité civile professionnelle\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                        {error.type === \"assurance\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                        <p>Evitez les photos floues ou trop sombres.</p>\r\n                        <input id=\"fileAssurance\" className=\"input-file\" type=\"file\" onChange={(e) => handleInputChange(e, \"assurance\")} />\r\n                        <div className=\"fileConditions\">\r\n                            <p>2Mo max</p>\r\n                            <p>Type de fichiers acceptés : jpeg, jpg, png ou PDF</p>\r\n                        </div>\r\n                        {\r\n                            (documents.assurance.status && documents.assurance.status === \"validated\") ?\r\n                                <p className=\"validMessage\"><FaCheckCircle style={{ marginRight: \"5px\" }} size=\"25\" color=\"rgb(120, 213, 152)\" />Votre document a été accepté</p>\r\n                                :\r\n                                <div>\r\n                                    {(documents.assurance.status && documents.assurance.status === \"rejected\") &&\r\n                                        <p className=\"errorMessage\">Votre document a été refusé.</p>\r\n                                    }\r\n                                    <ButtonSmall\r\n                                        onClick={() => document.getElementById('fileAssurance').click()}\r\n                                        color=\"blue\"\r\n                                        value=\"Charger le document\"\r\n                                        marginTop=\"15px\"\r\n                                    />\r\n                                    {(documents.assurance && documents.assurance.status !== \"rejected\") && <span className=\"fileNameOnRight\">{documents.assurance.name}</span>}\r\n                                </div>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className=\"divider\"></div>\r\n\r\n                    <div className=\"Prest-Step3-Section3\">\r\n                        <ButtonLarge\r\n                            onClick={() => handleSendForm()}\r\n                            color=\"orange\"\r\n                            value={buttonLoading ? <ReactLoading className=\"loadingSpinnerButton\" type=\"spin\" color=\"white\" height={23} width={23} /> : \"Passer aux documents suivants\"}\r\n                            width=\"400px\"\r\n                        />\r\n                    </div>\r\n                    {error.type === \"docCount\" && <p className=\"PrestErrorMessage\">{error.message}</p>}\r\n                </div>\r\n            </CSSTransition>\r\n        </Layout>\r\n    )\r\n}\r\nexport default Prest_Step3;\r\n"]},"metadata":{},"sourceType":"module"}