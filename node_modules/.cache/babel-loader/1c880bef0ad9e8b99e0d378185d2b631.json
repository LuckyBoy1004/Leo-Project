{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useFirebase}from\"../../assets/base-context\";import{ShowService}from\"./ShowService\";import{Table}from'./Table';import{CreateService}from'./CreateService';export var Services=function Services(props){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var categorySeller=props.categorySeller;var currentSeller=props.currentSeller;var refServices=firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),services=_useState2[0],setServices=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),currentService=_useState4[0],setCurrentService=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"list\"),_useState8=_slicedToArray(_useState7,2),step=_useState8[0],setStep=_useState8[1];useEffect(function(){var refServices=firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\");function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refServices.get();case 2:query=_context.sent;results=[];query.forEach(function(doc){results.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id,action:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleOpeningService(doc.id);},children:\"Voir\"})}));});setServices(results);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData().then(function(){setLoading(false);});},[step,currentSeller]);function handleDeleteService(){return _handleDeleteService.apply(this,arguments);}function _handleDeleteService(){_handleDeleteService=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return refServices.doc(currentService).delete().then(function(){setStep(\"list\");});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteService.apply(this,arguments);}function handleOpeningService(id){setStep('show');setCurrentService(id);}return!loading&&/*#__PURE__*/_jsx(\"div\",{children:step===\"list\"?/*#__PURE__*/_jsxs(\"div\",{className:\"servicesShowSellerContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Les services:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"create\");},className:\"buttonAdminTransparent\",children:\" + Cr\\xE9er un service\"}),/*#__PURE__*/_jsx(Table,{data:services,type:\"services\"})]}):step===\"show\"?/*#__PURE__*/_jsxs(\"div\",{className:\"showServiceContainer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"list\");},className:\"buttonAdminTransparent\",children:\"Retour \\xE0 la liste des services\"}),/*#__PURE__*/_jsx(ShowService,{handleDeleteService:handleDeleteService,currentService:currentService,currentSeller:currentSeller})]}):step===\"create\"&&/*#__PURE__*/_jsx(CreateService,{categorySeller:categorySeller,setStep:setStep,setCurrentService:setCurrentService,currentSeller:currentSeller})});};","map":{"version":3,"sources":["C:/Users/Home/Desktop/Boulot/Nivid/src/components/Admin/Services.js"],"names":["React","useEffect","useState","useFirebase","ShowService","Table","CreateService","Services","props","firebaseContext","firestore","categorySeller","currentSeller","refServices","collection","doc","services","setServices","currentService","setCurrentService","loading","setLoading","step","setStep","getData","get","query","results","forEach","push","data","id","action","handleOpeningService","then","handleDeleteService","delete"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useFirebase } from \"../../assets/base-context\";\r\nimport { ShowService } from \"./ShowService\";\r\nimport { Table } from './Table'\r\nimport { CreateService } from './CreateService'\r\n\r\n\r\n\r\nexport const Services = (props) => {\r\n    \r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n    const categorySeller = props.categorySeller\r\n    const currentSeller = props.currentSeller;\r\n    const refServices = firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\");\r\n\r\n    const [services, setServices] = useState([])\r\n    const [currentService, setCurrentService] = useState()\r\n    const [loading, setLoading] = useState(true)\r\n    const [step, setStep] = useState(\"list\")\r\n\r\n    useEffect(() => {\r\n        const refServices = firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\");\r\n\r\n        async function getData() {\r\n            const query = await refServices.get();\r\n            const results = []\r\n\r\n            query.forEach(doc => {\r\n                results.push({\r\n                    ...doc.data(),\r\n                    id: doc.id,\r\n                    action: <button onClick={() => handleOpeningService(doc.id)}>Voir</button>\r\n                })\r\n            })\r\n            setServices(results)\r\n        }\r\n\r\n        getData().then(() => {\r\n            setLoading(false)\r\n        })\r\n    }, [step, currentSeller])\r\n\r\n\r\n    async function handleDeleteService() {\r\n        await refServices.doc(currentService).delete().then(() => {\r\n            setStep(\"list\")\r\n        })\r\n    }\r\n\r\n    function handleOpeningService(id) {\r\n        setStep('show')\r\n        setCurrentService(id)\r\n    }\r\n\r\n\r\n    return !loading && (\r\n        <div>\r\n            {step === \"list\" ?\r\n                <div className=\"servicesShowSellerContainer\">\r\n                    <h2>Les services:</h2>\r\n                    <button onClick={() => setStep(\"create\")} className=\"buttonAdminTransparent\"> + Créer un service</button>\r\n                    <Table data={services} type=\"services\" />\r\n                </div>\r\n                : step === \"show\" ?\r\n                    <div className=\"showServiceContainer\">\r\n                        <button onClick={() => setStep(\"list\")} className=\"buttonAdminTransparent\">Retour à la liste des services</button>\r\n                        <ShowService handleDeleteService={handleDeleteService} currentService={currentService} currentSeller={currentSeller} />\r\n                    </div>\r\n                    : step === \"create\" &&\r\n                    <CreateService categorySeller={categorySeller} setStep={setStep} setCurrentService={setCurrentService} currentSeller={currentSeller} />\r\n            }\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}