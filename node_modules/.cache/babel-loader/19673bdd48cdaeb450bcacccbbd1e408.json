{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect,useRef}from\"react\";import{FaChevronDown}from'react-icons/fa';import ServicesSlider from'../components/ServicesSlider';import{items}from'../components/servicesData';import{useAuth}from\"../context/userContext\";// context\nimport SellersMap from'../components/SellersMap';import{GoogleApiWrapper}from'google-maps-react';import{useFirebase}from\"../assets/base-context\";import{useHistory}from'react-router-dom';import StickerBudgetLeft from\"../components/StickerBudgetLeft\";import Image from'../components/utilities/Image';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import Select,{SelectChangeEvent}from'@mui/material/Select';import Checkbox from'@mui/material/Checkbox';import ExpandMoreIcon from'@mui/icons-material/ExpandMore';var initialFilter={vegan:false,halal:false,casher:false,vegetarien:false};var Etape2=function Etape2(props){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var _useAuth=useAuth(),event=_useAuth.event,setCurrentStepProcess=_useAuth.setCurrentStepProcess;// context\nvar history=useHistory();var _useState=useState(\"decorations\"),_useState2=_slicedToArray(_useState,2),selectedMenu=_useState2[0],setSelectedMenu=_useState2[1];var _useState3=useState(\"Décorations intérieures\"),_useState4=_slicedToArray(_useState3,2),selectedSubMenu=_useState4[0],setSelectedSubMenu=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentPageOffers=_useState6[0],setCurrentPageOffers=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),beforeSubMenu=_useState8[0],setBeforeSubMenu=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isSubMenuDisplay=_useState10[0],setIsSubMenuDisplay=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),sellers=_useState12[0],setSellers=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),allSellers=_useState14[0],setAllSellers=_useState14[1];// C'est tout les sellers qui match en subcategory, ET qui sont à plus de 5km ( pour afficher les marker gris sur la map )\nvar _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),categorySellers=_useState18[0],setCategorySellers=_useState18[1];// Tout les sellers qui match avec la category seulement, et à moins de 5 km ( pour afficher le nombre de\n// prestataire dans la category en cours)\nvar _useState19=useState(window.innerWidth),_useState20=_slicedToArray(_useState19,2),windowsWidth=_useState20[0],setWindowsWidth=_useState20[1];// State pour le scroll du menu category en mobile version\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isDown=_useState22[0],setIsDown=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),startX=_useState24[0],setStartX=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),scrollLeft=_useState26[0],setScrollLeft=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isSubMenuNotActiveMobileDisplay=_useState28[0],setIsSubMenuNotActiveMobileDisplay=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),isSliderHeaderIsMoving=_useState30[0],setIsSliderHeaderIsMoving=_useState30[1];var _useState31=useState(initialFilter),_useState32=_slicedToArray(_useState31,2),foodTypeFilter=_useState32[0],setFoodTypeFilter=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),isFoodFilterOpened=_useState34[0],setIsFoodFilterOpened=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),leftBudget=_useState36[0],setLeftBudget=_useState36[1];var isMobile=function isMobile(){return windowsWidth>1100?false:true;};var handleResize=function handleResize(width){return setWindowsWidth(width);};useEffect(function(){event&&event.status&&event.status!==\"creating\"&&history.push('/dashboard');event&&!event.status&&history.push('/dashboard');!event&&history.push('/dashboard');window.addEventListener(\"resize\",function(e){return handleResize(window.innerWidth);});setLoading(true);getSellersFromDB(selectedMenu,selectedSubMenu);setCurrentStepProcess(2);setLeftBudget(event.budgetLeft);},[selectedMenu,selectedSubMenu,foodTypeFilter]);useEffect(function(){setFoodTypeFilter(initialFilter);setIsFoodFilterOpened(false);},[selectedMenu]);function handleCategoryChange(category,subcategory){if(isSliderHeaderIsMoving)return;else{setIsSubMenuNotActiveMobileDisplay(false);if(category!==selectedMenu){setSellers([]);setSelectedMenu(category);setSelectedSubMenu(subcategory);setCurrentPageOffers(0);if(category===\"nourriture\"){setIsSubMenuDisplay(false);setBeforeSubMenu(\"\");}else setIsSubMenuDisplay(true);}}}function handleSubCategoryChange(key){if(key!==selectedSubMenu){setSellers([]);setSelectedSubMenu(key);setCurrentPageOffers(0);setIsSubMenuNotActiveMobileDisplay(false);}}function displayBeforeSubMenu(){var table=[\"Service à table\",\"Dinatoire\",\"Buffet\"];return table.map(function(name,i){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setBeforeSubMenu(name),setIsSubMenuDisplay(true);},className:\"subMenuItem beforeSubMenu\",children:/*#__PURE__*/_jsx(\"p\",{children:name})},i);});}function handleOpeningSellersDetails(sellerId){history.push(\"/creer-mon-evenement/etape-2/prestataires/\".concat(sellerId));}function getSellersFromDB(_x,_x2){return _getSellersFromDB.apply(this,arguments);}function _getSellersFromDB(){_getSellersFromDB=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(category,subCategory){var refSellers,results,query;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:refSellers=firestore.collection(\"sellers\");// On va choper TOUT les sellers à moins de 5km pour ensuite faire le tri avec les category\nresults=[];query=refSellers;query=query.where(\"category\",\"==\",category);query=query.where(\"status\",\"==\",\"opened\");query.get().then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var filteredResults,categorySellersQuery,categorySellersClose,_iterator,_step,result,newSellers,copyAllSellers,newAllSellers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:res.forEach(function(doc){results.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});filteredResults=[];if(selectedMenu===\"nourriture\"){if(foodTypeFilter.vegan===true){results.forEach(function(item){if(item.foodTypes===undefined)return;var filtered=item.foodTypes.filter(function(foodType){return foodType===\"Vegan\";});if(filtered.length)filteredResults.push(item);});}if(foodTypeFilter.halal===true){results.forEach(function(item){if(item.foodTypes===undefined)return;var filtered=item.foodTypes.filter(function(foodType){return foodType===\"Halal\";});if(filtered.length)filteredResults.push(item);});}if(foodTypeFilter.casher===true){results.forEach(function(item){if(item.foodTypes===undefined)return;var filtered=item.foodTypes.filter(function(foodType){return foodType===\"Casher\";});if(filtered.length)filteredResults.push(item);});}if(foodTypeFilter.vegetarien===true){results.forEach(function(item){if(item.foodTypes===undefined)return;var filtered=item.foodTypes.filter(function(foodType){return foodType===\"Vegetarien\";});if(filtered.length)filteredResults.push(item);});}}if(foodTypeFilter.vegetarien===false&&foodTypeFilter.casher===false&&foodTypeFilter.halal===false&&foodTypeFilter.vegan===false)filteredResults=[].concat(results);if(!(filteredResults.length>0)){_context.next=19;break;}_context.next=7;return filterSellersByDistance(filteredResults);case 7:categorySellersQuery=_context.sent;categorySellersClose=[];_iterator=_createForOfIteratorHelper(categorySellersQuery);try{for(_iterator.s();!(_step=_iterator.n()).done;){result=_step.value;if(result.firstName){categorySellersClose.push(result);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}newSellers=categorySellersClose.filter(function(seller){return seller.subcategory===subCategory;});setSellers(newSellers);setCategorySellers(categorySellersClose);// On enlève les sellers à moins de 5 kilometres, pour ne garder dans allSellers uniquement ceux à plus de 5. Pour envoyer à la map\ncopyAllSellers=_toConsumableArray(filteredResults).filter(function(item){return item.subcategory===subCategory;});newAllSellers=copyAllSellers.filter(function(item){return!newSellers.includes(item);});setAllSellers(newAllSellers);_context.next=21;break;case 19:setSellers([]);setCategorySellers([]);case 21:setLoading(false);case 22:case\"end\":return _context.stop();}}},_callee);}));return function(_x6){return _ref7.apply(this,arguments);};}());case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _getSellersFromDB.apply(this,arguments);}function filterSellersByDistance(_x3){return _filterSellersByDistance.apply(this,arguments);}function _filterSellersByDistance(){_filterSellersByDistance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",Promise.all(data.map(function(item){var eventLatLng=event.latLng?event.latLng:{lat:48.51666,lng:-34.41888};return getDistanceBetweenTwoPoints(eventLatLng,item.latLng).then(function(result){if(result/1000<5){return item;}else{return[];}});})));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _filterSellersByDistance.apply(this,arguments);}function getDistanceBetweenTwoPoints(_x4,_x5){return _getDistanceBetweenTwoPoints.apply(this,arguments);}function _getDistanceBetweenTwoPoints(){_getDistanceBetweenTwoPoints=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(eventPos,sellerPos){var origin,destination,service;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:origin=new props.google.maps.LatLng(eventPos.lat,eventPos.lng);destination=new props.google.maps.LatLng(sellerPos.lat,sellerPos.lng);service=new props.google.maps.DistanceMatrixService();return _context4.abrupt(\"return\",new Promise(function(resolve){service.getDistanceMatrix({origins:[origin],destinations:[destination],travelMode:'DRIVING'},function(response,status){resolve(response.rows[0].elements[0].distance.value);});}));case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _getDistanceBetweenTwoPoints.apply(this,arguments);}var sliderCategory=useRef();function handleMouseDownSliderHeader(e){setIsDown(true);setStartX(windowsWidth<1100?e.clientX:e.pageX-sliderCategory.current.offsetLeft);setScrollLeft(sliderCategory.current.scrollLeft);setIsSliderHeaderIsMoving(false);}function handleMouseLeaveAndUpSliderHeader(){setIsDown(false);}function handleMouseMoveSliderHeader(e){if(!isDown)return;setIsSliderHeaderIsMoving(true);e.preventDefault();var x=windowsWidth<1100?e.clientX:e.pageX-sliderCategory.current.offsetLeft;var walk=(x-startX)*2;//scroll-fast\nsliderCategory.current.scrollLeft=scrollLeft-walk;}function handleFoodTypeChanged(isChecked,type){var newFoodTypeFilter=_objectSpread({},foodTypeFilter);switch(type){case\"Vegan\":newFoodTypeFilter.vegan=isChecked;break;case\"Halal\":newFoodTypeFilter.halal=isChecked;break;case\"Casher\":newFoodTypeFilter.casher=isChecked;break;case\"Vegetarien\":newFoodTypeFilter.vegetarien=isChecked;break;default:break;}setFoodTypeFilter(newFoodTypeFilter);}return/*#__PURE__*/_jsxs(\"div\",{children:[!isMobile()?/*#__PURE__*/_jsxs(\"div\",{className:\"headerEtape2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"decorations\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"decorations\",\"Décorations intérieures\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"D\\xE9corations \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"ambiance\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"ambiance\",\"Musique\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Ambiance \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"table\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"table\",\"Nourriture\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\xC0 table \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{ref:sliderCategory,className:isDown?\"headerEtape2 mobile active\":\"headerEtape2 mobile\",onMouseDown:function onMouseDown(e){return handleMouseDownSliderHeader(e);},onMouseLeave:function onMouseLeave(){return handleMouseLeaveAndUpSliderHeader();},onMouseUp:function onMouseUp(){return handleMouseLeaveAndUpSliderHeader();}// onMouseMove={(e) => handleMouseMoveSliderHeader(e)}\n,onTouchStart:function onTouchStart(e){return handleMouseDownSliderHeader(e);},onTouchEnd:function onTouchEnd(){return handleMouseLeaveAndUpSliderHeader();},onTouchMove:function onTouchMove(e){return handleMouseMoveSliderHeader(e);},style:{touchAction:'none'},children:[/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"decorations\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"decorations\",\"Décorations intérieures\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"D\\xE9corations \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"ambiance\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"ambiance\",\"Musique\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Ambiance \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:selectedMenu===\"table\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"table\",\"Nourriture\");},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\xC0 table \",/*#__PURE__*/_jsx(FaChevronDown,{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.length,\" prestataires au total\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:isMobile()?\"formEtape2Container mobile\":\"formEtape2Container\",children:[!isMobile()?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"subHeaderEtape2\",children:[selectedMenu===\"nourriture\"&&beforeSubMenu.length<1&&displayBeforeSubMenu(),isSubMenuDisplay&&Object.entries(items[selectedMenu]).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],item=_ref2[1];return/*#__PURE__*/_jsxs(\"div\",{className:selectedSubMenu===key?\"subMenuItem active\":\"subMenuItem\",onClick:function onClick(){return handleSubCategoryChange(key);},children:[/*#__PURE__*/_jsx(Image,{url:item.icon}),/*#__PURE__*/_jsx(\"p\",{children:key}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.filter(function(seller){return seller.subcategory===key;}).length,\" prestataires dans vos alentours\"]})]},key);}),/*#__PURE__*/_jsx(\"div\",{className:\"stickerBudgetLeft\",children:/*#__PURE__*/_jsx(StickerBudgetLeft,{})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:isSubMenuNotActiveMobileDisplay?\"subHeaderEtape2 mobile active\":\"subHeaderEtape2 mobile\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"infoSubHeaderTopButton\",children:\"Appuyez pour changer\"}),selectedMenu===\"nourriture\"&&beforeSubMenu.length<1&&displayBeforeSubMenu(),isSubMenuDisplay&&Object.entries(items[selectedMenu]).map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],item=_ref4[1];if(selectedSubMenu===key){return/*#__PURE__*/_jsxs(\"div\",{className:\"subMenuItem active\",onClick:function onClick(){return setIsSubMenuNotActiveMobileDisplay(!isSubMenuNotActiveMobileDisplay);},children:[/*#__PURE__*/_jsx(Image,{url:item.icon}),/*#__PURE__*/_jsx(\"p\",{children:key}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.filter(function(seller){return seller.subcategory===key;}).length,\" prestataires dans vos alentours\"]})]},key);}}),/*#__PURE__*/_jsx(\"div\",{className:\"hideItemSubHeaderEtape2\",children:Object.entries(items[selectedMenu]).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],item=_ref6[1];if(selectedSubMenu!==key){return/*#__PURE__*/_jsxs(\"div\",{className:\"subMenuItem\",onClick:function onClick(){return handleSubCategoryChange(key);},children:[/*#__PURE__*/_jsx(Image,{url:item.icon}),/*#__PURE__*/_jsx(\"p\",{children:key}),/*#__PURE__*/_jsxs(\"span\",{children:[categorySellers.filter(function(seller){return seller.subcategory===key;}).length,\" prestataires dans vos alentours\"]})]},key);}})})]}),selectedMenu===\"table\"&&/*#__PURE__*/_jsx(\"div\",{className:\"foodTypeFilter\",children:/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return setIsFoodFilterOpened(function(r){return!r;});},className:\"foodTypeFilter_select\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"R\\xE9gime alimentaire \",/*#__PURE__*/_jsx(ExpandMoreIcon,{})]}),isFoodFilterOpened&&/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return e.stopPropagation();},className:\"foodTypeFilter_select_dropDown\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:foodTypeFilter.vegan?\"active\":\"\",children:\"Vegan\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Checkbox,{checked:foodTypeFilter.vegan,onChange:function onChange(e){return handleFoodTypeChanged(e.target.checked,\"Vegan\");},inputProps:{'aria-label':'controlled'}})})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:foodTypeFilter.casher?\"active\":\"\",children:\"Casher\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Checkbox,{checked:foodTypeFilter.casher,onChange:function onChange(e){return handleFoodTypeChanged(e.target.checked,\"Casher\");},inputProps:{'aria-label':'controlled'}})})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:foodTypeFilter.halal?\"active\":\"\",children:\"Halal\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Checkbox,{checked:foodTypeFilter.halal,onChange:function onChange(e){return handleFoodTypeChanged(e.target.checked,\"Halal\");},inputProps:{'aria-label':'controlled'}})})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:foodTypeFilter.vegetarien?\"active\":\"\",children:\"V\\xE9g\\xE9tarien\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Checkbox,{checked:foodTypeFilter.vegetarien,onChange:function onChange(e){return handleFoodTypeChanged(e.target.checked,\"Vegetarien\");},inputProps:{'aria-label':'controlled'}})})]})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:isMobile()&&isSubMenuNotActiveMobileDisplay?\"contentEtape2 mobile notActive\":isMobile()&&!isSubMenuNotActiveMobileDisplay?\"contentEtape2 mobile\":\"contentEtape2\",children:[/*#__PURE__*/_jsx(ServicesSlider,{sellers:sellers,loading:loading,leftBudget:leftBudget,currentPageOffers:currentPageOffers,setCurrentPageOffers:setCurrentPageOffers,handleOpeningSellersDetails:handleOpeningSellersDetails,isMobile:isMobile(),windowsWidth:windowsWidth,selectedSubMenu:selectedSubMenu,selectedMenu:selectedMenu}),!isMobile()&&/*#__PURE__*/_jsx(\"div\",{className:\"mapContainer\",children:/*#__PURE__*/_jsx(SellersMap,{sellers:sellers,allSellers:allSellers})})]})]})]});};export default GoogleApiWrapper({apiKey:\"AIzaSyAim92JbJjr_fgoP0bYxzdCAz9PsAu5JWY\"})(Etape2);","map":{"version":3,"sources":["/Users/bc/Desktop/Nivid/src/pages/Etape2.js"],"names":["React","useState","useEffect","useRef","FaChevronDown","ServicesSlider","items","useAuth","SellersMap","GoogleApiWrapper","useFirebase","useHistory","StickerBudgetLeft","Image","MenuItem","FormControl","Select","SelectChangeEvent","Checkbox","ExpandMoreIcon","initialFilter","vegan","halal","casher","vegetarien","Etape2","props","firebaseContext","firestore","event","setCurrentStepProcess","history","selectedMenu","setSelectedMenu","selectedSubMenu","setSelectedSubMenu","currentPageOffers","setCurrentPageOffers","beforeSubMenu","setBeforeSubMenu","isSubMenuDisplay","setIsSubMenuDisplay","sellers","setSellers","allSellers","setAllSellers","loading","setLoading","categorySellers","setCategorySellers","window","innerWidth","windowsWidth","setWindowsWidth","isDown","setIsDown","startX","setStartX","scrollLeft","setScrollLeft","isSubMenuNotActiveMobileDisplay","setIsSubMenuNotActiveMobileDisplay","isSliderHeaderIsMoving","setIsSliderHeaderIsMoving","foodTypeFilter","setFoodTypeFilter","isFoodFilterOpened","setIsFoodFilterOpened","leftBudget","setLeftBudget","isMobile","handleResize","width","status","push","addEventListener","e","getSellersFromDB","budgetLeft","handleCategoryChange","category","subcategory","handleSubCategoryChange","key","displayBeforeSubMenu","table","map","name","i","handleOpeningSellersDetails","sellerId","subCategory","refSellers","collection","results","query","where","get","then","res","forEach","doc","data","id","filteredResults","item","foodTypes","undefined","filtered","filter","foodType","length","filterSellersByDistance","categorySellersQuery","categorySellersClose","result","firstName","newSellers","seller","copyAllSellers","newAllSellers","includes","Promise","all","eventLatLng","latLng","lat","lng","getDistanceBetweenTwoPoints","eventPos","sellerPos","origin","google","maps","LatLng","destination","service","DistanceMatrixService","resolve","getDistanceMatrix","origins","destinations","travelMode","response","rows","elements","distance","value","sliderCategory","handleMouseDownSliderHeader","clientX","pageX","current","offsetLeft","handleMouseLeaveAndUpSliderHeader","handleMouseMoveSliderHeader","preventDefault","x","walk","handleFoodTypeChanged","isChecked","type","newFoodTypeFilter","touchAction","Object","entries","icon","r","stopPropagation","target","checked","apiKey"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { FaChevronDown } from 'react-icons/fa';\r\nimport ServicesSlider from '../components/ServicesSlider'\r\nimport { items } from '../components/servicesData'\r\nimport { useAuth } from \"../context/userContext\"; // context\r\nimport SellersMap from '../components/SellersMap'\r\nimport { GoogleApiWrapper } from 'google-maps-react';\r\nimport { useFirebase } from \"../assets/base-context\";\r\nimport { useHistory } from 'react-router-dom'\r\nimport StickerBudgetLeft from \"../components/StickerBudgetLeft\";\r\n\r\nimport Image from '../components/utilities/Image'\r\n\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\r\nimport Checkbox from '@mui/material/Checkbox';\r\n\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\n\r\nconst initialFilter = {\r\n    vegan: false,\r\n    halal: false,\r\n    casher: false,\r\n    vegetarien: false\r\n}\r\n\r\nconst Etape2 = (props) => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n    const { event, setCurrentStepProcess } = useAuth() // context\r\n    const history = useHistory()\r\n\r\n    const [selectedMenu, setSelectedMenu] = useState(\"decorations\");\r\n    const [selectedSubMenu, setSelectedSubMenu] = useState(\"Décorations intérieures\");\r\n    const [currentPageOffers, setCurrentPageOffers] = useState(0);\r\n    const [beforeSubMenu, setBeforeSubMenu] = useState(\"\");\r\n    const [isSubMenuDisplay, setIsSubMenuDisplay] = useState(true);\r\n    const [sellers, setSellers] = useState([]);\r\n    const [allSellers, setAllSellers] = useState([]); // C'est tout les sellers qui match en subcategory, ET qui sont à plus de 5km ( pour afficher les marker gris sur la map )\r\n    const [loading, setLoading] = useState(true);\r\n    const [categorySellers, setCategorySellers] = useState([]); // Tout les sellers qui match avec la category seulement, et à moins de 5 km ( pour afficher le nombre de\r\n    // prestataire dans la category en cours)\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    // State pour le scroll du menu category en mobile version\r\n    const [isDown, setIsDown] = useState(false)\r\n    const [startX, setStartX] = useState()\r\n    const [scrollLeft, setScrollLeft] = useState()\r\n\r\n    const [isSubMenuNotActiveMobileDisplay, setIsSubMenuNotActiveMobileDisplay] = useState(false)\r\n\r\n    const [isSliderHeaderIsMoving, setIsSliderHeaderIsMoving] = useState(false)\r\n\r\n    const [foodTypeFilter, setFoodTypeFilter] = useState(initialFilter)\r\n    const [isFoodFilterOpened, setIsFoodFilterOpened] = useState(false)\r\n\r\n    const [leftBudget, setLeftBudget] = useState(0)\r\n\r\n    const isMobile = () => windowsWidth > 1100 ? false : true\r\n\r\n    const handleResize = (width) => setWindowsWidth(width)\r\n\r\n\r\n    useEffect(() => {\r\n        event && event.status && event.status !== \"creating\" && history.push('/dashboard')\r\n        event && !event.status && history.push('/dashboard')\r\n        !event && history.push('/dashboard')\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n        setLoading(true)\r\n        getSellersFromDB(selectedMenu, selectedSubMenu)\r\n        setCurrentStepProcess(2)\r\n        setLeftBudget(event.budgetLeft)\r\n    }, [selectedMenu, selectedSubMenu, foodTypeFilter])\r\n\r\n    useEffect(() => {\r\n        setFoodTypeFilter(initialFilter)\r\n        setIsFoodFilterOpened(false)\r\n    }, [selectedMenu])\r\n\r\n    function handleCategoryChange(category, subcategory) {\r\n        if (isSliderHeaderIsMoving) return\r\n        else {\r\n            setIsSubMenuNotActiveMobileDisplay(false)\r\n            if (category !== selectedMenu) {\r\n                setSellers([])\r\n                setSelectedMenu(category)\r\n                setSelectedSubMenu(subcategory)\r\n                setCurrentPageOffers(0)\r\n                if (category === \"nourriture\") { setIsSubMenuDisplay(false); setBeforeSubMenu(\"\") }\r\n                else setIsSubMenuDisplay(true)\r\n            }\r\n        }\r\n    }\r\n\r\n    function handleSubCategoryChange(key) {\r\n        if (key !== selectedSubMenu) {\r\n            setSellers([])\r\n            setSelectedSubMenu(key)\r\n            setCurrentPageOffers(0)\r\n            setIsSubMenuNotActiveMobileDisplay(false)\r\n        }\r\n    }\r\n\r\n    function displayBeforeSubMenu() {\r\n        const table = [\"Service à table\", \"Dinatoire\", \"Buffet\"]\r\n        return table.map((name, i) =>\r\n            <div onClick={() => (setBeforeSubMenu(name), setIsSubMenuDisplay(true))} key={i} className=\"subMenuItem beforeSubMenu\">\r\n                <p>{name}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function handleOpeningSellersDetails(sellerId) {\r\n        history.push(`/creer-mon-evenement/etape-2/prestataires/${sellerId}`)\r\n    }\r\n\r\n    async function getSellersFromDB(category, subCategory) {\r\n        const refSellers = firestore.collection(\"sellers\");\r\n\r\n        // On va choper TOUT les sellers à moins de 5km pour ensuite faire le tri avec les category\r\n        const results = []\r\n        var query = refSellers\r\n        query = query.where(\"category\", \"==\", category)\r\n        query = query.where(\"status\", \"==\", \"opened\")\r\n        query.get().then(async res => {\r\n\r\n            res.forEach(doc => {\r\n                results.push({ ...doc.data(), id: doc.id })\r\n            })\r\n            let filteredResults = []\r\n            if (selectedMenu === \"nourriture\") {\r\n                if (foodTypeFilter.vegan === true) {\r\n                    results.forEach(item => {\r\n                        if (item.foodTypes === undefined) return\r\n                        let filtered = item.foodTypes.filter(foodType => foodType === \"Vegan\")\r\n                        if (filtered.length) filteredResults.push(item)\r\n                    })\r\n                }\r\n                if (foodTypeFilter.halal === true) {\r\n                    results.forEach(item => {\r\n                        if (item.foodTypes === undefined) return\r\n                        let filtered = item.foodTypes.filter(foodType => foodType === \"Halal\")\r\n                        if (filtered.length) filteredResults.push(item)\r\n                    })\r\n                }\r\n                if (foodTypeFilter.casher === true) {\r\n                    results.forEach(item => {\r\n                        if (item.foodTypes === undefined) return\r\n                        let filtered = item.foodTypes.filter(foodType => foodType === \"Casher\")\r\n                        if (filtered.length) filteredResults.push(item)\r\n                    })\r\n                }\r\n                if (foodTypeFilter.vegetarien === true) {\r\n                    results.forEach(item => {\r\n                        if (item.foodTypes === undefined) return\r\n                        let filtered = item.foodTypes.filter(foodType => foodType === \"Vegetarien\")\r\n                        if (filtered.length) filteredResults.push(item)\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (foodTypeFilter.vegetarien === false && foodTypeFilter.casher === false && foodTypeFilter.halal === false && foodTypeFilter.vegan === false)\r\n                filteredResults = [...results]\r\n\r\n            if (filteredResults.length > 0) {\r\n                const categorySellersQuery = await filterSellersByDistance(filteredResults)\r\n                const categorySellersClose = []\r\n                for (const result of categorySellersQuery) {\r\n                    if (result.firstName) {\r\n                        categorySellersClose.push(result)\r\n                    }\r\n                }\r\n                const newSellers = categorySellersClose.filter(seller => seller.subcategory === subCategory)\r\n                setSellers(newSellers)\r\n                setCategorySellers(categorySellersClose)\r\n                // On enlève les sellers à moins de 5 kilometres, pour ne garder dans allSellers uniquement ceux à plus de 5. Pour envoyer à la map\r\n                const copyAllSellers = [...filteredResults].filter(item => item.subcategory === subCategory)\r\n                const newAllSellers = copyAllSellers.filter((item) => !newSellers.includes(item));\r\n                setAllSellers(newAllSellers)\r\n            }\r\n            else {\r\n                setSellers([])\r\n                setCategorySellers([])\r\n            }\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    async function filterSellersByDistance(data) {\r\n        return Promise.all(\r\n            data.map(item => {\r\n                const eventLatLng = event.latLng ? event.latLng : { lat: 48.51666, lng: -34.41888 }\r\n                return getDistanceBetweenTwoPoints(eventLatLng, item.latLng)\r\n                    .then((result) => {\r\n                        if ((result / 1000) < 5) { return item }\r\n                        else { return [] }\r\n                    })\r\n            })\r\n        )\r\n    }\r\n\r\n    async function getDistanceBetweenTwoPoints(eventPos, sellerPos) {\r\n        var origin = new props.google.maps.LatLng(eventPos.lat, eventPos.lng);\r\n        var destination = new props.google.maps.LatLng(sellerPos.lat, sellerPos.lng);\r\n\r\n        var service = new props.google.maps.DistanceMatrixService();\r\n        return new Promise(resolve => {\r\n            service.getDistanceMatrix(\r\n                {\r\n                    origins: [origin],\r\n                    destinations: [destination],\r\n                    travelMode: 'DRIVING',\r\n                }, (response, status) => {\r\n                    resolve(response.rows[0].elements[0].distance.value)\r\n                }\r\n            )\r\n        });\r\n    }\r\n\r\n    const sliderCategory = useRef()\r\n    function handleMouseDownSliderHeader(e) {\r\n        setIsDown(true)\r\n        setStartX(windowsWidth < 1100 ? e.clientX : e.pageX - sliderCategory.current.offsetLeft)\r\n        setScrollLeft(sliderCategory.current.scrollLeft)\r\n        setIsSliderHeaderIsMoving(false)\r\n    }\r\n\r\n    function handleMouseLeaveAndUpSliderHeader() {\r\n        setIsDown(false)\r\n    }\r\n\r\n    function handleMouseMoveSliderHeader(e) {\r\n        if (!isDown) return\r\n        setIsSliderHeaderIsMoving(true)\r\n        e.preventDefault()\r\n        const x = windowsWidth < 1100 ? e.clientX : e.pageX - sliderCategory.current.offsetLeft;\r\n        const walk = (x - startX) * 2; //scroll-fast\r\n        sliderCategory.current.scrollLeft = scrollLeft - walk;\r\n    }\r\n    function handleFoodTypeChanged(isChecked, type) {\r\n        let newFoodTypeFilter = { ...foodTypeFilter }\r\n        switch (type) {\r\n            case \"Vegan\":\r\n                newFoodTypeFilter.vegan = isChecked\r\n\r\n                break;\r\n            case \"Halal\":\r\n                newFoodTypeFilter.halal = isChecked\r\n\r\n                break;\r\n            case \"Casher\":\r\n                newFoodTypeFilter.casher = isChecked\r\n\r\n                break;\r\n            case \"Vegetarien\":\r\n                newFoodTypeFilter.vegetarien = isChecked\r\n\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        setFoodTypeFilter(newFoodTypeFilter)\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {!isMobile() ?\r\n                <div className=\"headerEtape2\">\r\n                    <div className={selectedMenu === \"decorations\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"decorations\", \"Décorations intérieures\")}>\r\n                        <h1>Décorations <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    <div className={selectedMenu === \"ambiance\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"ambiance\", \"Musique\")}>\r\n                        <h1>Ambiance <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    <div className={selectedMenu === \"table\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"table\", \"Nourriture\")}>\r\n                        <h1>À table <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    {/* <div className={selectedMenu === \"service\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"service\", \"serveurs\")}>\r\n                        <h1>Service sur place <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n            </div> */}\r\n                </div>\r\n                :\r\n                <div\r\n                    ref={sliderCategory}\r\n                    className={isDown ? \"headerEtape2 mobile active\" : \"headerEtape2 mobile\"}\r\n                    onMouseDown={(e) => handleMouseDownSliderHeader(e)}\r\n                    onMouseLeave={() => handleMouseLeaveAndUpSliderHeader()}\r\n                    onMouseUp={() => handleMouseLeaveAndUpSliderHeader()}\r\n                    // onMouseMove={(e) => handleMouseMoveSliderHeader(e)}\r\n\r\n                    onTouchStart={(e) => handleMouseDownSliderHeader(e)}\r\n                    onTouchEnd={() => handleMouseLeaveAndUpSliderHeader()}\r\n                    onTouchMove={(e) => handleMouseMoveSliderHeader(e)}\r\n                    style={{touchAction: 'none'}}\r\n                >\r\n                    <div className={selectedMenu === \"decorations\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"decorations\", \"Décorations intérieures\")}>\r\n                        <h1>Décorations <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    <div className={selectedMenu === \"ambiance\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"ambiance\", \"Musique\")}>\r\n                        <h1>Ambiance <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    <div className={selectedMenu === \"table\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"table\", \"Nourriture\")}>\r\n                        <h1>À table <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n                    </div>\r\n                    {/* <div className={selectedMenu === \"service\" ? \"category active\" : \"category\"} onClick={() => handleCategoryChange(\"service\", \"serveurs\")}>\r\n                        <h1>Service sur place <FaChevronDown /></h1>\r\n                        <span>{categorySellers.length} prestataires au total</span>\r\n        </div> */}\r\n                </div>\r\n            }\r\n            <div className={isMobile() ? \"formEtape2Container mobile\" : \"formEtape2Container\"} >\r\n                {!isMobile() ?\r\n                    <>\r\n                        <div className=\"subHeaderEtape2\">\r\n                            {(selectedMenu === \"nourriture\" && beforeSubMenu.length < 1) && displayBeforeSubMenu()}\r\n                            {isSubMenuDisplay &&\r\n                                Object.entries(items[selectedMenu]).map(([key, item]) => {\r\n                                    return (\r\n                                        <div key={key} className={selectedSubMenu === key ? \"subMenuItem active\" : \"subMenuItem\"} onClick={() => handleSubCategoryChange(key)}>\r\n                                            <Image url={item.icon} />\r\n                                            <p>{key}</p>\r\n                                            <span>{categorySellers.filter(seller => seller.subcategory === key).length} prestataires dans vos alentours</span>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            }\r\n                            <div className=\"stickerBudgetLeft\">\r\n                                <StickerBudgetLeft />\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                    :\r\n                    <div className={isSubMenuNotActiveMobileDisplay ? \"subHeaderEtape2 mobile active\" : \"subHeaderEtape2 mobile\"}>\r\n                        <p className=\"infoSubHeaderTopButton\">Appuyez pour changer</p>\r\n                        {(selectedMenu === \"nourriture\" && beforeSubMenu.length < 1) && displayBeforeSubMenu()}\r\n                        {isSubMenuDisplay &&\r\n                            Object.entries(items[selectedMenu]).map(([key, item]) => {\r\n                                if (selectedSubMenu === key) {\r\n                                    return (\r\n                                        <div key={key} className=\"subMenuItem active\" onClick={() => setIsSubMenuNotActiveMobileDisplay(!isSubMenuNotActiveMobileDisplay)}>\r\n                                            <Image url={item.icon} />\r\n                                            <p>{key}</p>\r\n                                            <span>{categorySellers.filter(seller => seller.subcategory === key).length} prestataires dans vos alentours</span>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            })\r\n                        }\r\n                        <div className=\"hideItemSubHeaderEtape2\">\r\n                            {\r\n                                Object.entries(items[selectedMenu]).map(([key, item]) => {\r\n                                    if (selectedSubMenu !== key) {\r\n                                        return (\r\n                                            <div key={key} className=\"subMenuItem\" onClick={() => handleSubCategoryChange(key)}>\r\n                                                <Image url={item.icon} />\r\n                                                <p>{key}</p>\r\n                                                <span>{categorySellers.filter(seller => seller.subcategory === key).length} prestataires dans vos alentours</span>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n                {selectedMenu === \"table\" &&\r\n                    <div className=\"foodTypeFilter\">\r\n                        <div onClick={() => setIsFoodFilterOpened(r => !r)} className=\"foodTypeFilter_select\">\r\n                            <p>Régime alimentaire <ExpandMoreIcon /></p>\r\n                            {isFoodFilterOpened &&\r\n                                <div onClick={(e) => e.stopPropagation()} className=\"foodTypeFilter_select_dropDown\">\r\n                                    <ul>\r\n                                        <li>\r\n                                            <p className={foodTypeFilter.vegan ? \"active\" : \"\"}>Vegan</p>\r\n                                            <span>\r\n                                                <Checkbox\r\n                                                    checked={foodTypeFilter.vegan}\r\n                                                    onChange={(e) => handleFoodTypeChanged(e.target.checked, \"Vegan\")}\r\n                                                    inputProps={{ 'aria-label': 'controlled' }}\r\n                                                />\r\n                                            </span>\r\n                                        </li>\r\n                                        <li>\r\n                                            <p className={foodTypeFilter.casher ? \"active\" : \"\"}>Casher</p>\r\n                                            <span>\r\n                                                <Checkbox\r\n                                                    checked={foodTypeFilter.casher}\r\n                                                    onChange={(e) => handleFoodTypeChanged(e.target.checked, \"Casher\")}\r\n                                                    inputProps={{ 'aria-label': 'controlled' }}\r\n                                                />\r\n                                            </span>\r\n                                        </li>\r\n                                        <li>\r\n                                            <p className={foodTypeFilter.halal ? \"active\" : \"\"}>Halal</p>\r\n                                            <span>\r\n                                                <Checkbox\r\n                                                    checked={foodTypeFilter.halal}\r\n                                                    onChange={(e) => handleFoodTypeChanged(e.target.checked, \"Halal\")}\r\n                                                    inputProps={{ 'aria-label': 'controlled' }}\r\n                                                />\r\n                                            </span>\r\n                                        </li>\r\n                                        <li>\r\n                                            <p className={foodTypeFilter.vegetarien ? \"active\" : \"\"}>Végétarien</p>\r\n                                            <span>\r\n                                                <Checkbox\r\n                                                    checked={foodTypeFilter.vegetarien}\r\n                                                    onChange={(e) => handleFoodTypeChanged(e.target.checked, \"Vegetarien\")}\r\n                                                    inputProps={{ 'aria-label': 'controlled' }}\r\n                                                />\r\n                                            </span>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n\r\n                <div className=\r\n                    {\r\n                        isMobile() && isSubMenuNotActiveMobileDisplay ? \"contentEtape2 mobile notActive\"\r\n                            : isMobile() && !isSubMenuNotActiveMobileDisplay ? \"contentEtape2 mobile\"\r\n                                : \"contentEtape2\"\r\n                    }\r\n                >\r\n                    <ServicesSlider\r\n                        sellers={sellers}\r\n                        loading={loading}\r\n                        leftBudget={leftBudget}\r\n                        currentPageOffers={currentPageOffers}\r\n                        setCurrentPageOffers={setCurrentPageOffers}\r\n                        handleOpeningSellersDetails={handleOpeningSellersDetails}\r\n                        isMobile={isMobile()}\r\n                        windowsWidth={windowsWidth}\r\n                        selectedSubMenu={selectedSubMenu}\r\n                        selectedMenu={selectedMenu}\r\n                    />\r\n\r\n                    {!isMobile() &&\r\n                        <div className=\"mapContainer\">\r\n                            <SellersMap sellers={sellers} allSellers={allSellers} />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div >\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n    apiKey: (\"AIzaSyAim92JbJjr_fgoP0bYxzdCAz9PsAu5JWY\")\r\n})(Etape2)"]},"metadata":{},"sourceType":"module"}