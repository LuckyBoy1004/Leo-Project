{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bonnieclyde/Desktop/Copie de Nivid (1)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bonnieclyde/Desktop/Copie de Nivid (1)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/bonnieclyde/Desktop/Copie de Nivid (1)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/bonnieclyde/Desktop/Copie de Nivid (1)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/bonnieclyde/Desktop/Copie de Nivid (1)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{useAuth}from'../context/userContext';import{useFirebase}from\"../assets/base-context\";import Title from'./utilities/Title';import SubTitle from'./utilities/SubTitle';import{ButtonSmall,ButtonLarge}from'./utilities/Buttons';import Image from'../components/utilities/Image';import DeleteIcon from'@mui/icons-material/DeleteOutline';import IconButton from'@mui/material/IconButton';import AddIcon from'@mui/icons-material/Add';import NumericInput from'react-numeric-input';import{useDetectClickOutside}from'react-detect-click-outside';import{CSSTransition}from'react-transition-group';import{FaTrashAlt}from'react-icons/fa';import{FaTimes}from'react-icons/fa';import Loader from'./Loader';import Radio from'@mui/material/Radio';import RadioGroup from'@mui/material/RadioGroup';import FormControlLabel from'@mui/material/FormControlLabel';var BoxConfirm=function BoxConfirm(_ref){var type=_ref.type,position=_ref.position,callback=_ref.callback,callbackClose=_ref.callbackClose;var refConfirmBox=useDetectClickOutside({onTriggered:callbackClose});return/*#__PURE__*/_jsxs(\"div\",{ref:refConfirmBox,className:\"confirmBox \".concat(position),children:[/*#__PURE__*/_jsxs(\"span\",{children:[type===\"delete\"&&\"Confirmation de suprresion d'une variation\",type===\"save\"&&\"Confirmation de sauvegarde\"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[type===\"delete\"&&\"Êtes-vous sûr de vouloir supprimer cette variation ?\",type===\"save\"&&\"Vous n'avez rien oublié ?\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[type===\"delete\"&&\"Cette action est irréversible\",type===\"save\"&&\"Si jamais... Vous pouvez toujours modifier ce service directement depuis votre dashboard\"]}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:callback,color:type===\"delete\"?\"red\":\"green\",value:\"Je confirme\",marginTop:\"20px\"})]});};var initialNewService={// category: seller.category,\nname:\"\",images:[],description:\"\",price:0,variations:[],foodType:\"Aucun\",id:null};var Prest_Dashboard_Services=function Prest_Dashboard_Services(_ref2){var setStep=_ref2.setStep;var firebaseContext=useFirebase();var storage=firebaseContext.storage();var _useState=useState({type:\"\",message:\"\"}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),services=_useState4[0],setServices=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pictureTokensToDelete=_useState6[0],setPictureTokensToDelete=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFormOpen=_useState8[0],setIsFormOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isMounted=_useState10[0],setIsMounted=_useState10[1];var _useState11=useState(initialNewService),_useState12=_slicedToArray(_useState11,2),newService=_useState12[0],setNewService=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),addingService=_useState14[0],setAddingService=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isPopupConfirmDeleteOpened=_useState16[0],setIsPopupConfirmDeleteOpened=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isPopupConfirmSaveOpened=_useState18[0],setIsPopupConfirmSaveOpened=_useState18[1];var _useState19=useState(-1),_useState20=_slicedToArray(_useState19,2),currentDeletingVariation=_useState20[0],setCurrentDeletingVariation=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isServiceAddedCorrectly=_useState22[0],setIsServiceAddedCorrectly=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isVariations=_useState24[0],setIsVariations=_useState24[1];var _useAuth=useAuth(),seller=_useAuth.seller,addOneSellerService=_useAuth.addOneSellerService,getServicesOfCurrentSellerFromDB=_useAuth.getServicesOfCurrentSellerFromDB,deleteOldSellerPicture=_useAuth.deleteOldSellerPicture,isSellerAllowedToModifyAndDeleteService=_useAuth.isSellerAllowedToModifyAndDeleteService,deleteServiceOfSeller=_useAuth.deleteServiceOfSeller,addFoodTypeToSeller=_useAuth.addFoodTypeToSeller,deleteFoodTypeToSeller=_useAuth.deleteFoodTypeToSeller;useEffect(function(){getServicesOfCurrentSellerFromDB().then(function(services){setServices(services);setIsMounted(true);});},[]);function euroFormat(num){return num+'€';}function handleChange(e){var type=e.target.files[0].type;var size=e.target.files[0].size;if(type!==\"image/png\"&&type!==\"image/jpeg\"&&type!==\"image/jpg\"){setError({type:\"imageType\",message:\"Votre fichier n'est ni une image jpeg, jpg ou PNG.\"});}else if(size>2000000){setError({type:\"imageSize\",message:\"Votre image fait plus de 2Mo.\"});}else{var newURL=URL.createObjectURL(e.target.files[0]);e.target.files[0].localURL=newURL;setNewService(_objectSpread(_objectSpread({},newService),{},{images:[].concat(_toConsumableArray(newService.images),[e.target.files[0]])}));setError({type:\"\",message:\"\"});}}function handleDeletePicture(item){var newPictures=_toConsumableArray(newService.images);for(var i=0;i<newPictures.length;i++){if(newPictures[i].localURL===item||newPictures[i].url===item){if(newPictures[i].url===item){setPictureTokensToDelete([].concat(_toConsumableArray(pictureTokensToDelete),[newPictures[i].token]));}newPictures.splice(i,1);}}setNewService(_objectSpread(_objectSpread({},newService),{},{images:newPictures}));}function handleServiceClicked(item){setIsFormOpen(true);setIsVariations(item.variations.length>0?true:false);if(newService.id===item.id){return;}clearInputs();setNewService(item);}function clearInputs(){setNewService(initialNewService);setError({type:\"\",message:\"\"});}function handleAddService(){return _handleAddService.apply(this,arguments);}function _handleAddService(){_handleAddService=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var isAllowed,newServicesList,index,serviceToUpload,service,reconstructedService,_service,refDocID,newServiceWithId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsPopupConfirmSaveOpened(false);setAddingService(true);if(!(newService.name.length<5)){_context.next=6;break;}setError({type:\"name\",message:\"Le nom de votre offre doit faire au minimum 5 caractères.\"});_context.next=62;break;case 6:if(!(newService.description.length<20||newService.description.length>300)){_context.next=10;break;}setError({type:\"description\",message:\"Votre description doit comporter entre 20 et 300 caractères.\"});_context.next=62;break;case 10:if(!(newService.images.length===0)){_context.next=14;break;}setError({type:\"noPictures\",message:\"Vous devez ajouter au moins une photo de votre service.\"});_context.next=62;break;case 14:if(!(newService.images.length>3)){_context.next=18;break;}setError({type:\"tooMuchPictures\",message:\"Impossible d'ajouter plus de 3 photos au service.\"});_context.next=62;break;case 18:if(!(newService.id!==null)){_context.next=39;break;}_context.next=21;return isSellerAllowedToModifyAndDeleteService(newService.id);case 21:isAllowed=_context.sent;if(!isAllowed){_context.next=37;break;}newServicesList=_toConsumableArray(services);index=newServicesList.findIndex(function(service){return service.id===newService.id;});serviceToUpload=_objectSpread({},newService);if(!isVariations)serviceToUpload.variations=[];newServicesList[index]=serviceToUpload;_context.next=30;return handleImagesFiles(serviceToUpload);case 30:service=_context.sent;setServices(newServicesList);_context.next=34;return addOneSellerService(service);case 34:clearInputs();setIsServiceAddedCorrectly(true);setTimeout(function(){setIsServiceAddedCorrectly(false);},2000);case 37:_context.next=60;break;case 39:if(!(services.length>=5)){_context.next=43;break;}setError({type:\"maxServices\",message:\"Vous avez déjà atteint le maximum d'offres sur votre boutique.\"});_context.next=60;break;case 43:reconstructedService=newService;reconstructedService.id=services.length;if(!isVariations)reconstructedService.variations=[];_context.next=48;return handleImagesFiles(reconstructedService);case 48:_service=_context.sent;_context.next=51;return addOneSellerService(_service);case 51:refDocID=_context.sent;if(!(seller.category===\"nourriture\")){_context.next=55;break;}_context.next=55;return addFoodTypeToSeller(_service.foodType!==undefined?_service.foodType:\"Aucun\");case 55:newServiceWithId=_objectSpread(_objectSpread({},_service),{},{id:refDocID});setServices([].concat(_toConsumableArray(services),[newServiceWithId]));clearInputs();setIsServiceAddedCorrectly(true);setTimeout(function(){setIsServiceAddedCorrectly(false);},2000);case 60:setIsFormOpen(false);window.scrollTo(0,0);case 62:setAddingService(false);case 63:case\"end\":return _context.stop();}}},_callee);}));return _handleAddService.apply(this,arguments);}function handleImagesFiles(_x){return _handleImagesFiles.apply(this,arguments);}function _handleImagesFiles(){_handleImagesFiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(service){var newServiceImageArray,newServiceArray,i,token,url,newImg;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newServiceImageArray=service.images.filter(function(image){return!image.localURL;});newServiceArray={description:service.description,id:service.id,name:service.name,images:newServiceImageArray,price:service.price,category:seller.category,variations:service.variations,foodType:service.foodType!==undefined?service.foodType:\"Aucun\"};i=0;case 3:if(!(i<service.images.length)){_context2.next=16;break;}if(!service.images[i].localURL){_context2.next=13;break;}token=Math.random().toString(36).substr(2,19);_context2.next=8;return handleUploadFile(service.images[i],token);case 8:url=_context2.sent;newImg={url:url,token:token};newServiceImageArray.push(newImg);newServiceArray.images=newServiceImageArray;pictureTokensToDelete.length>0&&deleteOldSellerPicture(pictureTokensToDelete,\"services\");case 13:i++;_context2.next=3;break;case 16:return _context2.abrupt(\"return\",newServiceArray);case 17:case\"end\":return _context2.stop();}}},_callee2);}));return _handleImagesFiles.apply(this,arguments);}function handleUploadFile(image,token){return new Promise(function(resolve,reject){var upload=storage.ref(\"services/\".concat(token)).put(image);upload.on(\"state_changed\",function(snapshot){},function(error){console.log(error);},function(){storage.ref(\"services\").child(token).getDownloadURL().then(function(url){resolve(url);}).catch(function(error){console.error(error);reject(error);});});});}function handleClickedAddService(){setIsVariations(false);clearInputs();setIsFormOpen(true);}function handleDeleteService(_x2){return _handleDeleteService.apply(this,arguments);}function _handleDeleteService(){_handleDeleteService=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(serviceID){var isAllowed,_services;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return isSellerAllowedToModifyAndDeleteService(serviceID);case 2:isAllowed=_context3.sent;if(!isAllowed){_context3.next=13;break;}if(!(seller.category===\"nourriture\")){_context3.next=7;break;}_context3.next=7;return deleteFoodTypeToSeller(serviceID);case 7:_context3.next=9;return deleteServiceOfSeller(serviceID);case 9:_context3.next=11;return getServicesOfCurrentSellerFromDB();case 11:_services=_context3.sent;setServices(_services);case 13:case\"end\":return _context3.stop();}}},_callee3);}));return _handleDeleteService.apply(this,arguments);}function handleVariationChanged(type,val,key){var newVariations=_toConsumableArray(newService.variations);var newVariation=_objectSpread({},newService.variations[key]);if(type===\"name\")newVariation.name=val;else if(type===\"price\")newVariation.price=val;newVariations[key]=newVariation;setNewService(_objectSpread(_objectSpread({},newService),{},{variations:newVariations}));}function handleDeleteVariation(key){var newVariations=_toConsumableArray(newService.variations);newVariations.splice(key,key+1);setNewService(_objectSpread(_objectSpread({},newService),{},{variations:newVariations}));setCurrentDeletingVariation(-1);setIsPopupConfirmDeleteOpened(false);}function handleFoodTypeChanged(e){var newNewService=_objectSpread({},newService);newNewService.foodType=e.target.value;setNewService(newNewService);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CSSTransition,{in:!isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsx(Loader,{})}),/*#__PURE__*/_jsx(CSSTransition,{in:isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"prest_Dashboard_Services\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"prest_dashboard_header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Header\",children:[/*#__PURE__*/_jsx(SubTitle,{type:\"big\",font:\"roboto-bold\",value:\"Modifications de vos services\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sur cette page, vous pourrez modifier les services que vous aurez cr\\xE9\\xE9s au pr\\xE9alable lors de votre inscription.\",/*#__PURE__*/_jsx(\"br\",{}),\"L'indication de vos services maximales autoris\\xE9s est en lien avec notre programme de parrainage.\",/*#__PURE__*/_jsx(\"br\",{}),\"Pour en savoir plus cliquez-ici\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"servicesListeContainer\",children:[services.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"detailsServiceItem active\",onClick:function onClick(){return handleServiceClicked(item);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"serviceItem\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgDetailsServiceItem\",children:/*#__PURE__*/_jsx(Image,{url:item.images[0].localURL||item.images[0].url})}),/*#__PURE__*/_jsxs(\"div\",{className:\"contentDetailsServiceItem\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[item.variations.length>0?item.variations[0].price:item.price,\",00\\u20AC\"]})]})]})},key),/*#__PURE__*/_jsxs(\"div\",{className:\"detailsServiceItem_buttons\",children:[/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return handleServiceClicked(item);},color:\"grey\",value:\"Modifier le service\"}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return handleDeleteService(item.id);},color:\"red\",value:\"Supprimer le service\"})]})]});}),services.length<5&&/*#__PURE__*/_jsx(\"label\",{onClick:function onClick(){return handleClickedAddService();},className:\"label-file\",children:\"+\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[services.length,\" / 5\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"addServiceWrapper \".concat(isFormOpen&&\"active\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section0\",children:[/*#__PURE__*/_jsx(Title,{value:\"Type de service:\",type:\"h3\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section0_serviceType\",children:[/*#__PURE__*/_jsx(Title,{onClick:function onClick(){return setIsVariations(false);},customClass:!isVariations&&\"active\",value:\"Service simple\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(Title,{onClick:function onClick(){newService.variations.length===0&&setNewService(_objectSpread(_objectSpread({},newService),{},{variations:[{name:\"\",price:0}]}));setIsVariations(true);},customClass:isVariations&&\"active\",value:\"Service variable\",type:\"h2\",font:\"roboto-medium\",align:\"left\"})]})]}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setIsFormOpen(false);},className:\"closeIcon\",children:/*#__PURE__*/_jsx(FaTimes,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section1 \".concat(isVariations?\"noFlex\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(Title,{value:\"Intitul\\xE9 du service\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Le nom de votre offre, par exemple : x5 fleurs de d\\xE9corations de table\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formField withoutMargin\",children:/*#__PURE__*/_jsx(\"input\",{className:error.type===\"name\"&&\"invalid\",id:\"serviceName\",type:\"text\",value:newService.name,onChange:function onChange(e){return setError({type:\"\",message:\"\"}),setNewService(_objectSpread(_objectSpread({},newService),{},{name:e.target.value}));}})})]}),!isVariations&&/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(Title,{value:\"Prix de votre service\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Prix\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formField withoutMargin\",children:/*#__PURE__*/_jsx(NumericInput,{format:euroFormat,className:\"form-control\",value:newService.price,min:0,max:1000,step:20,precision:0,size:9,mobile:true,onChange:function onChange(value){return setError({type:\"\",message:\"\"}),setNewService(_objectSpread(_objectSpread({},newService),{},{price:value}));}})})]})]}),seller.category===\"nourriture\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section1bis\",children:[/*#__PURE__*/_jsx(Title,{value:\"R\\xE9gime alimentaire\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsxs(RadioGroup,{row:true,\"aria-label\":\"gender\",name:\"row-radio-buttons-group\",onChange:handleFoodTypeChanged,value:newService.foodType!==undefined?newService.foodType:\"Aucun\",children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"Vegan\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Vegan\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"Casher\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Casher\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"Halal\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Halal\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"Vegetarien\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"V\\xE9g\\xE9tarien\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"Aucun\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Aucun\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section2\",children:[/*#__PURE__*/_jsx(Title,{value:\"Description de votre service\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"p\",{children:\"D\\xE9crivez au mieux le service que vous proposez au travers de cette offre.\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newService.description,onChange:function onChange(e){return setNewService(_objectSpread(_objectSpread({},newService),{},{description:e.target.value}));},className:error.type===\"description\"&&\"invalid\"})]}),isVariations>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section2bis\",children:[/*#__PURE__*/_jsx(Title,{value:\"Cr\\xE9ation des d\\xE9clinaisons\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"Prest-Step2-Section2bis_variations\",children:newService.variations.map(function(variation,key){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"variation_header\",children:[/*#__PURE__*/_jsx(Title,{value:\"Variation \".concat(key),type:\"h3\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setCurrentDeletingVariation(key);setIsPopupConfirmDeleteOpened(true);},color:\"error\",\"aria-label\":\"delete\",children:/*#__PURE__*/_jsx(DeleteIcon,{})}),isPopupConfirmDeleteOpened&&currentDeletingVariation===key&&/*#__PURE__*/_jsx(BoxConfirm,{type:\"delete\",position:\"bottom\",callback:function callback(){return handleDeleteVariation(key);},callbackClose:function callbackClose(){setCurrentDeletingVariation(-1);setIsPopupConfirmDeleteOpened(false);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section2bis_variation_item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(Title,{value:\"Intitul\\xE9 de la variation\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Le nom de votre variation, par exemple : 6 parts/6 personnes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formField withoutMargin\",children:/*#__PURE__*/_jsx(\"input\",{className:error.type===\"name\"&&\"invalid\",id:\"serviceName\",type:\"text\",value:newService.variations[key].name,onChange:function onChange(e){return handleVariationChanged(\"name\",e.target.value,key);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(Title,{value:\"Prix de la variation\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formField withoutMargin\",children:/*#__PURE__*/_jsx(NumericInput,{format:euroFormat,className:\"form-control\",value:newService.variations[key].price,min:20,max:1000,step:1,precision:0,size:9,mobile:true,onChange:function onChange(value){return handleVariationChanged(\"price\",value,key);}})})]})]})]});})}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return setNewService(_objectSpread(_objectSpread({},newService),{},{variations:[].concat(_toConsumableArray(newService.variations),[{name:\"\",price:0}])}));},color:\"blue\",value:\"Ajouter une variation\",marginTop:\"20px\",classname:\"flex\",iconMUIStart:/*#__PURE__*/_jsx(AddIcon,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section3\",children:[/*#__PURE__*/_jsx(Title,{value:\"Photos du services\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),(error.type===\"imageSize\"||error.type===\"imageType\"||error.type===\"noPictures\")&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error.message}),/*#__PURE__*/_jsx(\"p\",{children:\"Plusieurs photos peuvent \\xEAtre utile pour le client, cela lui permettra de voir votre service plus en d\\xE9tails.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"servicesListeContainer\",children:[newService.images.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return handleDeletePicture(item.localURL||item.url);},children:[/*#__PURE__*/_jsx(Image,{url:item.localURL||item.url}),/*#__PURE__*/_jsx(FaTrashAlt,{color:\"white\",size:32})]},key);}),newService.images.length<3&&/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",className:\"label-file\",children:\"+\"})]}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/jpeg, image/jpg, image/png\",id:\"file\",className:\"input-file\",type:\"file\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step2-Section3-bottom\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"2Mo max par photo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Type de fichiers accept\\xE9s : jpeg, jpg, PNG\"}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return document.getElementById('file').click();},color:\"grey\",value:\"Ajouter une image\",marginTop:\"20px\",disabled:newService.images.length>=4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonSaveOffer\",children:[error.type===\"maxServices\"&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error.message}),error.type===\"name\"&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error.message}),error.type===\"description\"&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error.message}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return setIsPopupConfirmSaveOpened(true);},color:\"green\",value:\"Sauvergarder cette offre\",marginTop:\"20px\",disabled:addingService}),isPopupConfirmSaveOpened&&/*#__PURE__*/_jsx(BoxConfirm,{type:\"save\",position:\"top\",callback:function callback(){return handleAddService();},callbackClose:function callbackClose(){return setIsPopupConfirmSaveOpened(false);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Prest-Step2-Section4\",children:/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(){return setStep(1);},color:\"orange\",width:\"400px\",value:\"Revenir au tableau de bord\"})})]})}),/*#__PURE__*/_jsx(CSSTransition,{in:isServiceAddedCorrectly,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"serviceAddedMessage inDashboard\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Annonce sauvegard\\xE9e avec succ\\xE8s\"})})})]});};export default Prest_Dashboard_Services;","map":{"version":3,"sources":["/Users/bonnieclyde/Desktop/Copie de Nivid (1)/src/components/Prest_Dashboard_Services.js"],"names":["React","useState","useEffect","useAuth","useFirebase","Title","SubTitle","ButtonSmall","ButtonLarge","Image","DeleteIcon","IconButton","AddIcon","NumericInput","useDetectClickOutside","CSSTransition","FaTrashAlt","FaTimes","Loader","Radio","RadioGroup","FormControlLabel","BoxConfirm","type","position","callback","callbackClose","refConfirmBox","onTriggered","initialNewService","name","images","description","price","variations","foodType","id","Prest_Dashboard_Services","setStep","firebaseContext","storage","message","error","setError","services","setServices","pictureTokensToDelete","setPictureTokensToDelete","isFormOpen","setIsFormOpen","isMounted","setIsMounted","newService","setNewService","addingService","setAddingService","isPopupConfirmDeleteOpened","setIsPopupConfirmDeleteOpened","isPopupConfirmSaveOpened","setIsPopupConfirmSaveOpened","currentDeletingVariation","setCurrentDeletingVariation","isServiceAddedCorrectly","setIsServiceAddedCorrectly","isVariations","setIsVariations","seller","addOneSellerService","getServicesOfCurrentSellerFromDB","deleteOldSellerPicture","isSellerAllowedToModifyAndDeleteService","deleteServiceOfSeller","addFoodTypeToSeller","deleteFoodTypeToSeller","then","euroFormat","num","handleChange","e","target","files","size","newURL","URL","createObjectURL","localURL","handleDeletePicture","item","newPictures","i","length","url","token","splice","handleServiceClicked","clearInputs","handleAddService","isAllowed","newServicesList","index","findIndex","service","serviceToUpload","handleImagesFiles","setTimeout","reconstructedService","refDocID","category","undefined","newServiceWithId","window","scrollTo","newServiceImageArray","filter","image","newServiceArray","Math","random","toString","substr","handleUploadFile","newImg","push","Promise","resolve","reject","upload","ref","put","on","snapshot","console","log","child","getDownloadURL","catch","handleClickedAddService","handleDeleteService","serviceID","handleVariationChanged","val","key","newVariations","newVariation","handleDeleteVariation","handleFoodTypeChanged","newNewService","value","map","variation","document","getElementById","click"],"mappings":"q8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,wBAAxB,CACA,OAASC,WAAT,KAA4B,wBAA5B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,qBAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,+BAAlB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CAEA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,OAASC,qBAAT,KAAsC,4BAAtC,CAEA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,UAAT,KAA2B,gBAA3B,CACA,OAASC,OAAT,KAAwB,gBAAxB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,gCAA7B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAiD,IAA9CC,CAAAA,IAA8C,MAA9CA,IAA8C,CAAxCC,QAAwC,MAAxCA,QAAwC,CAA9BC,QAA8B,MAA9BA,QAA8B,CAApBC,aAAoB,MAApBA,aAAoB,CAChE,GAAMC,CAAAA,aAAa,CAAGb,qBAAqB,CAAC,CAAEc,WAAW,CAAEF,aAAf,CAAD,CAA3C,CACA,mBAAO,aAAK,GAAG,CAAEC,aAAV,CAAyB,SAAS,sBAAgBH,QAAhB,CAAlC,wBACH,wBACKD,IAAI,GAAK,QAAT,EAAqB,4CAD1B,CAEKA,IAAI,GAAK,MAAT,EAAmB,4BAFxB,GADG,cAKH,sBACKA,IAAI,GAAK,QAAT,EAAqB,sDAD1B,CAEKA,IAAI,GAAK,MAAT,EAAmB,2BAFxB,GALG,cASH,qBACKA,IAAI,GAAK,QAAT,EAAqB,+BAD1B,CAEKA,IAAI,GAAK,MAAT,EAAmB,0FAFxB,GATG,cAcH,KAAC,WAAD,EACI,OAAO,CAAEE,QADb,CAEI,KAAK,CAAEF,IAAI,GAAK,QAAT,CAAoB,KAApB,CAA4B,OAFvC,CAGI,KAAK,CAAC,aAHV,CAII,SAAS,CAAC,MAJd,EAdG,GAAP,CAqBH,CAvBD,CAyBA,GAAMM,CAAAA,iBAAiB,CAAG,CACtB;AACAC,IAAI,CAAE,EAFgB,CAGtBC,MAAM,CAAE,EAHc,CAItBC,WAAW,CAAE,EAJS,CAKtBC,KAAK,CAAE,CALe,CAMtBC,UAAU,CAAE,EANU,CAOtBC,QAAQ,CAAE,OAPY,CAQtBC,EAAE,CAAE,IARkB,CAA1B,CAWA,GAAMC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,OAAiB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CAE9C,GAAMC,CAAAA,eAAe,CAAGnC,WAAW,EAAnC,CACA,GAAMoC,CAAAA,OAAO,CAAGD,eAAe,CAACC,OAAhB,EAAhB,CAH8C,cAKpBvC,QAAQ,CAAC,CAAEsB,IAAI,CAAE,EAAR,CAAYkB,OAAO,CAAE,EAArB,CAAD,CALY,wCAKvCC,KALuC,eAKhCC,QALgC,8BAOd1C,QAAQ,CAAC,EAAD,CAPM,yCAOvC2C,QAPuC,eAO7BC,WAP6B,8BAQY5C,QAAQ,CAAC,EAAD,CARpB,yCAQvC6C,qBARuC,eAQhBC,wBARgB,8BASV9C,QAAQ,CAAC,KAAD,CATE,yCASvC+C,UATuC,eAS3BC,aAT2B,8BAWZhD,QAAQ,CAAC,KAAD,CAXI,0CAWvCiD,SAXuC,gBAW5BC,YAX4B,gCAaVlD,QAAQ,CAAC4B,iBAAD,CAbE,2CAavCuB,UAbuC,gBAa3BC,aAb2B,gCAeJpD,QAAQ,CAAC,KAAD,CAfJ,2CAevCqD,aAfuC,gBAexBC,gBAfwB,gCAiBsBtD,QAAQ,CAAC,KAAD,CAjB9B,2CAiBvCuD,0BAjBuC,gBAiBXC,6BAjBW,gCAkBkBxD,QAAQ,CAAC,KAAD,CAlB1B,2CAkBvCyD,wBAlBuC,gBAkBbC,2BAlBa,gCAmBkB1D,QAAQ,CAAC,CAAC,CAAF,CAnB1B,2CAmBvC2D,wBAnBuC,gBAmBbC,2BAnBa,gCAqBgB5D,QAAQ,CAAC,KAAD,CArBxB,2CAqBvC6D,uBArBuC,gBAqBdC,0BArBc,gCAuBN9D,QAAQ,CAAC,KAAD,CAvBF,2CAuBvC+D,YAvBuC,gBAuBzBC,eAvByB,6BAiC1C9D,OAAO,EAjCmC,CAyBtC+D,MAzBsC,UAyBtCA,MAzBsC,CA0B1CC,mBA1B0C,UA0B1CA,mBA1B0C,CA2B1CC,gCA3B0C,UA2B1CA,gCA3B0C,CA4B1CC,sBA5B0C,UA4B1CA,sBA5B0C,CA6B1CC,uCA7B0C,UA6B1CA,uCA7B0C,CA8B1CC,qBA9B0C,UA8B1CA,qBA9B0C,CA+B1CC,mBA/B0C,UA+B1CA,mBA/B0C,CAgC1CC,sBAhC0C,UAgC1CA,sBAhC0C,CAmC9CvE,SAAS,CAAC,UAAM,CACZkE,gCAAgC,GAAGM,IAAnC,CAAwC,SAAA9B,QAAQ,CAAI,CAChDC,WAAW,CAACD,QAAD,CAAX,CACAO,YAAY,CAAC,IAAD,CAAZ,CACH,CAHD,EAIH,CALQ,CAKN,EALM,CAAT,CAQA,QAASwB,CAAAA,UAAT,CAAoBC,GAApB,CAAyB,CAAE,MAAOA,CAAAA,GAAG,CAAG,GAAb,CAAmB,CAE9C,QAASC,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACrB,GAAMvD,CAAAA,IAAI,CAAGuD,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBzD,IAA/B,CACA,GAAM0D,CAAAA,IAAI,CAAGH,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBC,IAA/B,CACA,GAAI1D,IAAI,GAAK,WAAT,EAAwBA,IAAI,GAAK,YAAjC,EAAiDA,IAAI,GAAK,WAA9D,CAA2E,CACvEoB,QAAQ,CAAC,CAAEpB,IAAI,CAAE,WAAR,CAAqBkB,OAAO,CAAE,oDAA9B,CAAD,CAAR,CACH,CAFD,IAGK,IAAIwC,IAAI,CAAG,OAAX,CAAoB,CACrBtC,QAAQ,CAAC,CAAEpB,IAAI,CAAE,WAAR,CAAqBkB,OAAO,CAAE,+BAA9B,CAAD,CAAR,CACH,CAFI,IAGA,CACD,GAAMyC,CAAAA,MAAM,CAAGC,GAAG,CAACC,eAAJ,CAAoBN,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB,CAAf,CACAF,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBK,QAAlB,CAA6BH,MAA7B,CACA7B,aAAa,gCAAMD,UAAN,MAAkBrB,MAAM,8BAAMqB,UAAU,CAACrB,MAAjB,GAAyB+C,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAzB,EAAxB,GAAb,CACArC,QAAQ,CAAC,CAAEpB,IAAI,CAAE,EAAR,CAAYkB,OAAO,CAAE,EAArB,CAAD,CAAR,CACH,CACJ,CAED,QAAS6C,CAAAA,mBAAT,CAA6BC,IAA7B,CAAmC,CAC/B,GAAMC,CAAAA,WAAW,oBAAOpC,UAAU,CAACrB,MAAlB,CAAjB,CACA,IAAK,GAAI0D,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,WAAW,CAACE,MAAhC,CAAwCD,CAAC,EAAzC,CAA6C,CACzC,GAAID,WAAW,CAACC,CAAD,CAAX,CAAeJ,QAAf,GAA4BE,IAA5B,EAAoCC,WAAW,CAACC,CAAD,CAAX,CAAeE,GAAf,GAAuBJ,IAA/D,CAAqE,CACjE,GAAIC,WAAW,CAACC,CAAD,CAAX,CAAeE,GAAf,GAAuBJ,IAA3B,CAAiC,CAC7BxC,wBAAwB,8BAAKD,qBAAL,GAA4B0C,WAAW,CAACC,CAAD,CAAX,CAAeG,KAA3C,GAAxB,CACH,CACDJ,WAAW,CAACK,MAAZ,CAAmBJ,CAAnB,CAAsB,CAAtB,EACH,CACJ,CACDpC,aAAa,gCAAMD,UAAN,MAAkBrB,MAAM,CAAEyD,WAA1B,GAAb,CACH,CAED,QAASM,CAAAA,oBAAT,CAA8BP,IAA9B,CAAoC,CAChCtC,aAAa,CAAC,IAAD,CAAb,CAEAgB,eAAe,CAACsB,IAAI,CAACrD,UAAL,CAAgBwD,MAAhB,CAAyB,CAAzB,CAA6B,IAA7B,CAAoC,KAArC,CAAf,CACA,GAAItC,UAAU,CAAChB,EAAX,GAAkBmD,IAAI,CAACnD,EAA3B,CAA+B,CAC3B,OACH,CACD2D,WAAW,GACX1C,aAAa,CAACkC,IAAD,CAAb,CACH,CAED,QAASQ,CAAAA,WAAT,EAAuB,CACnB1C,aAAa,CAACxB,iBAAD,CAAb,CACAc,QAAQ,CAAC,CAAEpB,IAAI,CAAE,EAAR,CAAYkB,OAAO,CAAE,EAArB,CAAD,CAAR,CACH,CAzF6C,QA2F/BuD,CAAAA,gBA3F+B,0JA2F9C,uPACIrC,2BAA2B,CAAC,KAAD,CAA3B,CACAJ,gBAAgB,CAAC,IAAD,CAAhB,CAFJ,KAGQH,UAAU,CAACtB,IAAX,CAAgB4D,MAAhB,CAAyB,CAHjC,0BAIQ/C,QAAQ,CAAC,CAAEpB,IAAI,CAAE,MAAR,CAAgBkB,OAAO,CAAE,2DAAzB,CAAD,CAAR,CAJR,mCAMaW,UAAU,CAACpB,WAAX,CAAuB0D,MAAvB,CAAgC,EAAhC,EAAsCtC,UAAU,CAACpB,WAAX,CAAuB0D,MAAvB,CAAgC,GANnF,2BAOQ/C,QAAQ,CAAC,CAAEpB,IAAI,CAAE,aAAR,CAAuBkB,OAAO,CAAE,8DAAhC,CAAD,CAAR,CAPR,oCASaW,UAAU,CAACrB,MAAX,CAAkB2D,MAAlB,GAA6B,CAT1C,2BAUQ/C,QAAQ,CAAC,CAAEpB,IAAI,CAAE,YAAR,CAAsBkB,OAAO,CAAE,yDAA/B,CAAD,CAAR,CAVR,oCAYaW,UAAU,CAACrB,MAAX,CAAkB2D,MAAlB,CAA2B,CAZxC,2BAaQ/C,QAAQ,CAAC,CAAEpB,IAAI,CAAE,iBAAR,CAA2BkB,OAAO,CAAE,mDAApC,CAAD,CAAR,CAbR,oCAmBYW,UAAU,CAAChB,EAAX,GAAkB,IAnB9B,kDAoBoCkC,CAAAA,uCAAuC,CAAClB,UAAU,CAAChB,EAAZ,CApB3E,SAoBkB6D,SApBlB,mBAqBgBA,SArBhB,0BAsBsBC,eAtBtB,oBAsB4CtD,QAtB5C,EAuBoBuD,KAvBpB,CAuB4BD,eAAe,CAACE,SAAhB,CAA0B,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACjE,EAAR,GAAegB,UAAU,CAAChB,EAA9B,EAAjC,CAvB5B,CAwBsBkE,eAxBtB,kBAwB6ClD,UAxB7C,EAyBgB,GAAI,CAACY,YAAL,CAAmBsC,eAAe,CAACpE,UAAhB,CAA6B,EAA7B,CACnBgE,eAAe,CAACC,KAAD,CAAf,CAAyBG,eAAzB,CA1BhB,uBA4BsCC,CAAAA,iBAAiB,CAACD,eAAD,CA5BvD,SA4BsBD,OA5BtB,eA6BgBxD,WAAW,CAACqD,eAAD,CAAX,CA7BhB,uBA8BsB/B,CAAAA,mBAAmB,CAACkC,OAAD,CA9BzC,SA+BgBN,WAAW,GACXhC,0BAA0B,CAAC,IAAD,CAA1B,CACAyC,UAAU,CAAC,UAAM,CACbzC,0BAA0B,CAAC,KAAD,CAA1B,CACH,CAFS,CAEP,IAFO,CAAV,CAjChB,4CAwCgBnB,QAAQ,CAAC8C,MAAT,EAAmB,CAxCnC,2BAyCgB/C,QAAQ,CAAC,CAAEpB,IAAI,CAAE,aAAR,CAAuBkB,OAAO,CAAE,gEAAhC,CAAD,CAAR,CAzChB,+BA4CsBgE,oBA5CtB,CA4C6CrD,UA5C7C,CA6CgBqD,oBAAoB,CAACrE,EAArB,CAA0BQ,QAAQ,CAAC8C,MAAnC,CACA,GAAI,CAAC1B,YAAL,CAAmByC,oBAAoB,CAACvE,UAArB,CAAkC,EAAlC,CA9CnC,uBAgDsCqE,CAAAA,iBAAiB,CAACE,oBAAD,CAhDvD,SAgDsBJ,QAhDtB,sCAiDuClC,CAAAA,mBAAmB,CAACkC,QAAD,CAjD1D,SAiDsBK,QAjDtB,oBAkDoBxC,MAAM,CAACyC,QAAP,GAAoB,YAlDxC,kDAmD0BnC,CAAAA,mBAAmB,CAAC6B,QAAO,CAAClE,QAAR,GAAqByE,SAArB,CAAiCP,QAAO,CAAClE,QAAzC,CAAoD,OAArD,CAnD7C,SAoDsB0E,gBApDtB,gCAoD8CR,QApD9C,MAoDuDjE,EAAE,CAAEsE,QApD3D,GAqDgB7D,WAAW,8BAAKD,QAAL,GAAeiE,gBAAf,GAAX,CACAd,WAAW,GACXhC,0BAA0B,CAAC,IAAD,CAA1B,CACAyC,UAAU,CAAC,UAAM,CACbzC,0BAA0B,CAAC,KAAD,CAA1B,CACH,CAFS,CAEP,IAFO,CAAV,CAxDhB,QA6DQd,aAAa,CAAC,KAAD,CAAb,CACA6D,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EA9DR,QAgEIxD,gBAAgB,CAAC,KAAD,CAAhB,CAhEJ,uDA3F8C,2DA8J/BgD,CAAAA,iBA9J+B,+JA8J9C,kBAAiCF,OAAjC,kLACQW,oBADR,CAC+BX,OAAO,CAACtE,MAAR,CAAekF,MAAf,CAAsB,SAAAC,KAAK,QAAI,CAACA,KAAK,CAAC7B,QAAX,EAA3B,CAD/B,CAEQ8B,eAFR,CAE0B,CAClBnF,WAAW,CAAEqE,OAAO,CAACrE,WADH,CAElBI,EAAE,CAAEiE,OAAO,CAACjE,EAFM,CAGlBN,IAAI,CAAEuE,OAAO,CAACvE,IAHI,CAIlBC,MAAM,CAAEiF,oBAJU,CAKlB/E,KAAK,CAAEoE,OAAO,CAACpE,KALG,CAMlB0E,QAAQ,CAAEzC,MAAM,CAACyC,QANC,CAOlBzE,UAAU,CAAEmE,OAAO,CAACnE,UAPF,CAQlBC,QAAQ,CAAEkE,OAAO,CAAClE,QAAR,GAAqByE,SAArB,CAAiCP,OAAO,CAAClE,QAAzC,CAAoD,OAR5C,CAF1B,CAaasD,CAbb,CAaiB,CAbjB,aAaoBA,CAAC,CAAGY,OAAO,CAACtE,MAAR,CAAe2D,MAbvC,gCAcYW,OAAO,CAACtE,MAAR,CAAe0D,CAAf,EAAkBJ,QAd9B,2BAekBO,KAflB,CAe0BwB,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,CAAqC,EAArC,CAf1B,wBAgB8BC,CAAAA,gBAAgB,CAACnB,OAAO,CAACtE,MAAR,CAAe0D,CAAf,CAAD,CAAoBG,KAApB,CAhB9C,QAgBkBD,GAhBlB,gBAiBgB8B,MAjBhB,CAiByB,CAAE9B,GAAG,CAAEA,GAAP,CAAYC,KAAK,CAAEA,KAAnB,CAjBzB,CAkBYoB,oBAAoB,CAACU,IAArB,CAA0BD,MAA1B,EACAN,eAAe,CAACpF,MAAhB,CAAyBiF,oBAAzB,CACAlE,qBAAqB,CAAC4C,MAAtB,CAA+B,CAA/B,EAAoCrB,sBAAsB,CAACvB,qBAAD,CAAwB,UAAxB,CAA1D,CApBZ,QAa+C2C,CAAC,EAbhD,iEAuBW0B,eAvBX,2DA9J8C,oDAwL9C,QAASK,CAAAA,gBAAT,CAA0BN,KAA1B,CAAiCtB,KAAjC,CAAwC,CACpC,MAAO,IAAI+B,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACpC,GAAMC,CAAAA,MAAM,CAAGtF,OAAO,CAACuF,GAAR,oBAAwBnC,KAAxB,GAAiCoC,GAAjC,CAAqCd,KAArC,CAAf,CACAY,MAAM,CAACG,EAAP,CACI,eADJ,CACqB,SAAAC,QAAQ,CAAI,CAAG,CADpC,CAEI,SAAAxF,KAAK,CAAI,CACLyF,OAAO,CAACC,GAAR,CAAY1F,KAAZ,EACH,CAJL,CAIO,UAAM,CACLF,OAAO,CACFuF,GADL,CACS,UADT,EAEKM,KAFL,CAEWzC,KAFX,EAGK0C,cAHL,GAIK5D,IAJL,CAIU,SAAAiB,GAAG,CAAI,CACTiC,OAAO,CAACjC,GAAD,CAAP,CACH,CANL,EAOK4C,KAPL,CAOW,SAAA7F,KAAK,CAAI,CACZyF,OAAO,CAACzF,KAAR,CAAcA,KAAd,EACAmF,MAAM,CAACnF,KAAD,CAAN,CACH,CAVL,EAWH,CAhBL,EAkBH,CApBM,CAAP,CAqBH,CAED,QAAS8F,CAAAA,uBAAT,EAAmC,CAC/BvE,eAAe,CAAC,KAAD,CAAf,CACA8B,WAAW,GACX9C,aAAa,CAAC,IAAD,CAAb,CACH,CApN6C,QAsN/BwF,CAAAA,mBAtN+B,sKAsN9C,kBAAmCC,SAAnC,qKAC4BpE,CAAAA,uCAAuC,CAACoE,SAAD,CADnE,QACUzC,SADV,oBAEQA,SAFR,gCAGY/B,MAAM,CAACyC,QAAP,GAAoB,YAHhC,kDAIkBlC,CAAAA,sBAAsB,CAACiE,SAAD,CAJxC,+BAKcnE,CAAAA,qBAAqB,CAACmE,SAAD,CALnC,gCAM+BtE,CAAAA,gCAAgC,EAN/D,SAMcxB,SANd,gBAOQC,WAAW,CAACD,SAAD,CAAX,CAPR,yDAtN8C,sDAiO9C,QAAS+F,CAAAA,sBAAT,CAAgCpH,IAAhC,CAAsCqH,GAAtC,CAA2CC,GAA3C,CAAgD,CAC5C,GAAIC,CAAAA,aAAa,oBAAO1F,UAAU,CAAClB,UAAlB,CAAjB,CACA,GAAI6G,CAAAA,YAAY,kBAAQ3F,UAAU,CAAClB,UAAX,CAAsB2G,GAAtB,CAAR,CAAhB,CACA,GAAItH,IAAI,GAAK,MAAb,CAAqBwH,YAAY,CAACjH,IAAb,CAAoB8G,GAApB,CAArB,IACK,IAAIrH,IAAI,GAAK,OAAb,CAAsBwH,YAAY,CAAC9G,KAAb,CAAqB2G,GAArB,CAC3BE,aAAa,CAACD,GAAD,CAAb,CAAqBE,YAArB,CACA1F,aAAa,gCAAMD,UAAN,MAAkBlB,UAAU,CAAE4G,aAA9B,GAAb,CACH,CAED,QAASE,CAAAA,qBAAT,CAA+BH,GAA/B,CAAoC,CAChC,GAAIC,CAAAA,aAAa,oBAAO1F,UAAU,CAAClB,UAAlB,CAAjB,CACA4G,aAAa,CAACjD,MAAd,CAAqBgD,GAArB,CAA0BA,GAAG,CAAG,CAAhC,EACAxF,aAAa,gCAAMD,UAAN,MAAkBlB,UAAU,CAAE4G,aAA9B,GAAb,CACAjF,2BAA2B,CAAC,CAAC,CAAF,CAA3B,CACAJ,6BAA6B,CAAC,KAAD,CAA7B,CACH,CAED,QAASwF,CAAAA,qBAAT,CAA+BnE,CAA/B,CAAkC,CAC9B,GAAIoE,CAAAA,aAAa,kBAAQ9F,UAAR,CAAjB,CACA8F,aAAa,CAAC/G,QAAd,CAAyB2C,CAAC,CAACC,MAAF,CAASoE,KAAlC,CACA9F,aAAa,CAAC6F,aAAD,CAAb,CACH,CAED,mBACI,wCACI,KAAC,aAAD,EACI,EAAE,CAAE,CAAChG,SADT,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,KAAC,MAAD,IANJ,EADJ,cAUI,KAAC,aAAD,EACI,EAAE,CAAEA,SADR,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,aAAK,SAAS,CAAC,0BAAf,wBAEI,gBAAS,SAAS,CAAC,wBAAnB,uBACI,aAAK,SAAS,CAAC,oBAAf,wBACI,KAAC,QAAD,EAAU,IAAI,CAAC,KAAf,CAAqB,IAAI,CAAC,aAA1B,CAAwC,KAAK,CAAC,+BAA9C,EADJ,cAEI,6JACgB,aADhB,oHAEoG,aAFpG,qCAFJ,cAMI,aAAK,SAAS,CAAC,wBAAf,WAEQN,QAAQ,CAACwG,GAAT,CAAa,SAAC7D,IAAD,CAAOsD,GAAP,CAAe,CACxB,mBACI,oCACI,YACI,SAAS,CAAC,2BADd,CAEI,OAAO,CAAE,yBAAM/C,CAAAA,oBAAoB,CAACP,IAAD,CAA1B,EAFb,uBAKI,aAAK,SAAS,CAAC,aAAf,wBACI,YAAK,SAAS,CAAC,uBAAf,uBACI,KAAC,KAAD,EAAO,GAAG,CAAEA,IAAI,CAACxD,MAAL,CAAY,CAAZ,EAAesD,QAAf,EAA2BE,IAAI,CAACxD,MAAL,CAAY,CAAZ,EAAe4D,GAAtD,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,2BAAf,wBACI,UAAG,SAAS,CAAC,OAAb,UAAsBJ,IAAI,CAACzD,IAA3B,EADJ,cAEI,qBAAIyD,IAAI,CAACrD,UAAL,CAAgBwD,MAAhB,CAAyB,CAAzB,CAA6BH,IAAI,CAACrD,UAAL,CAAgB,CAAhB,EAAmBD,KAAhD,CAAwDsD,IAAI,CAACtD,KAAjE,eAFJ,GAJJ,GALJ,EAGS4G,GAHT,CADJ,cAgBI,aAAK,SAAS,CAAC,4BAAf,wBACI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAM/C,CAAAA,oBAAoB,CAACP,IAAD,CAA1B,EADb,CAEI,KAAK,CAAC,MAFV,CAGI,KAAK,CAAC,qBAHV,EADJ,cAMI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMkD,CAAAA,mBAAmB,CAAClD,IAAI,CAACnD,EAAN,CAAzB,EADb,CAEI,KAAK,CAAC,KAFV,CAGI,KAAK,CAAC,sBAHV,EANJ,GAhBJ,GADJ,CA+BH,CAhCD,CAFR,CAmCKQ,QAAQ,CAAC8C,MAAT,CAAkB,CAAlB,eAAuB,cAAO,OAAO,CAAE,yBAAM8C,CAAAA,uBAAuB,EAA7B,EAAhB,CAAiD,SAAS,CAAC,YAA3D,eAnC5B,GANJ,cA2CI,wBAAO5F,QAAQ,CAAC8C,MAAhB,UA3CJ,GADJ,EAFJ,cAiDI,YAAK,SAAS,CAAC,SAAf,EAjDJ,cAmDI,iBAAS,SAAS,6BAAuB1C,UAAU,EAAI,QAArC,CAAlB,wBACI,aAAK,SAAS,CAAC,sBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,kBAAb,CAAgC,IAAI,CAAC,IAArC,CAA0C,IAAI,CAAC,eAA/C,CAA+D,KAAK,CAAC,MAArE,EADJ,cAEI,aAAK,SAAS,CAAC,kCAAf,wBACI,KAAC,KAAD,EAAO,OAAO,CAAE,yBAAMiB,CAAAA,eAAe,CAAC,KAAD,CAArB,EAAhB,CAA8C,WAAW,CAAE,CAACD,YAAD,EAAiB,QAA5E,CAAsF,KAAK,CAAC,gBAA5F,CAA6G,IAAI,CAAC,IAAlH,CAAuH,IAAI,CAAC,eAA5H,CAA4I,KAAK,CAAC,MAAlJ,EADJ,cAEI,KAAC,KAAD,EAAO,OAAO,CAAE,kBAAM,CAAEZ,UAAU,CAAClB,UAAX,CAAsBwD,MAAtB,GAAiC,CAAjC,EAAsCrC,aAAa,gCAAMD,UAAN,MAAkBlB,UAAU,CAAE,CAAC,CAAEJ,IAAI,CAAE,EAAR,CAAYG,KAAK,CAAE,CAAnB,CAAD,CAA9B,GAAnD,CAA8GgC,eAAe,CAAC,IAAD,CAAf,CAAuB,CAA7J,CAA+J,WAAW,CAAED,YAAY,EAAI,QAA5L,CAAsM,KAAK,CAAC,kBAA5M,CAA+N,IAAI,CAAC,IAApO,CAAyO,IAAI,CAAC,eAA9O,CAA8P,KAAK,CAAC,MAApQ,EAFJ,GAFJ,GADJ,cAQI,aAAM,OAAO,CAAE,yBAAMf,CAAAA,aAAa,CAAC,KAAD,CAAnB,EAAf,CAA2C,SAAS,CAAC,WAArD,uBACI,KAAC,OAAD,IADJ,EARJ,cAWI,aAAK,SAAS,gCAA0Be,YAAY,CAAG,QAAH,CAAc,EAApD,CAAd,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,wBAAb,CAAmC,IAAI,CAAC,IAAxC,CAA6C,IAAI,CAAC,eAAlD,CAAkE,KAAK,CAAC,MAAxE,EADJ,cAEI,gGAFJ,cAGI,YAAK,SAAS,CAAC,yBAAf,uBACI,cACI,SAAS,CAAEtB,KAAK,CAACnB,IAAN,GAAe,MAAf,EAAyB,SADxC,CAEI,EAAE,CAAC,aAFP,CAGI,IAAI,CAAC,MAHT,CAII,KAAK,CAAE6B,UAAU,CAACtB,IAJtB,CAKI,QAAQ,CAAE,kBAACgD,CAAD,QAAQnC,CAAAA,QAAQ,CAAC,CAAEpB,IAAI,CAAE,EAAR,CAAYkB,OAAO,CAAE,EAArB,CAAD,CAAR,CAAqCY,aAAa,gCAAMD,UAAN,MAAkBtB,IAAI,CAAEgD,CAAC,CAACC,MAAF,CAASoE,KAAjC,GAA1D,EALd,EADJ,EAHJ,GADJ,CAcK,CAACnF,YAAD,eACG,aAAK,SAAS,CAAC,OAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,uBAAb,CAAqC,IAAI,CAAC,IAA1C,CAA+C,IAAI,CAAC,eAApD,CAAoE,KAAK,CAAC,MAA1E,EADJ,cAEI,2BAFJ,cAGI,YAAK,SAAS,CAAC,yBAAf,uBACI,KAAC,YAAD,EACI,MAAM,CAAEW,UADZ,CAEI,SAAS,CAAC,cAFd,CAGI,KAAK,CAAEvB,UAAU,CAACnB,KAHtB,CAII,GAAG,CAAE,CAJT,CAKI,GAAG,CAAE,IALT,CAMI,IAAI,CAAE,EANV,CAOI,SAAS,CAAE,CAPf,CAQI,IAAI,CAAE,CARV,CASI,MAAM,KATV,CAUI,QAAQ,CAAE,kBAACkH,KAAD,QAAYxG,CAAAA,QAAQ,CAAC,CAAEpB,IAAI,CAAE,EAAR,CAAYkB,OAAO,CAAE,EAArB,CAAD,CAAR,CAAqCY,aAAa,gCAAMD,UAAN,MAAkBnB,KAAK,CAAEkH,KAAzB,GAA9D,EAVd,EADJ,EAHJ,GAfR,GAXJ,CA+CQjF,MAAM,CAACyC,QAAP,GAAoB,YAApB,eACA,aAAK,SAAS,CAAC,yBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,uBAAb,CAAkC,IAAI,CAAC,IAAvC,CAA4C,IAAI,CAAC,eAAjD,CAAiE,KAAK,CAAC,MAAvE,EADJ,cAEI,MAAC,UAAD,EACI,GAAG,KADP,CAEI,aAAW,QAFf,CAGI,IAAI,CAAC,yBAHT,CAII,QAAQ,CAAEsC,qBAJd,CAKI,KAAK,CAAE7F,UAAU,CAACjB,QAAX,GAAwByE,SAAxB,CAAoCxD,UAAU,CAACjB,QAA/C,CAA0D,OALrE,wBAOI,KAAC,gBAAD,EAAkB,KAAK,CAAC,OAAxB,CAAgC,OAAO,cAAE,KAAC,KAAD,IAAzC,CAAoD,KAAK,CAAC,OAA1D,EAPJ,cAQI,KAAC,gBAAD,EAAkB,KAAK,CAAC,QAAxB,CAAiC,OAAO,cAAE,KAAC,KAAD,IAA1C,CAAqD,KAAK,CAAC,QAA3D,EARJ,cASI,KAAC,gBAAD,EAAkB,KAAK,CAAC,OAAxB,CAAgC,OAAO,cAAE,KAAC,KAAD,IAAzC,CAAoD,KAAK,CAAC,OAA1D,EATJ,cAUI,KAAC,gBAAD,EAAkB,KAAK,CAAC,YAAxB,CAAqC,OAAO,cAAE,KAAC,KAAD,IAA9C,CAAyD,KAAK,CAAC,kBAA/D,EAVJ,cAWI,KAAC,gBAAD,EAAkB,KAAK,CAAC,OAAxB,CAAgC,OAAO,cAAE,KAAC,KAAD,IAAzC,CAAoD,KAAK,CAAC,OAA1D,EAXJ,GAFJ,GAhDR,cAmEI,aAAK,SAAS,CAAC,sBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,8BAAb,CAA4C,IAAI,CAAC,IAAjD,CAAsD,IAAI,CAAC,eAA3D,CAA2E,KAAK,CAAC,MAAjF,EADJ,cAEI,mGAFJ,cAGI,iBACI,KAAK,CAAEiB,UAAU,CAACpB,WADtB,CAEI,QAAQ,CAAE,kBAAC8C,CAAD,QAAOzB,CAAAA,aAAa,gCAAMD,UAAN,MAAkBpB,WAAW,CAAE8C,CAAC,CAACC,MAAF,CAASoE,KAAxC,GAApB,EAFd,CAGI,SAAS,CAAEzG,KAAK,CAACnB,IAAN,GAAe,aAAf,EAAgC,SAH/C,EAHJ,GAnEJ,CA8EKyC,YAAY,CAAG,CAAf,eACG,aAAK,SAAS,CAAC,yBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,iCAAb,CAAyC,IAAI,CAAC,IAA9C,CAAmD,IAAI,CAAC,eAAxD,CAAwE,KAAK,CAAC,MAA9E,EADJ,cAEI,YAAK,SAAS,CAAC,oCAAf,UACKZ,UAAU,CAAClB,UAAX,CAAsBkH,GAAtB,CAA0B,SAACC,SAAD,CAAYR,GAAZ,CAAoB,CAC3C,mBAAO,wCACH,aAAK,SAAS,CAAC,kBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,qBAAeA,GAAf,CAAZ,CAAkC,IAAI,CAAC,IAAvC,CAA4C,IAAI,CAAC,eAAjD,CAAiE,KAAK,CAAC,MAAvE,EADJ,cAEI,KAAC,UAAD,EACI,OAAO,CAAE,kBAAM,CAAEhF,2BAA2B,CAACgF,GAAD,CAA3B,CAAkCpF,6BAA6B,CAAC,IAAD,CAA7B,CAAqC,CAD5F,CAEI,KAAK,CAAC,OAFV,CAGI,aAAW,QAHf,uBAKI,KAAC,UAAD,IALJ,EAFJ,CASMD,0BAA0B,EAAII,wBAAwB,GAAKiF,GAA5D,eACG,KAAC,UAAD,EACI,IAAI,CAAC,QADT,CAEI,QAAQ,CAAC,QAFb,CAGI,QAAQ,CAAE,0BAAMG,CAAAA,qBAAqB,CAACH,GAAD,CAA3B,EAHd,CAII,aAAa,CAAE,wBAAM,CAAEhF,2BAA2B,CAAC,CAAC,CAAF,CAA3B,CAAiCJ,6BAA6B,CAAC,KAAD,CAA7B,CAAsC,CAJlG,EAVR,GADG,cAmBH,aAAK,SAAS,CAAC,wCAAf,wBAAwD,aAAK,SAAS,CAAC,MAAf,wBACpD,KAAC,KAAD,EAAO,KAAK,CAAC,6BAAb,CAAwC,IAAI,CAAC,IAA7C,CAAkD,IAAI,CAAC,eAAvD,CAAuE,KAAK,CAAC,MAA7E,EADoD,cAEpD,mFAFoD,cAGpD,YAAK,SAAS,CAAC,yBAAf,uBACI,cACI,SAAS,CAAEf,KAAK,CAACnB,IAAN,GAAe,MAAf,EAAyB,SADxC,CAEI,EAAE,CAAC,aAFP,CAGI,IAAI,CAAC,MAHT,CAII,KAAK,CAAE6B,UAAU,CAAClB,UAAX,CAAsB2G,GAAtB,EAA2B/G,IAJtC,CAKI,QAAQ,CAAE,kBAACgD,CAAD,QAAO6D,CAAAA,sBAAsB,CAAC,MAAD,CAAS7D,CAAC,CAACC,MAAF,CAASoE,KAAlB,CAAyBN,GAAzB,CAA7B,EALd,EADJ,EAHoD,GAAxD,cAaI,aAAK,SAAS,CAAC,OAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,sBAAb,CAAoC,IAAI,CAAC,IAAzC,CAA8C,IAAI,CAAC,eAAnD,CAAmE,KAAK,CAAC,MAAzE,EADJ,cAEI,YAAK,SAAS,CAAC,yBAAf,uBACI,KAAC,YAAD,EACI,MAAM,CAAElE,UADZ,CAEI,SAAS,CAAC,cAFd,CAGI,KAAK,CAAEvB,UAAU,CAAClB,UAAX,CAAsB2G,GAAtB,EAA2B5G,KAHtC,CAII,GAAG,CAAE,EAJT,CAKI,GAAG,CAAE,IALT,CAMI,IAAI,CAAE,CANV,CAOI,SAAS,CAAE,CAPf,CAQI,IAAI,CAAE,CARV,CASI,MAAM,KATV,CAUI,QAAQ,CAAE,kBAACkH,KAAD,QAAWR,CAAAA,sBAAsB,CAAC,OAAD,CAAUQ,KAAV,CAAiBN,GAAjB,CAAjC,EAVd,EADJ,EAFJ,GAbJ,GAnBG,GAAP,CAmDH,CApDA,CADL,EAFJ,cAyDI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMxF,CAAAA,aAAa,gCAAMD,UAAN,MAAkBlB,UAAU,8BAAMkB,UAAU,CAAClB,UAAjB,GAA6B,CAAEJ,IAAI,CAAE,EAAR,CAAYG,KAAK,CAAE,CAAnB,CAA7B,EAA5B,GAAnB,EADb,CAEI,KAAK,CAAC,MAFV,CAGI,KAAK,CAAC,uBAHV,CAII,SAAS,CAAC,MAJd,CAKI,SAAS,CAAC,MALd,CAMI,YAAY,cAAE,KAAC,OAAD,IANlB,EAzDJ,GA/ER,cAmJI,aAAK,SAAS,CAAC,sBAAf,wBACI,KAAC,KAAD,EAAO,KAAK,CAAC,oBAAb,CAAkC,IAAI,CAAC,IAAvC,CAA4C,IAAI,CAAC,eAAjD,CAAiE,KAAK,CAAC,MAAvE,EADJ,CAEK,CAACS,KAAK,CAACnB,IAAN,GAAe,WAAf,EAA8BmB,KAAK,CAACnB,IAAN,GAAe,WAA7C,EAA4DmB,KAAK,CAACnB,IAAN,GAAe,YAA5E,gBAA6F,UAAG,SAAS,CAAC,cAAb,UAA6BmB,KAAK,CAACD,OAAnC,EAFlG,cAGI,0IAHJ,cAII,aAAK,SAAS,CAAC,wBAAf,WACKW,UAAU,CAACrB,MAAX,CAAkBqH,GAAlB,CAAsB,SAAC7D,IAAD,CAAOsD,GAAP,CAAe,CAAE,mBAAO,aAAe,OAAO,CAAE,yBAAMvD,CAAAA,mBAAmB,CAACC,IAAI,CAACF,QAAL,EAAiBE,IAAI,CAACI,GAAvB,CAAzB,EAAxB,wBAA8E,KAAC,KAAD,EAAO,GAAG,CAAEJ,IAAI,CAACF,QAAL,EAAiBE,IAAI,CAACI,GAAlC,EAA9E,cAAuH,KAAC,UAAD,EAAY,KAAK,CAAE,OAAnB,CAA4B,IAAI,CAAE,EAAlC,EAAvH,GAAUkD,GAAV,CAAP,CAA8K,CAArN,CADL,CAEKzF,UAAU,CAACrB,MAAX,CAAkB2D,MAAlB,CAA2B,CAA3B,eAAgC,cAAO,OAAO,CAAC,MAAf,CAAsB,SAAS,CAAC,YAAhC,eAFrC,GAJJ,cASI,cAAO,MAAM,CAAC,kCAAd,CAAiD,EAAE,CAAC,MAApD,CAA2D,SAAS,CAAC,YAArE,CAAkF,IAAI,CAAC,MAAvF,CAA8F,QAAQ,CAAE,kBAACZ,CAAD,QAAOD,CAAAA,YAAY,CAACC,CAAD,CAAnB,EAAxG,EATJ,cAUI,aAAK,SAAS,CAAC,6BAAf,wBACI,wCADJ,cAEI,oEAFJ,cAGI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMwE,CAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,KAAhC,EAAN,EADb,CAEI,KAAK,CAAC,MAFV,CAGI,KAAK,CAAC,mBAHV,CAII,SAAS,CAAC,MAJd,CAKI,QAAQ,CAAEpG,UAAU,CAACrB,MAAX,CAAkB2D,MAAlB,EAA4B,CAL1C,EAHJ,GAVJ,cAqBI,aAAK,SAAS,CAAC,iBAAf,WACKhD,KAAK,CAACnB,IAAN,GAAe,aAAf,eAAgC,UAAG,SAAS,CAAC,cAAb,UAA6BmB,KAAK,CAACD,OAAnC,EADrC,CAEKC,KAAK,CAACnB,IAAN,GAAe,MAAf,eAAyB,UAAG,SAAS,CAAC,cAAb,UAA6BmB,KAAK,CAACD,OAAnC,EAF9B,CAGKC,KAAK,CAACnB,IAAN,GAAe,aAAf,eAAgC,UAAG,SAAS,CAAC,cAAb,UAA6BmB,KAAK,CAACD,OAAnC,EAHrC,cAII,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMkB,CAAAA,2BAA2B,CAAC,IAAD,CAAjC,EADb,CAEI,KAAK,CAAC,OAFV,CAGI,KAAK,CAAC,0BAHV,CAII,SAAS,CAAC,MAJd,CAKI,QAAQ,CAAEL,aALd,EAJJ,CAWKI,wBAAwB,eACrB,KAAC,UAAD,EACI,IAAI,CAAC,MADT,CAEI,QAAQ,CAAC,KAFb,CAGI,QAAQ,CAAE,0BAAMsC,CAAAA,gBAAgB,EAAtB,EAHd,CAII,aAAa,CAAE,+BAAMrC,CAAAA,2BAA2B,CAAC,KAAD,CAAjC,EAJnB,EAZR,GArBJ,GAnJJ,cA8LI,YAAK,SAAS,CAAC,SAAf,EA9LJ,GAnDJ,cAoPI,YAAK,SAAS,CAAC,sBAAf,uBACI,KAAC,WAAD,EACI,OAAO,CAAE,yBAAMrB,CAAAA,OAAO,CAAC,CAAD,CAAb,EADb,CAEI,KAAK,CAAC,QAFV,CAGI,KAAK,CAAC,OAHV,CAII,KAAK,CAAC,4BAJV,EADJ,EApPJ,GANJ,EAVJ,cA8QI,KAAC,aAAD,EACI,EAAE,CAAEwB,uBADR,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,YAAK,SAAS,CAAC,iCAAf,uBACI,4DADJ,EANJ,EA9QJ,GADJ,CA2RH,CAnhBD,CAqhBA,cAAezB,CAAAA,wBAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '../context/userContext'\r\nimport { useFirebase } from \"../assets/base-context\";\r\n\r\nimport Title from './utilities/Title'\r\nimport SubTitle from './utilities/SubTitle'\r\nimport { ButtonSmall, ButtonLarge } from './utilities/Buttons'\r\nimport Image from '../components/utilities/Image'\r\n\r\nimport DeleteIcon from '@mui/icons-material/DeleteOutline';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nimport NumericInput from 'react-numeric-input';\r\nimport { useDetectClickOutside } from 'react-detect-click-outside';\r\n\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { FaTrashAlt } from 'react-icons/fa'\r\nimport { FaTimes } from 'react-icons/fa'\r\n\r\nimport Loader from './Loader'\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\n\r\nconst BoxConfirm = ({ type, position, callback, callbackClose }) => {\r\n    const refConfirmBox = useDetectClickOutside({ onTriggered: callbackClose });\r\n    return <div ref={refConfirmBox} className={`confirmBox ${position}`}>\r\n        <span>\r\n            {type === \"delete\" && \"Confirmation de suprresion d'une variation\"}\r\n            {type === \"save\" && \"Confirmation de sauvegarde\"}\r\n        </span>\r\n        <h2>\r\n            {type === \"delete\" && \"Êtes-vous sûr de vouloir supprimer cette variation ?\"}\r\n            {type === \"save\" && \"Vous n'avez rien oublié ?\"}\r\n        </h2>\r\n        <p>\r\n            {type === \"delete\" && \"Cette action est irréversible\"}\r\n            {type === \"save\" && \"Si jamais... Vous pouvez toujours modifier ce service directement depuis votre dashboard\"}\r\n        </p>\r\n\r\n        <ButtonSmall\r\n            onClick={callback}\r\n            color={type === \"delete\" ? \"red\" : \"green\"}\r\n            value=\"Je confirme\"\r\n            marginTop=\"20px\"\r\n        />\r\n    </div>\r\n}\r\n\r\nconst initialNewService = {\r\n    // category: seller.category,\r\n    name: \"\",\r\n    images: [],\r\n    description: \"\",\r\n    price: 0,\r\n    variations: [],\r\n    foodType: \"Aucun\",\r\n    id: null\r\n}\r\n\r\nconst Prest_Dashboard_Services = ({ setStep }) => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const storage = firebaseContext.storage()\r\n\r\n    const [error, setError] = useState({ type: \"\", message: \"\" });\r\n\r\n    const [services, setServices] = useState([])\r\n    const [pictureTokensToDelete, setPictureTokensToDelete] = useState([])\r\n    const [isFormOpen, setIsFormOpen] = useState(false)\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n    const [newService, setNewService] = useState(initialNewService)\r\n\r\n    const [addingService, setAddingService] = useState(false)\r\n\r\n    const [isPopupConfirmDeleteOpened, setIsPopupConfirmDeleteOpened] = useState(false)\r\n    const [isPopupConfirmSaveOpened, setIsPopupConfirmSaveOpened] = useState(false)\r\n    const [currentDeletingVariation, setCurrentDeletingVariation] = useState(-1)\r\n\r\n    const [isServiceAddedCorrectly, setIsServiceAddedCorrectly] = useState(false)\r\n\r\n    const [isVariations, setIsVariations] = useState(false)\r\n\r\n    const { seller,\r\n        addOneSellerService,\r\n        getServicesOfCurrentSellerFromDB,\r\n        deleteOldSellerPicture,\r\n        isSellerAllowedToModifyAndDeleteService,\r\n        deleteServiceOfSeller,\r\n        addFoodTypeToSeller,\r\n        deleteFoodTypeToSeller\r\n    } = useAuth()\r\n\r\n    useEffect(() => {\r\n        getServicesOfCurrentSellerFromDB().then(services => {\r\n            setServices(services)\r\n            setIsMounted(true)\r\n        })\r\n    }, [])\r\n\r\n\r\n    function euroFormat(num) { return num + '€'; }\r\n\r\n    function handleChange(e) {\r\n        const type = e.target.files[0].type\r\n        const size = e.target.files[0].size\r\n        if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\") {\r\n            setError({ type: \"imageType\", message: \"Votre fichier n'est ni une image jpeg, jpg ou PNG.\" })\r\n        }\r\n        else if (size > 2000000) {\r\n            setError({ type: \"imageSize\", message: \"Votre image fait plus de 2Mo.\" })\r\n        }\r\n        else {\r\n            const newURL = URL.createObjectURL(e.target.files[0])\r\n            e.target.files[0].localURL = newURL\r\n            setNewService({ ...newService, images: [...newService.images, e.target.files[0]] })\r\n            setError({ type: \"\", message: \"\" })\r\n        }\r\n    }\r\n\r\n    function handleDeletePicture(item) {\r\n        const newPictures = [...newService.images]\r\n        for (var i = 0; i < newPictures.length; i++) {\r\n            if (newPictures[i].localURL === item || newPictures[i].url === item) {\r\n                if (newPictures[i].url === item) {\r\n                    setPictureTokensToDelete([...pictureTokensToDelete, newPictures[i].token])\r\n                }\r\n                newPictures.splice(i, 1);\r\n            }\r\n        }\r\n        setNewService({ ...newService, images: newPictures })\r\n    }\r\n\r\n    function handleServiceClicked(item) {\r\n        setIsFormOpen(true)\r\n\r\n        setIsVariations(item.variations.length > 0 ? true : false)\r\n        if (newService.id === item.id) {\r\n            return\r\n        }\r\n        clearInputs()\r\n        setNewService(item)\r\n    }\r\n\r\n    function clearInputs() {\r\n        setNewService(initialNewService)\r\n        setError({ type: \"\", message: \"\" })\r\n    }\r\n\r\n    async function handleAddService() {\r\n        setIsPopupConfirmSaveOpened(false)\r\n        setAddingService(true)\r\n        if (newService.name.length < 5) {\r\n            setError({ type: \"name\", message: \"Le nom de votre offre doit faire au minimum 5 caractères.\" })\r\n        }\r\n        else if (newService.description.length < 20 || newService.description.length > 300) {\r\n            setError({ type: \"description\", message: \"Votre description doit comporter entre 20 et 300 caractères.\" })\r\n        }\r\n        else if (newService.images.length === 0) {\r\n            setError({ type: \"noPictures\", message: \"Vous devez ajouter au moins une photo de votre service.\" })\r\n        }\r\n        else if (newService.images.length > 3) {\r\n            setError({ type: \"tooMuchPictures\", message: \"Impossible d'ajouter plus de 3 photos au service.\" })\r\n        }\r\n        else {\r\n\r\n            //Si l'id est égal à Null, c'est que le service est nouveau\r\n            //Si l'id n'est pas null, on ne créera pas un nouveau service on modifiera l'actuel\r\n            if (newService.id !== null) {\r\n                const isAllowed = await isSellerAllowedToModifyAndDeleteService(newService.id)\r\n                if (isAllowed) {\r\n                    const newServicesList = [...services]\r\n                    var index = newServicesList.findIndex(service => service.id === newService.id)\r\n                    const serviceToUpload = { ...newService }\r\n                    if (!isVariations) serviceToUpload.variations = []\r\n                    newServicesList[index] = serviceToUpload\r\n\r\n                    const service = await handleImagesFiles(serviceToUpload)\r\n                    setServices(newServicesList)\r\n                    await addOneSellerService(service)\r\n                    clearInputs()\r\n                    setIsServiceAddedCorrectly(true)\r\n                    setTimeout(() => {\r\n                        setIsServiceAddedCorrectly(false)\r\n                    }, 2000)\r\n                }\r\n            }\r\n            else {\r\n\r\n                if (services.length >= 5) {\r\n                    setError({ type: \"maxServices\", message: \"Vous avez déjà atteint le maximum d'offres sur votre boutique.\" })\r\n                }\r\n                else {\r\n                    const reconstructedService = newService\r\n                    reconstructedService.id = services.length\r\n                    if (!isVariations) reconstructedService.variations = []\r\n\r\n                    const service = await handleImagesFiles(reconstructedService)\r\n                    const refDocID = await addOneSellerService(service)\r\n                    if (seller.category === \"nourriture\")\r\n                        await addFoodTypeToSeller(service.foodType !== undefined ? service.foodType : \"Aucun\")\r\n                    const newServiceWithId = { ...service, id: refDocID }\r\n                    setServices([...services, newServiceWithId])\r\n                    clearInputs()\r\n                    setIsServiceAddedCorrectly(true)\r\n                    setTimeout(() => {\r\n                        setIsServiceAddedCorrectly(false)\r\n                    }, 2000)\r\n                }\r\n            }\r\n            setIsFormOpen(false)\r\n            window.scrollTo(0, 0);\r\n        }\r\n        setAddingService(false)\r\n    }\r\n\r\n    async function handleImagesFiles(service) {\r\n        let newServiceImageArray = service.images.filter(image => !image.localURL)\r\n        let newServiceArray = {\r\n            description: service.description,\r\n            id: service.id,\r\n            name: service.name,\r\n            images: newServiceImageArray,\r\n            price: service.price,\r\n            category: seller.category,\r\n            variations: service.variations,\r\n            foodType: service.foodType !== undefined ? service.foodType : \"Aucun\"\r\n        }\r\n\r\n        for (var i = 0; i < service.images.length; i++) {\r\n            if (service.images[i].localURL) {\r\n                const token = Math.random().toString(36).substr(2, 19)\r\n                const url = await handleUploadFile(service.images[i], token)\r\n                let newImg = { url: url, token: token }\r\n                newServiceImageArray.push(newImg)\r\n                newServiceArray.images = newServiceImageArray\r\n                pictureTokensToDelete.length > 0 && deleteOldSellerPicture(pictureTokensToDelete, \"services\")\r\n            }\r\n        }\r\n        return newServiceArray\r\n    }\r\n\r\n    function handleUploadFile(image, token) {\r\n        return new Promise((resolve, reject) => {\r\n            const upload = storage.ref(`services/${token}`).put(image)\r\n            upload.on(\r\n                \"state_changed\", snapshot => { },\r\n                error => {\r\n                    console.log(error)\r\n                }, () => {\r\n                    storage\r\n                        .ref(\"services\")\r\n                        .child(token)\r\n                        .getDownloadURL()\r\n                        .then(url => {\r\n                            resolve(url);\r\n                        })\r\n                        .catch(error => {\r\n                            console.error(error)\r\n                            reject(error);\r\n                        })\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    function handleClickedAddService() {\r\n        setIsVariations(false)\r\n        clearInputs()\r\n        setIsFormOpen(true)\r\n    }\r\n\r\n    async function handleDeleteService(serviceID) {\r\n        const isAllowed = await isSellerAllowedToModifyAndDeleteService(serviceID)\r\n        if (isAllowed) {\r\n            if (seller.category === \"nourriture\")\r\n                await deleteFoodTypeToSeller(serviceID)\r\n            await deleteServiceOfSeller(serviceID)\r\n            const services = await getServicesOfCurrentSellerFromDB()\r\n            setServices(services)\r\n        }\r\n    }\r\n\r\n    function handleVariationChanged(type, val, key) {\r\n        let newVariations = [...newService.variations]\r\n        let newVariation = { ...newService.variations[key] }\r\n        if (type === \"name\") newVariation.name = val\r\n        else if (type === \"price\") newVariation.price = val\r\n        newVariations[key] = newVariation\r\n        setNewService({ ...newService, variations: newVariations })\r\n    }\r\n\r\n    function handleDeleteVariation(key) {\r\n        let newVariations = [...newService.variations]\r\n        newVariations.splice(key, key + 1)\r\n        setNewService({ ...newService, variations: newVariations })\r\n        setCurrentDeletingVariation(-1)\r\n        setIsPopupConfirmDeleteOpened(false)\r\n    }\r\n\r\n    function handleFoodTypeChanged(e) {\r\n        let newNewService = { ...newService }\r\n        newNewService.foodType = e.target.value\r\n        setNewService(newNewService)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CSSTransition\r\n                in={!isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <Loader />\r\n            </CSSTransition>\r\n\r\n            <CSSTransition\r\n                in={isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"prest_Dashboard_Services\">\r\n\r\n                    <section className=\"prest_dashboard_header\">\r\n                        <div className=\"Prest-Step2-Header\">\r\n                            <SubTitle type=\"big\" font=\"roboto-bold\" value=\"Modifications de vos services\" />\r\n                            <p>Sur cette page, vous pourrez modifier les services que vous aurez créés au préalable lors de votre\r\n                                inscription.<br />\r\n                                L'indication de vos services maximales autorisés est en lien avec notre programme de parrainage.<br />\r\n                                Pour en savoir plus cliquez-ici</p>\r\n                            <div className=\"servicesListeContainer\">\r\n                                {\r\n                                    services.map((item, key) => {\r\n                                        return (\r\n                                            <div>\r\n                                                <div\r\n                                                    className=\"detailsServiceItem active\"\r\n                                                    onClick={() => handleServiceClicked(item)}\r\n                                                    key={key}\r\n                                                >\r\n                                                    <div className=\"serviceItem\">\r\n                                                        <div className=\"imgDetailsServiceItem\">\r\n                                                            <Image url={item.images[0].localURL || item.images[0].url} />\r\n                                                        </div>\r\n                                                        <div className=\"contentDetailsServiceItem\">\r\n                                                            <p className=\"title\">{item.name}</p>\r\n                                                            <p>{item.variations.length > 0 ? item.variations[0].price : item.price},00€</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"detailsServiceItem_buttons\">\r\n                                                    <ButtonSmall\r\n                                                        onClick={() => handleServiceClicked(item)}\r\n                                                        color=\"grey\"\r\n                                                        value=\"Modifier le service\"\r\n                                                    />\r\n                                                    <ButtonSmall\r\n                                                        onClick={() => handleDeleteService(item.id)}\r\n                                                        color=\"red\"\r\n                                                        value=\"Supprimer le service\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                {services.length < 5 && <label onClick={() => handleClickedAddService()} className=\"label-file\">+</label>}\r\n                            </div>\r\n                            <span>{services.length} / 5</span>\r\n                        </div>\r\n                    </section>\r\n                    <div className=\"divider\"></div>\r\n\r\n                    <section className={`addServiceWrapper ${isFormOpen && \"active\"}`}>\r\n                        <div className=\"Prest-Step2-Section0\">\r\n                            <Title value=\"Type de service:\" type=\"h3\" font=\"roboto-medium\" align=\"left\" />\r\n                            <div className=\"Prest-Step2-Section0_serviceType\">\r\n                                <Title onClick={() => setIsVariations(false)} customClass={!isVariations && \"active\"} value=\"Service simple\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                <Title onClick={() => { newService.variations.length === 0 && setNewService({ ...newService, variations: [{ name: \"\", price: 0 }] }); setIsVariations(true) }} customClass={isVariations && \"active\"} value=\"Service variable\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                            </div>\r\n                        </div>\r\n                        <span onClick={() => setIsFormOpen(false)} className=\"closeIcon\">\r\n                            <FaTimes />\r\n                        </span>\r\n                        <div className={`Prest-Step2-Section1 ${isVariations ? \"noFlex\" : \"\"}`}>\r\n                            <div className=\"left\">\r\n                                <Title value=\"Intitulé du service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                <p>Le nom de votre offre, par exemple : x5 fleurs de décorations de table</p>\r\n                                <div className=\"formField withoutMargin\">\r\n                                    <input\r\n                                        className={error.type === \"name\" && \"invalid\"}\r\n                                        id=\"serviceName\"\r\n                                        type=\"text\"\r\n                                        value={newService.name}\r\n                                        onChange={(e) => (setError({ type: \"\", message: \"\" }), setNewService({ ...newService, name: e.target.value }))}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            {!isVariations &&\r\n                                <div className=\"right\">\r\n                                    <Title value=\"Prix de votre service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                    <p>Prix</p>\r\n                                    <div className=\"formField withoutMargin\">\r\n                                        <NumericInput\r\n                                            format={euroFormat}\r\n                                            className=\"form-control\"\r\n                                            value={newService.price}\r\n                                            min={0}\r\n                                            max={1000}\r\n                                            step={20}\r\n                                            precision={0}\r\n                                            size={9}\r\n                                            mobile\r\n                                            onChange={(value) => (setError({ type: \"\", message: \"\" }), setNewService({ ...newService, price: value }))}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        {\r\n                            seller.category === \"nourriture\" &&\r\n                            <div className=\"Prest-Step2-Section1bis\">\r\n                                <Title value=\"Régime alimentaire\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                <RadioGroup\r\n                                    row\r\n                                    aria-label=\"gender\"\r\n                                    name=\"row-radio-buttons-group\"\r\n                                    onChange={handleFoodTypeChanged}\r\n                                    value={newService.foodType !== undefined ? newService.foodType : \"Aucun\"}\r\n                                >\r\n                                    <FormControlLabel value=\"Vegan\" control={<Radio />} label=\"Vegan\" />\r\n                                    <FormControlLabel value=\"Casher\" control={<Radio />} label=\"Casher\" />\r\n                                    <FormControlLabel value=\"Halal\" control={<Radio />} label=\"Halal\" />\r\n                                    <FormControlLabel value=\"Vegetarien\" control={<Radio />} label=\"Végétarien\" />\r\n                                    <FormControlLabel value=\"Aucun\" control={<Radio />} label=\"Aucun\" />\r\n                                </RadioGroup>\r\n                            </div>\r\n\r\n                        }\r\n\r\n                        <div className=\"Prest-Step2-Section2\">\r\n                            <Title value=\"Description de votre service\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                            <p>Décrivez au mieux le service que vous proposez au travers de cette offre.</p>\r\n                            <textarea\r\n                                value={newService.description}\r\n                                onChange={(e) => setNewService({ ...newService, description: e.target.value })}\r\n                                className={error.type === \"description\" && \"invalid\"}\r\n                            >\r\n                            </textarea>\r\n                        </div>\r\n\r\n                        {isVariations > 0 &&\r\n                            <div className=\"Prest-Step2-Section2bis\">\r\n                                <Title value=\"Création des déclinaisons\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                <div className=\"Prest-Step2-Section2bis_variations\">\r\n                                    {newService.variations.map((variation, key) => {\r\n                                        return <>\r\n                                            <div className=\"variation_header\">\r\n                                                <Title value={`Variation ${key}`} type=\"h3\" font=\"roboto-medium\" align=\"left\" />\r\n                                                <IconButton\r\n                                                    onClick={() => { setCurrentDeletingVariation(key); setIsPopupConfirmDeleteOpened(true) }}\r\n                                                    color=\"error\"\r\n                                                    aria-label=\"delete\"\r\n                                                >\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                                {(isPopupConfirmDeleteOpened && currentDeletingVariation === key) &&\r\n                                                    <BoxConfirm\r\n                                                        type=\"delete\"\r\n                                                        position=\"bottom\"\r\n                                                        callback={() => handleDeleteVariation(key)}\r\n                                                        callbackClose={() => { setCurrentDeletingVariation(-1); setIsPopupConfirmDeleteOpened(false) }}\r\n                                                    />\r\n                                                }\r\n                                            </div>\r\n                                            <div className=\"Prest-Step2-Section2bis_variation_item\"><div className=\"left\">\r\n                                                <Title value=\"Intitulé de la variation\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                                <p>Le nom de votre variation, par exemple : 6 parts/6 personnes</p>\r\n                                                <div className=\"formField withoutMargin\">\r\n                                                    <input\r\n                                                        className={error.type === \"name\" && \"invalid\"}\r\n                                                        id=\"serviceName\"\r\n                                                        type=\"text\"\r\n                                                        value={newService.variations[key].name}\r\n                                                        onChange={(e) => handleVariationChanged(\"name\", e.target.value, key)}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                                <div className=\"right\">\r\n                                                    <Title value=\"Prix de la variation\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                                                    <div className=\"formField withoutMargin\">\r\n                                                        <NumericInput\r\n                                                            format={euroFormat}\r\n                                                            className=\"form-control\"\r\n                                                            value={newService.variations[key].price}\r\n                                                            min={20}\r\n                                                            max={1000}\r\n                                                            step={1}\r\n                                                            precision={0}\r\n                                                            size={9}\r\n                                                            mobile\r\n                                                            onChange={(value) => handleVariationChanged(\"price\", value, key)}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </>\r\n                                    })}\r\n                                </div>\r\n                                <ButtonSmall\r\n                                    onClick={() => setNewService({ ...newService, variations: [...newService.variations, { name: \"\", price: 0 }] })}\r\n                                    color=\"blue\"\r\n                                    value=\"Ajouter une variation\"\r\n                                    marginTop=\"20px\"\r\n                                    classname=\"flex\"\r\n                                    iconMUIStart={<AddIcon />}\r\n                                />\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"Prest-Step2-Section3\">\r\n                            <Title value=\"Photos du services\" type=\"h2\" font=\"roboto-medium\" align=\"left\" />\r\n                            {(error.type === \"imageSize\" || error.type === \"imageType\" || error.type === \"noPictures\") && <p className=\"errorMessage\">{error.message}</p>}\r\n                            <p>Plusieurs photos peuvent être utile pour le client, cela lui permettra de voir votre service plus en détails.</p>\r\n                            <div className=\"servicesListeContainer\">\r\n                                {newService.images.map((item, key) => { return <div key={key} onClick={() => handleDeletePicture(item.localURL || item.url)}><Image url={item.localURL || item.url} /><FaTrashAlt color={\"white\"} size={32} /></div> })}\r\n                                {newService.images.length < 3 && <label htmlFor=\"file\" className=\"label-file\">+</label>}\r\n                            </div>\r\n\r\n                            <input accept=\"image/jpeg, image/jpg, image/png\" id=\"file\" className=\"input-file\" type=\"file\" onChange={(e) => handleChange(e)} />\r\n                            <div className=\"Prest-Step2-Section3-bottom\">\r\n                                <p>2Mo max par photo</p>\r\n                                <p>Type de fichiers acceptés : jpeg, jpg, PNG</p>\r\n                                <ButtonSmall\r\n                                    onClick={() => document.getElementById('file').click()}\r\n                                    color=\"grey\"\r\n                                    value=\"Ajouter une image\"\r\n                                    marginTop=\"20px\"\r\n                                    disabled={newService.images.length >= 4}\r\n                                />\r\n                            </div>\r\n                            <div className=\"buttonSaveOffer\">\r\n                                {error.type === \"maxServices\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                {error.type === \"name\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                {error.type === \"description\" && <p className=\"errorMessage\">{error.message}</p>}\r\n                                <ButtonSmall\r\n                                    onClick={() => setIsPopupConfirmSaveOpened(true)}\r\n                                    color=\"green\"\r\n                                    value=\"Sauvergarder cette offre\"\r\n                                    marginTop=\"20px\"\r\n                                    disabled={addingService}\r\n                                />\r\n                                {isPopupConfirmSaveOpened &&\r\n                                    <BoxConfirm\r\n                                        type=\"save\"\r\n                                        position=\"top\"\r\n                                        callback={() => handleAddService()}\r\n                                        callbackClose={() => setIsPopupConfirmSaveOpened(false)}\r\n                                    />\r\n                                }\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"divider\"></div>\r\n\r\n                    </section>\r\n                    <div className=\"Prest-Step2-Section4\">\r\n                        <ButtonLarge\r\n                            onClick={() => setStep(1)}\r\n                            color=\"orange\"\r\n                            width=\"400px\"\r\n                            value=\"Revenir au tableau de bord\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </CSSTransition>\r\n            <CSSTransition\r\n                in={isServiceAddedCorrectly}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"serviceAddedMessage inDashboard\">\r\n                    <p>Annonce sauvegardée avec succès</p>\r\n                </div>\r\n            </CSSTransition>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Prest_Dashboard_Services"]},"metadata":{},"sourceType":"module"}