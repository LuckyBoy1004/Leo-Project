{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/bc/Desktop/Nivid/src/pages/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport '../styles/Dashboard.css';\nimport Slideshow from \"../components/Slider\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport Header from '../components/Header';\nimport { useAuth } from '../context/userContext';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport UpdateProfil from '../components/UpdateProfil';\nimport InterestedSellers from '../components/InterestedSellers';\nimport WishList from '../components/WishList';\nimport BlogWidget from '../components/BlogWidget';\nimport { CSSTransition } from 'react-transition-group';\nimport { ButtonSmall } from '../components/utilities/Buttons';\nimport Image from '../components/utilities/Image';\n\nconst Dashboard = () => {\n  _s();\n\n  const {\n    event,\n    user,\n    formatLabelTimePicker,\n    getCurrentUserProfil,\n    getSellersInDbWithUids,\n    getSalesOfEventIdFromDB,\n    updateEventStatus,\n    clearEvent\n  } = useAuth();\n  const history = useHistory();\n  const [windowsWidth, setWindowsWidth] = useState(window.innerWidth);\n  const [error, setError] = useState(\"\");\n  const [step, setStep] = useState(1);\n  const [pourcent, setPourcent] = useState(0);\n  const [sellers, setSellers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [moreView, setMoreView] = useState(false); // if (step === 3) {\n  //     const WishList = import('../components/WishList')\n  // }\n\n  function isMobile() {\n    if (windowsWidth > 1160) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function handleResize(width) {\n    setWindowsWidth(width);\n  }\n\n  useEffect(() => {\n    if (event && event.status && event.status !== \"passed\" && event.date && event.date < Date.now()) {\n      updateEventStatus(\"passed\");\n      clearEvent();\n    } else {\n      getSellerListFromServices();\n      getPourcentBar();\n    }\n\n    window.addEventListener(\"resize\", e => handleResize(window.innerWidth));\n  }, [event]);\n\n  async function getPourcentBar() {\n    if (!event.status) return;\n    let pourcentToDisplay;\n    const pourcentBudget = event.budgetLeft / event.budget * 100;\n\n    if (event.status === \"pending\") {\n      const sales = await getSalesOfEventIdFromDB(event.id);\n      pourcentToDisplay = Math.floor((event.date - sales[0].date) * 100 / Date.now());\n    }\n\n    pourcentToDisplay = event.status === \"creating\" ? pourcentBudget : pourcentToDisplay;\n    setPourcent(100 - pourcentToDisplay + 5);\n  }\n\n  async function handleCreateEvent() {\n    const data = await getCurrentUserProfil();\n\n    if (!user.emailVerified) {\n      setError(\"Vous n'avez pas encore confirmé votre adresse email.\");\n    } else if (data.firstName === undefined || data.name === undefined || data.birthDate === undefined) {\n      setError(\"Vous devez compléter votre profil pour pouvoir créer votre premier évènement.\");\n    } else {\n      history.push(\"/creer-mon-evenement/etape-1\");\n    }\n  }\n\n  async function getSellerListFromServices() {\n    if (event.choosedServices.length < 1 || event.status === null) return null;\n    let sellerIDList = [];\n\n    for (const service in event.choosedServices) {\n      sellerIDList = [...sellerIDList, event.choosedServices[service].sellerId];\n    }\n\n    const sellersList = await getSellersInDbWithUids(sellerIDList);\n    const uniqueSellersList = sellersList && sellersList.filter((thing, index, self) => self.findIndex(t => t.email === thing.email) === index);\n\n    if (event.status === \"creating\") {\n      setSellers(uniqueSellersList);\n      setLoading(false);\n      return;\n    }\n\n    let finalSellersList = [];\n    uniqueSellersList.map(async seller => {\n      const status = await getSaleStatus(seller.uid);\n      const newSeller = { ...seller,\n        status: status\n      };\n      finalSellersList = [...finalSellersList, newSeller];\n\n      if (uniqueSellersList.length === finalSellersList.length) {\n        setSellers(finalSellersList);\n        setLoading(false);\n      }\n    });\n\n    if (event.status === \"pending\") {\n      let finalSellersList = [];\n      uniqueSellersList.map(async seller => {\n        const status = await getSaleStatus(seller.uid);\n        const newSeller = { ...seller,\n          status: status\n        };\n        finalSellersList = [...finalSellersList, newSeller];\n\n        if (uniqueSellersList.length === finalSellersList.length) {\n          setSellers(finalSellersList);\n          setLoading(false);\n        }\n      });\n    } else if (event.status === \"creating\") {\n      setSellers(uniqueSellersList);\n      setLoading(false);\n    }\n  }\n\n  async function getSaleStatus(id) {\n    const sales = await getSalesOfEventIdFromDB(event.id);\n    const sale = sales.filter(sale => sale.sellerID === id);\n    return sale[0].status;\n  }\n\n  function getDaysLeftBeforeEvent() {\n    const timestampLeft = event.date - Date.now();\n    const daysLeft = timestampLeft / 1000 / 86400;\n    return Math.ceil(daysLeft);\n  }\n\n  function more_view() {\n    if (moreView) {\n      setMoreView(false);\n    } else {\n      setMoreView(true);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !isMobile() ? \"dashboard\" : \"dashboard mobile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboardHeader\",\n        children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n          in: step === 1,\n          timeout: 200,\n          classNames: \"elementTransition\",\n          unmountOnExit: true,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"elementTransition\",\n            children: [\"Content de vous revoir \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: user.displayName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 73\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 1 && \"active\",\n            onClick: () => setStep(1),\n            children: \"Tableau de bord\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 3 && \"active\",\n            onClick: () => setStep(3),\n            children: \"Favoris\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 2 && \"active\",\n            onClick: () => setStep(2),\n            children: \"Mes informations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), step === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: windowsWidth < 600 ? \"dashboardContent mobile\" : \"dashboardContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftSide\",\n          children: [event && /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Votre \\xE9v\\xE8nement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 35\n          }, this), event.status && event.status !== \"passed\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"containerBudgetHeader\",\n              children: [event.status === \"creating\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: [\"Il vous reste \", event.budgetLeft < 0 ? 0 : event.budgetLeft, \"\\u20AC sur votre budget total de \", event.budget, \"\\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 69\n              }, this), event.status === \"pending\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: [\"Plus que \", getDaysLeftBeforeEvent(), \" jours \\xE0 patienter\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 68\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progressBarEvent\",\n                children: /*#__PURE__*/_jsxDEV(ProgressBar, {\n                  now: pourcent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 37\n              }, this), event.status === \"creating\" && /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                onClick: e => history.push('/creer-mon-evenement/etape-2'),\n                color: \"orange\",\n                value: \"Reprendre mon \\xE9v\\xE8nement\",\n                backgroundColor: \"rgba(245, 192, 67)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboardInfo\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: windowsWidth < 600 ? \"insetLeftSide mobile\" : \"insetLeftSide\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: \"Infos \\xE9v\\xE8nement\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dashboardInfoContent\",\n                  style: {\n                    minHeight: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nom de l'\\xE9v\\xE8nement:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: event.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Date:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: new Date(event.date).toLocaleDateString(\"fr-FR\", {\n                        weekday: \"long\",\n                        year: \"numeric\",\n                        month: \"long\",\n                        day: \"numeric\"\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Cr\\xE9neau:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        color: 'rgb(239 25 136)'\n                      },\n                      children: [\"Commence \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: formatLabelTimePicker(event.startAt)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 213,\n                        columnNumber: 97\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        color: 'rgb(27 76 239)'\n                      },\n                      children: [\"se termine \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: formatLabelTimePicker(event.endAt)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 98\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 45\n                  }, this), moreView && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nombre de personnes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [event.people, \" personnes\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 46\n                  }, this), moreView && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nombre de m\\xB2:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: event.placeSize\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    style: {\n                      marginBottom: 'unset'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      children: [\"Afficher plus\", /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: {\n                          backgroundColor: 'rgba(244, 244, 244)',\n                          border: '0px',\n                          fontSize: '30px'\n                        },\n                        onClick: () => more_view(),\n                        children: moreView ? '+' : '-'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item buttonContainer\",\n                  children: event.status === \"creating\" && /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                    onClick: () => history.push('/creer-mon-evenement/etape-1'),\n                    color: \"grey\",\n                    value: \"Modifier les informations\",\n                    marginTop: \"20px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 37\n              }, this), windowsWidth < 600 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"separator\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 60\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"insetRightSide\",\n                children: [!isMobile() ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: \"Prestataires s\\xE9lectionn\\xE9s\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 120\n                  }, this), event.choosedServices.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: [sellers && sellers.length, \" prestataires au total\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Vous n'avez pas encore choisi de prestataire\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)',\n                      marginLeft: '10%'\n                    },\n                    children: \"Prestataires s\\xE9lectionn\\xE9s\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 49\n                  }, this), sellers && sellers.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: [sellers && sellers.length, \" prestataires au total\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Vous n'avez pas encore choisi de prestataire\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Slideshow, {\n                    eventStatus: event.status,\n                    sellers: sellers,\n                    windowsWidth: windowsWidth,\n                    isMobile: isMobile()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: isMobile() ? \"noEventDisplayDashboard mobile\" : \"noEventDisplayDashboard\",\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              url: \"/images/triste.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"C\\u2019est dur \\xE0 croire!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Mais il semblerait que n\\u2019ayez toujours pas planifi\\xE9 d\\u2019\\xE9v\\xE8nement sur NIVID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCreateEvent(),\n              children: \"Cr\\xE9er mon premier \\xE9v\\xE8nement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 33\n            }, this), error.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"errorMessage\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), !isMobile() && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [event.status === \"creating\" && /*#__PURE__*/_jsxDEV(InterestedSellers, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(BlogWidget, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 31\n      }, this) : step === 2 ? /*#__PURE__*/_jsxDEV(UpdateProfil, {\n        isMobile: isMobile()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 25\n      }, this) : step === 3 && /*#__PURE__*/_jsxDEV(WishList, {\n        eventStatus: event.status,\n        isMobile: isMobile()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Dashboard, \"NJOrvI43DDNYxBM10+zq//l5pHY=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/bc/Desktop/Nivid/src/pages/Dashboard.js"],"names":["React","useState","useEffect","Slideshow","Link","useHistory","useLocation","Header","useAuth","ProgressBar","UpdateProfil","InterestedSellers","WishList","BlogWidget","CSSTransition","ButtonSmall","Image","Dashboard","event","user","formatLabelTimePicker","getCurrentUserProfil","getSellersInDbWithUids","getSalesOfEventIdFromDB","updateEventStatus","clearEvent","history","windowsWidth","setWindowsWidth","window","innerWidth","error","setError","step","setStep","pourcent","setPourcent","sellers","setSellers","loading","setLoading","moreView","setMoreView","isMobile","handleResize","width","status","date","Date","now","getSellerListFromServices","getPourcentBar","addEventListener","e","pourcentToDisplay","pourcentBudget","budgetLeft","budget","sales","id","Math","floor","handleCreateEvent","data","emailVerified","firstName","undefined","name","birthDate","push","choosedServices","length","sellerIDList","service","sellerId","sellersList","uniqueSellersList","filter","thing","index","self","findIndex","t","email","finalSellersList","map","seller","getSaleStatus","uid","newSeller","sale","sellerID","getDaysLeftBeforeEvent","timestampLeft","daysLeft","ceil","more_view","displayName","color","minHeight","toLocaleDateString","weekday","year","month","day","startAt","endAt","people","placeSize","marginBottom","backgroundColor","border","fontSize","marginLeft"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,yBAAP;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,iBAAP,MAA8B,iCAA9B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AAEA,SAASC,WAAT,QAA4B,iCAA5B;AACA,OAAOC,KAAP,MAAkB,+BAAlB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAEpB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,IAAT;AAAeC,IAAAA,qBAAf;AAAsCC,IAAAA,oBAAtC;AAA4DC,IAAAA,sBAA5D;AAAoFC,IAAAA,uBAApF;AAA6GC,IAAAA,iBAA7G;AAAgIC,IAAAA;AAAhI,MAA+IjB,OAAO,EAA5J;AACA,QAAMkB,OAAO,GAAGrB,UAAU,EAA1B;AAEA,QAAM,CAACsB,YAAD,EAAeC,eAAf,IAAkC3B,QAAQ,CAAC4B,MAAM,CAACC,UAAR,CAAhD;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB/B,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACgC,IAAD,EAAOC,OAAP,IAAkBjC,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM,CAACkC,QAAD,EAAWC,WAAX,IAA0BnC,QAAQ,CAAC,CAAD,CAAxC;AAEA,QAAM,CAACoC,OAAD,EAAUC,UAAV,IAAwBrC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACsC,OAAD,EAAUC,UAAV,IAAwBvC,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACwC,QAAD,EAAWC,WAAX,IAA0BzC,QAAQ,CAAC,KAAD,CAAxC,CAZoB,CAcpB;AACA;AACA;;AAEA,WAAS0C,QAAT,GAAoB;AAChB,QAAIhB,YAAY,GAAG,IAAnB,EAAyB;AACrB,aAAO,KAAP;AACH,KAFD,MAGK;AACD,aAAO,IAAP;AACH;AACJ;;AAED,WAASiB,YAAT,CAAsBC,KAAtB,EAA6B;AACzBjB,IAAAA,eAAe,CAACiB,KAAD,CAAf;AACH;;AAED3C,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgB,KAAK,IAAIA,KAAK,CAAC4B,MAAf,IAAyB5B,KAAK,CAAC4B,MAAN,KAAiB,QAA1C,IAAsD5B,KAAK,CAAC6B,IAA5D,IAAoE7B,KAAK,CAAC6B,IAAN,GAAaC,IAAI,CAACC,GAAL,EAArF,EAAiG;AAC7FzB,MAAAA,iBAAiB,CAAC,QAAD,CAAjB;AACAC,MAAAA,UAAU;AACb,KAHD,MAGO;AACHyB,MAAAA,yBAAyB;AACzBC,MAAAA,cAAc;AACjB;;AACDtB,IAAAA,MAAM,CAACuB,gBAAP,CAAwB,QAAxB,EAAmCC,CAAD,IAAOT,YAAY,CAACf,MAAM,CAACC,UAAR,CAArD;AAEH,GAVQ,EAUN,CAACZ,KAAD,CAVM,CAAT;;AAYA,iBAAeiC,cAAf,GAAgC;AAC5B,QAAI,CAACjC,KAAK,CAAC4B,MAAX,EAAmB;AAEnB,QAAIQ,iBAAJ;AACA,UAAMC,cAAc,GAAIrC,KAAK,CAACsC,UAAN,GAAmBtC,KAAK,CAACuC,MAA1B,GAAoC,GAA3D;;AACA,QAAIvC,KAAK,CAAC4B,MAAN,KAAiB,SAArB,EAAgC;AAC5B,YAAMY,KAAK,GAAG,MAAMnC,uBAAuB,CAACL,KAAK,CAACyC,EAAP,CAA3C;AACAL,MAAAA,iBAAiB,GAAGM,IAAI,CAACC,KAAL,CAAY,CAAC3C,KAAK,CAAC6B,IAAN,GAAaW,KAAK,CAAC,CAAD,CAAL,CAASX,IAAvB,IAA+B,GAAhC,GAAuCC,IAAI,CAACC,GAAL,EAAlD,CAApB;AACH;;AACDK,IAAAA,iBAAiB,GAAGpC,KAAK,CAAC4B,MAAN,KAAiB,UAAjB,GAA8BS,cAA9B,GAA+CD,iBAAnE;AACAlB,IAAAA,WAAW,CAAC,MAAMkB,iBAAN,GAA0B,CAA3B,CAAX;AACH;;AAED,iBAAeQ,iBAAf,GAAmC;AAC/B,UAAMC,IAAI,GAAG,MAAM1C,oBAAoB,EAAvC;;AACA,QAAI,CAACF,IAAI,CAAC6C,aAAV,EAAyB;AACrBhC,MAAAA,QAAQ,CAAC,sDAAD,CAAR;AACH,KAFD,MAGK,IAAI+B,IAAI,CAACE,SAAL,KAAmBC,SAAnB,IAAgCH,IAAI,CAACI,IAAL,KAAcD,SAA9C,IAA2DH,IAAI,CAACK,SAAL,KAAmBF,SAAlF,EAA6F;AAC9FlC,MAAAA,QAAQ,CAAC,+EAAD,CAAR;AACH,KAFI,MAGA;AACDN,MAAAA,OAAO,CAAC2C,IAAR,CAAa,8BAAb;AACH;AACJ;;AAID,iBAAenB,yBAAf,GAA2C;AACvC,QAAIhC,KAAK,CAACoD,eAAN,CAAsBC,MAAtB,GAA+B,CAA/B,IAAoCrD,KAAK,CAAC4B,MAAN,KAAiB,IAAzD,EAA+D,OAAO,IAAP;AAE/D,QAAI0B,YAAY,GAAG,EAAnB;;AACA,SAAK,MAAMC,OAAX,IAAsBvD,KAAK,CAACoD,eAA5B,EAA6C;AACzCE,MAAAA,YAAY,GAAG,CAAC,GAAGA,YAAJ,EAAkBtD,KAAK,CAACoD,eAAN,CAAsBG,OAAtB,EAA+BC,QAAjD,CAAf;AACH;;AACD,UAAMC,WAAW,GAAG,MAAMrD,sBAAsB,CAACkD,YAAD,CAAhD;AACA,UAAMI,iBAAiB,GAAGD,WAAW,IAAIA,WAAW,CAACE,MAAZ,CAAmB,CAACC,KAAD,EAAQC,KAAR,EAAeC,IAAf,KAAwBA,IAAI,CAACC,SAAL,CAAeC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYL,KAAK,CAACK,KAAtC,MAAiDJ,KAA5F,CAAzC;;AAEA,QAAI7D,KAAK,CAAC4B,MAAN,KAAiB,UAArB,EAAiC;AAC7BR,MAAAA,UAAU,CAACsC,iBAAD,CAAV;AACApC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACH;;AAED,QAAI4C,gBAAgB,GAAG,EAAvB;AACAR,IAAAA,iBAAiB,CAACS,GAAlB,CAAsB,MAAMC,MAAN,IAAgB;AAClC,YAAMxC,MAAM,GAAG,MAAMyC,aAAa,CAACD,MAAM,CAACE,GAAR,CAAlC;AACA,YAAMC,SAAS,GAAG,EAAE,GAAGH,MAAL;AAAaxC,QAAAA,MAAM,EAAEA;AAArB,OAAlB;AACAsC,MAAAA,gBAAgB,GAAG,CAAC,GAAGA,gBAAJ,EAAsBK,SAAtB,CAAnB;;AAEA,UAAIb,iBAAiB,CAACL,MAAlB,KAA6Ba,gBAAgB,CAACb,MAAlD,EAA0D;AACtDjC,QAAAA,UAAU,CAAC8C,gBAAD,CAAV;AACA5C,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,KATD;;AAYA,QAAItB,KAAK,CAAC4B,MAAN,KAAiB,SAArB,EAAgC;AAC5B,UAAIsC,gBAAgB,GAAG,EAAvB;AACAR,MAAAA,iBAAiB,CAACS,GAAlB,CAAsB,MAAMC,MAAN,IAAgB;AAClC,cAAMxC,MAAM,GAAG,MAAMyC,aAAa,CAACD,MAAM,CAACE,GAAR,CAAlC;AACA,cAAMC,SAAS,GAAG,EAAE,GAAGH,MAAL;AAAaxC,UAAAA,MAAM,EAAEA;AAArB,SAAlB;AACAsC,QAAAA,gBAAgB,GAAG,CAAC,GAAGA,gBAAJ,EAAsBK,SAAtB,CAAnB;;AAEA,YAAIb,iBAAiB,CAACL,MAAlB,KAA6Ba,gBAAgB,CAACb,MAAlD,EAA0D;AACtDjC,UAAAA,UAAU,CAAC8C,gBAAD,CAAV;AACA5C,UAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,OATD;AAUH,KAZD,MAaK,IAAItB,KAAK,CAAC4B,MAAN,KAAiB,UAArB,EAAiC;AAClCR,MAAAA,UAAU,CAACsC,iBAAD,CAAV;AACApC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ;;AAED,iBAAe+C,aAAf,CAA6B5B,EAA7B,EAAiC;AAC7B,UAAMD,KAAK,GAAG,MAAMnC,uBAAuB,CAACL,KAAK,CAACyC,EAAP,CAA3C;AACA,UAAM+B,IAAI,GAAGhC,KAAK,CAACmB,MAAN,CAAaa,IAAI,IAAIA,IAAI,CAACC,QAAL,KAAkBhC,EAAvC,CAAb;AACA,WAAO+B,IAAI,CAAC,CAAD,CAAJ,CAAQ5C,MAAf;AACH;;AAED,WAAS8C,sBAAT,GAAkC;AAC9B,UAAMC,aAAa,GAAG3E,KAAK,CAAC6B,IAAN,GAAaC,IAAI,CAACC,GAAL,EAAnC;AACA,UAAM6C,QAAQ,GAAGD,aAAa,GAAG,IAAhB,GAAuB,KAAxC;AACA,WAAOjC,IAAI,CAACmC,IAAL,CAAUD,QAAV,CAAP;AACH;;AAED,WAASE,SAAT,GAAqB;AACjB,QAAIvD,QAAJ,EAAc;AACVC,MAAAA,WAAW,CAAC,KAAD,CAAX;AACH,KAFD,MAEM;AACFA,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH;AACJ;;AAED,sBACI;AAAA,4BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,MAAA,SAAS,EAAE,CAACC,QAAQ,EAAT,GAAc,WAAd,GAA4B,kBAA5C;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,gCAEJ,QAAC,aAAD;AACI,UAAA,EAAE,EAAEV,IAAI,KAAK,CADjB;AAEI,UAAA,OAAO,EAAE,GAFb;AAGI,UAAA,UAAU,EAAC,mBAHf;AAII,UAAA,aAAa,MAJjB;AAAA,iCAMI;AAAG,YAAA,SAAS,EAAC,mBAAb;AAAA,+DAAwD;AAAA,wBAAOd,IAAI,CAAC8E;AAAZ;AAAA;AAAA;AAAA;AAAA,oBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,gBAFI,eAUI;AAAA,kCACI;AAAM,YAAA,SAAS,EAAEhE,IAAI,KAAK,CAAT,IAAc,QAA/B;AAAyC,YAAA,OAAO,EAAE,MAAMC,OAAO,CAAC,CAAD,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAM,YAAA,SAAS,EAAED,IAAI,KAAK,CAAT,IAAc,QAA/B;AAAyC,YAAA,OAAO,EAAE,MAAMC,OAAO,CAAC,CAAD,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAM,YAAA,SAAS,EAAED,IAAI,KAAK,CAAT,IAAc,QAA/B;AAAyC,YAAA,OAAO,EAAE,MAAMC,OAAO,CAAC,CAAD,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAkBKD,IAAI,KAAK,CAAT,gBAAa;AAAK,QAAA,SAAS,EAAEN,YAAY,GAAG,GAAf,GAAqB,yBAArB,GAAiD,kBAAjE;AAAA,gCACV;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,qBACKT,KAAK,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADd,EAEKA,KAAK,CAAC4B,MAAN,IAAgB5B,KAAK,CAAC4B,MAAN,KAAiB,QAAjC,gBACG;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA,yBACK5B,KAAK,CAAC4B,MAAN,KAAiB,UAAjB,iBAA+B;AAAA,6CAAmB5B,KAAK,CAACsC,UAAN,GAAmB,CAAnB,GAAuB,CAAvB,GAA2BtC,KAAK,CAACsC,UAApD,uCAA6FtC,KAAK,CAACuC,MAAnG;AAAA;AAAA;AAAA;AAAA;AAAA,sBADpC,EAEKvC,KAAK,CAAC4B,MAAN,KAAiB,SAAjB,iBAA8B;AAAA,wCAAc8C,sBAAsB,EAApC;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFnC,eAGI;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,uCACI,QAAC,WAAD;AAAa,kBAAA,GAAG,EAAEzD;AAAlB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAHJ,EAMKjB,KAAK,CAAC4B,MAAN,KAAiB,UAAjB,iBACG,QAAC,WAAD;AACI,gBAAA,OAAO,EAAGO,CAAD,IAAO3B,OAAO,CAAC2C,IAAR,CAAa,8BAAb,CADpB;AAEI,gBAAA,KAAK,EAAC,QAFV;AAGI,gBAAA,KAAK,EAAC,+BAHV;AAII,gBAAA,eAAe,EAAC;AAJpB;AAAA;AAAA;AAAA;AAAA,sBAPR;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAgBI;AAAK,cAAA,SAAS,EAAC,eAAf;AAAA,sCACI;AAAK,gBAAA,SAAS,EAAE1C,YAAY,GAAG,GAAf,GAAqB,sBAArB,GAA8C,eAA9D;AAAA,wCACI;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAA,yCACI;AAAI,oBAAA,KAAK,EAAE;AAACuE,sBAAAA,KAAK,EAAC;AAAP,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBADJ,eAII;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAsC,kBAAA,KAAK,EAAE;AAACC,oBAAAA,SAAS,EAAC;AAAX,mBAA7C;AAAA,0CACI;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAA,gCAAIjF,KAAK,CAACiD;AAAV;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAKI;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAA,gCAAI,IAAInB,IAAJ,CAAS9B,KAAK,CAAC6B,IAAf,EAAqBqD,kBAArB,CAAwC,OAAxC,EAAiD;AAAEC,wBAAAA,OAAO,EAAE,MAAX;AAAmBC,wBAAAA,IAAI,EAAE,SAAzB;AAAoCC,wBAAAA,KAAK,EAAE,MAA3C;AAAmDC,wBAAAA,GAAG,EAAE;AAAxD,uBAAjD;AAAJ;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BALJ,eASI;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAG,sBAAA,KAAK,EAAE;AAACN,wBAAAA,KAAK,EAAC;AAAP,uBAAV;AAAA,gEAAgD;AAAA,kCAAO9E,qBAAqB,CAACF,KAAK,CAACuF,OAAP;AAA5B;AAAA;AAAA;AAAA;AAAA,8BAAhD;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ,eAGI;AAAG,sBAAA,KAAK,EAAE;AAACP,wBAAAA,KAAK,EAAC;AAAP,uBAAV;AAAA,kEAAiD;AAAA,kCAAO9E,qBAAqB,CAACF,KAAK,CAACwF,KAAP;AAA5B;AAAA;AAAA;AAAA;AAAA,8BAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BATJ,EAcKjE,QAAQ,iBACR;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAA,4CACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADH,eAEG;AAAA,iCAAIvB,KAAK,CAACyF,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFH;AAAA;AAAA;AAAA;AAAA;AAAA,0BAfL,EAoBKlE,QAAQ,iBACT;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAA,4CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAA,gCAAIvB,KAAK,CAAC0F;AAAV;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BArBJ,eA0BI;AAAK,oBAAA,SAAS,EAAC,MAAf;AAAsB,oBAAA,KAAK,EAAE;AAACC,sBAAAA,YAAY,EAAC;AAAd,qBAA7B;AAAA,2CACI;AAAA,+DACA;AAAQ,wBAAA,KAAK,EAAE;AAACC,0BAAAA,eAAe,EAAC,qBAAjB;AAAwCC,0BAAAA,MAAM,EAAC,KAA/C;AAAsDC,0BAAAA,QAAQ,EAAC;AAA/D,yBAAf;AAAuF,wBAAA,OAAO,EAAE,MAAMhB,SAAS,EAA/G;AAAA,kCAAoHvD,QAAQ,GAAG,GAAH,GAAS;AAArI;AAAA;AAAA;AAAA;AAAA,8BADA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJJ,eAmCI;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAA,4BACKvB,KAAK,CAAC4B,MAAN,KAAiB,UAAjB,iBACG,QAAC,WAAD;AACI,oBAAA,OAAO,EAAE,MAAMpB,OAAO,CAAC2C,IAAR,CAAa,8BAAb,CADnB;AAEI,oBAAA,KAAK,EAAC,MAFV;AAGI,oBAAA,KAAK,EAAC,2BAHV;AAII,oBAAA,SAAS,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA;AAFR;AAAA;AAAA;AAAA;AAAA,wBAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAgDK1C,YAAY,GAAG,GAAf,iBAAsB;AAAK,gBAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,sBAhD3B,eAkDI;AAAK,gBAAA,SAAS,EAAC,gBAAf;AAAA,2BACK,CAACgB,QAAQ,EAAT,gBACG;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAA,0CACI;AAAI,oBAAA,KAAK,EAAE;AAACuD,sBAAAA,KAAK,EAAC;AAAP,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAC2E;AAAA;AAAA;AAAA;AAAA,0BAD3E,EAEKhF,KAAK,CAACoD,eAAN,CAAsBC,MAAtB,GAA+B,CAA/B,gBACG;AAAG,oBAAA,KAAK,EAAE;AAAC2B,sBAAAA,KAAK,EAAC;AAAP,qBAAV;AAAA,+BAAyC7D,OAAO,IAAIA,OAAO,CAACkC,MAA5D;AAAA;AAAA;AAAA;AAAA;AAAA,0BADH,gBAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJV;AAAA;AAAA;AAAA;AAAA;AAAA,wBADH,gBASG;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAA,0CACI;AAAI,oBAAA,KAAK,EAAE;AAAC2B,sBAAAA,KAAK,EAAC,oBAAP;AAA6Be,sBAAAA,UAAU,EAAC;AAAxC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,EAEK5E,OAAO,IAAIA,OAAO,CAACkC,MAAR,GAAiB,CAA5B,gBACG;AAAG,oBAAA,KAAK,EAAE;AAAC2B,sBAAAA,KAAK,EAAC;AAAP,qBAAV;AAAA,+BAAyC7D,OAAO,IAAIA,OAAO,CAACkC,MAA5D;AAAA;AAAA;AAAA;AAAA;AAAA,0BADH,gBAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJV;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVR,eAiBI;AAAA,yCACI,QAAC,SAAD;AAAW,oBAAA,WAAW,EAAErD,KAAK,CAAC4B,MAA9B;AAAsC,oBAAA,OAAO,EAAET,OAA/C;AAAwD,oBAAA,YAAY,EAAEV,YAAtE;AAAoF,oBAAA,QAAQ,EAAEgB,QAAQ;AAAtG;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBAlDJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,gBA4FG;AAAK,YAAA,SAAS,EAAEA,QAAQ,KAAK,gCAAL,GAAwC,yBAAhE;AAAA,oCACI,QAAC,KAAD;AAAO,cAAA,GAAG,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,eAII;AAAQ,cAAA,OAAO,EAAE,MAAMmB,iBAAiB,EAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,EAKK/B,KAAK,CAACwC,MAAN,GAAe,CAAf,iBAAoB;AAAG,cAAA,SAAS,EAAC,cAAb;AAAA,wBAA6BxC;AAA7B;AAAA;AAAA;AAAA;AAAA,oBALzB;AAAA;AAAA;AAAA;AAAA;AAAA,kBA9FR;AAAA;AAAA;AAAA;AAAA;AAAA,gBADU,EAyGT,CAACY,QAAQ,EAAT,iBACG;AAAA,qBACKzB,KAAK,CAAC4B,MAAN,KAAiB,UAAjB,iBACG,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,kBAFR,eAII,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1GM;AAAA;AAAA;AAAA;AAAA;AAAA,cAAb,GAkHKb,IAAI,KAAK,CAAT,gBACE,QAAC,YAAD;AAAc,QAAA,QAAQ,EAAEU,QAAQ;AAAhC;AAAA;AAAA;AAAA;AAAA,cADF,GAEIV,IAAI,KAAK,CAAT,iBACF,QAAC,QAAD;AAAU,QAAA,WAAW,EAAEf,KAAK,CAAC4B,MAA7B;AAAqC,QAAA,QAAQ,EAAEH,QAAQ;AAAvD;AAAA;AAAA;AAAA;AAAA,cAvIZ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiJH,CA5RD;;GAAM1B,S;UAEmJT,O,EACrIH,U;;;KAHdY,S;AA6RN,eAAeA,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport '../styles/Dashboard.css'\r\nimport Slideshow from \"../components/Slider\"\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport Header from '../components/Header'\r\nimport { useAuth } from '../context/userContext'\r\nimport ProgressBar from 'react-bootstrap/ProgressBar';\r\nimport UpdateProfil from '../components/UpdateProfil'\r\nimport InterestedSellers from '../components/InterestedSellers'\r\nimport WishList from '../components/WishList'\r\nimport BlogWidget from '../components/BlogWidget'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nimport { ButtonSmall } from '../components/utilities/Buttons'\r\nimport Image from '../components/utilities/Image'\r\n\r\nconst Dashboard = () => {\r\n\r\n    const { event, user, formatLabelTimePicker, getCurrentUserProfil, getSellersInDbWithUids, getSalesOfEventIdFromDB, updateEventStatus, clearEvent } = useAuth()\r\n    const history = useHistory()\r\n\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    const [error, setError] = useState(\"\")\r\n    const [step, setStep] = useState(1)\r\n    const [pourcent, setPourcent] = useState(0);\r\n\r\n    const [sellers, setSellers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [moreView, setMoreView] = useState(false);\r\n\r\n    // if (step === 3) {\r\n    //     const WishList = import('../components/WishList')\r\n    // }\r\n\r\n    function isMobile() {\r\n        if (windowsWidth > 1160) {\r\n            return false\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n\r\n    function handleResize(width) {\r\n        setWindowsWidth(width)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (event && event.status && event.status !== \"passed\" && event.date && event.date < Date.now()) {\r\n            updateEventStatus(\"passed\")\r\n            clearEvent()\r\n        } else {\r\n            getSellerListFromServices()\r\n            getPourcentBar()\r\n        }\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n\r\n    }, [event])\r\n\r\n    async function getPourcentBar() {\r\n        if (!event.status) return\r\n\r\n        let pourcentToDisplay\r\n        const pourcentBudget = (event.budgetLeft / event.budget) * 100\r\n        if (event.status === \"pending\") {\r\n            const sales = await getSalesOfEventIdFromDB(event.id)\r\n            pourcentToDisplay = Math.floor(((event.date - sales[0].date) * 100) / Date.now())\r\n        }\r\n        pourcentToDisplay = event.status === \"creating\" ? pourcentBudget : pourcentToDisplay\r\n        setPourcent(100 - pourcentToDisplay + 5)\r\n    }\r\n\r\n    async function handleCreateEvent() {\r\n        const data = await getCurrentUserProfil()\r\n        if (!user.emailVerified) {\r\n            setError(\"Vous n'avez pas encore confirmé votre adresse email.\")\r\n        }\r\n        else if (data.firstName === undefined || data.name === undefined || data.birthDate === undefined) {\r\n            setError(\"Vous devez compléter votre profil pour pouvoir créer votre premier évènement.\")\r\n        }\r\n        else {\r\n            history.push(\"/creer-mon-evenement/etape-1\")\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async function getSellerListFromServices() {\r\n        if (event.choosedServices.length < 1 || event.status === null) return null\r\n\r\n        let sellerIDList = []\r\n        for (const service in event.choosedServices) {\r\n            sellerIDList = [...sellerIDList, event.choosedServices[service].sellerId]\r\n        }\r\n        const sellersList = await getSellersInDbWithUids(sellerIDList)\r\n        const uniqueSellersList = sellersList && sellersList.filter((thing, index, self) => self.findIndex(t => t.email === thing.email) === index)\r\n\r\n        if (event.status === \"creating\") {\r\n            setSellers(uniqueSellersList)\r\n            setLoading(false)\r\n            return\r\n        }\r\n\r\n        let finalSellersList = []\r\n        uniqueSellersList.map(async seller => {\r\n            const status = await getSaleStatus(seller.uid)\r\n            const newSeller = { ...seller, status: status }\r\n            finalSellersList = [...finalSellersList, newSeller]\r\n\r\n            if (uniqueSellersList.length === finalSellersList.length) {\r\n                setSellers(finalSellersList)\r\n                setLoading(false)\r\n            }\r\n        })\r\n\r\n\r\n        if (event.status === \"pending\") {\r\n            let finalSellersList = []\r\n            uniqueSellersList.map(async seller => {\r\n                const status = await getSaleStatus(seller.uid)\r\n                const newSeller = { ...seller, status: status }\r\n                finalSellersList = [...finalSellersList, newSeller]\r\n\r\n                if (uniqueSellersList.length === finalSellersList.length) {\r\n                    setSellers(finalSellersList)\r\n                    setLoading(false)\r\n                }\r\n            })\r\n        }\r\n        else if (event.status === \"creating\") {\r\n            setSellers(uniqueSellersList)\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    async function getSaleStatus(id) {\r\n        const sales = await getSalesOfEventIdFromDB(event.id)\r\n        const sale = sales.filter(sale => sale.sellerID === id)\r\n        return sale[0].status\r\n    }\r\n\r\n    function getDaysLeftBeforeEvent() {\r\n        const timestampLeft = event.date - Date.now()\r\n        const daysLeft = timestampLeft / 1000 / 86400\r\n        return Math.ceil(daysLeft)\r\n    }\r\n\r\n    function more_view() {\r\n        if (moreView) {\r\n            setMoreView(false)\r\n        }else {\r\n            setMoreView(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <div className={!isMobile() ? \"dashboard\" : \"dashboard mobile\"}>\r\n                <div className=\"dashboardHeader\">\r\n                    \r\n            <CSSTransition\r\n                in={step === 1}\r\n                timeout={200}\r\n                classNames=\"elementTransition\"\r\n                unmountOnExit\r\n            >\r\n                <p className=\"elementTransition\">Content de vous revoir <span>{user.displayName}</span></p>\r\n            </CSSTransition>\r\n                    <div>\r\n                        <span className={step === 1 && \"active\"} onClick={() => setStep(1)}>Tableau de bord</span>\r\n                        <span className={step === 3 && \"active\"} onClick={() => setStep(3)}>Favoris</span>\r\n                        <span className={step === 2 && \"active\"} onClick={() => setStep(2)}>Mes informations</span>\r\n                    </div>\r\n                </div>\r\n                {/* {!user.emailVerified && <EmailNotVerified />} */}\r\n                {step === 1 ? <div className={windowsWidth < 600 ? \"dashboardContent mobile\" : \"dashboardContent\"}>\r\n                    <div className=\"leftSide\">\r\n                        {event && <h1>Votre évènement</h1>}\r\n                        {event.status && event.status !== \"passed\" ? (\r\n                            <div>\r\n                                <div className=\"containerBudgetHeader\">\r\n                                    {event.status === \"creating\" && <h2>Il vous reste {event.budgetLeft < 0 ? 0 : event.budgetLeft }€ sur votre budget total de {event.budget}€</h2>}\r\n                                    {event.status === \"pending\" && <h2>Plus que {getDaysLeftBeforeEvent()} jours à patienter</h2>}\r\n                                    <div className=\"progressBarEvent\">\r\n                                        <ProgressBar now={pourcent} />\r\n                                    </div>\r\n                                    {event.status === \"creating\" &&\r\n                                        <ButtonSmall\r\n                                            onClick={(e) => history.push('/creer-mon-evenement/etape-2')}\r\n                                            color=\"orange\"\r\n                                            value=\"Reprendre mon évènement\"\r\n                                            backgroundColor=\"rgba(245, 192, 67)\"\r\n                                        />\r\n                                    }\r\n                                </div>\r\n                                <div className=\"dashboardInfo\">\r\n                                    <div className={windowsWidth < 600 ? \"insetLeftSide mobile\" : \"insetLeftSide\"}>\r\n                                        <div className=\"headerDashboardInset\">\r\n                                            <h2 style={{color:'rgba(245, 192, 67)'}}>Infos évènement</h2>\r\n                                        </div>\r\n                                        <div className=\"dashboardInfoContent\" style={{minHeight:'0px'}}>\r\n                                            <div className=\"item\">\r\n                                                <label>Nom de l'évènement:</label>\r\n                                                <p>{event.name}</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Date:</label>\r\n                                                <p>{new Date(event.date).toLocaleDateString(\"fr-FR\", { weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\" })}</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Créneau:</label>\r\n                                                <p style={{color:'rgb(239 25 136)'}}>Commence à <span>{formatLabelTimePicker(event.startAt)}</span></p>\r\n                                                <p style={{color:'rgb(27 76 239)'}}>se termine à <span>{formatLabelTimePicker(event.endAt)}</span></p>\r\n                                            </div>\r\n                                            {moreView &&\r\n                                             <div className=\"item\">\r\n                                                <label>Nombre de personnes:</label>\r\n                                                <p>{event.people} personnes</p>\r\n                                            </div>\r\n                                            }\r\n                                            {moreView &&\r\n                                            <div className=\"item\">\r\n                                                <label>Nombre de m²:</label>\r\n                                                <p>{event.placeSize}</p>\r\n                                            </div>\r\n                                            }\r\n                                            <div className=\"item\" style={{marginBottom:'unset'}}>\r\n                                                <label>Afficher plus\r\n                                                <button style={{backgroundColor:'rgba(244, 244, 244)', border:'0px', fontSize:'30px'}} onClick={() => more_view()}>{moreView ? '+' : '-'}</button></label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"item buttonContainer\">\r\n                                            {event.status === \"creating\" &&\r\n                                                <ButtonSmall\r\n                                                    onClick={() => history.push('/creer-mon-evenement/etape-1')}\r\n                                                    color=\"grey\"\r\n                                                    value=\"Modifier les informations\"\r\n                                                    marginTop=\"20px\"\r\n                                                />\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {windowsWidth < 600 && <div className=\"separator\"></div>}\r\n\r\n                                    <div className=\"insetRightSide\">\r\n                                        {!isMobile() ?\r\n                                            <div className=\"headerDashboardInset\">\r\n                                                <h2 style={{color:'rgba(245, 192, 67)'}}>Prestataires sélectionnés</h2><br/>\r\n                                                {event.choosedServices.length > 0 ?\r\n                                                    <p style={{color:'rgba(245, 192, 67)'}}>{sellers && sellers.length} prestataires au total</p>\r\n                                                    : <span>Vous n'avez pas encore choisi de prestataire</span>\r\n                                                }\r\n                                            </div>\r\n                                            :\r\n                                            <div className=\"headerDashboardInset\">\r\n                                                <h2 style={{color:'rgba(245, 192, 67)', marginLeft:'10%'}}>Prestataires sélectionnés</h2>\r\n                                                {sellers && sellers.length > 0 ?\r\n                                                    <p style={{color:'rgba(245, 192, 67)'}}>{sellers && sellers.length} prestataires au total</p>\r\n                                                    : <span>Vous n'avez pas encore choisi de prestataire</span>}\r\n                                            </div>\r\n                                        }\r\n                                        <div>\r\n                                            <Slideshow eventStatus={event.status} sellers={sellers} windowsWidth={windowsWidth} isMobile={isMobile()} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                            :\r\n                            <div className={isMobile() ? \"noEventDisplayDashboard mobile\" : \"noEventDisplayDashboard\"}>\r\n                                <Image url=\"/images/triste.png\" />\r\n                                <h2>C’est dur à croire!</h2>\r\n                                <p>Mais il semblerait que n’ayez toujours pas planifié d’évènement sur NIVID</p>\r\n                                <button onClick={() => handleCreateEvent()}>Créer mon premier évènement</button>\r\n                                {error.length > 0 && <p className=\"errorMessage\">{error}</p>}\r\n                            </div>\r\n\r\n                        }\r\n                    </div>\r\n                    {!isMobile() &&\r\n                        <div>\r\n                            {event.status === \"creating\" &&\r\n                                <InterestedSellers />\r\n                            }\r\n                            <BlogWidget />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                    : step === 2 ?\r\n                        <UpdateProfil isMobile={isMobile()} />\r\n                        : step === 3 &&\r\n                        <WishList eventStatus={event.status} isMobile={isMobile()} />\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}