{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\My Project\\\\Copie de Nivid\\\\Copie de Nivid (1)\\\\src\\\\pages\\\\paymentConfirm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"../context/userContext\"; // context\n\nimport { useHistory } from 'react-router-dom';\nimport { useLocation } from \"react-router-dom\";\nimport { ButtonRoundLarge } from '../components/utilities/Buttons';\nimport ServiceDescription from \"../components/ServiceDescription\";\n\nconst PaymentConfirm = () => {\n  _s();\n\n  const [isPayment, setIsPayment] = useState(false);\n  const history = useHistory();\n  const {\n    user,\n    event,\n    setCurrentStepProcess,\n    addSalesInDB,\n    updateEventStatus,\n    getSalesOfSellerIdFromDB,\n    sendInBlue_sendRecapToUserAfterPayment,\n    sendInBlue_sendNewSaleToSeller,\n    getEmailOfSellerWithUid,\n    getSaleTokenOfEventFromDb,\n    checkoutCheck\n  } = useAuth(); // context\n\n  const search = useLocation().search;\n  const eventId = new URLSearchParams(search).get('id');\n  const saleToken = new URLSearchParams(search).get('token');\n  const session_id = new URLSearchParams(search).get('session_id');\n  setCurrentStepProcess(31);\n  useEffect(() => {\n    if (eventId === undefined || eventId.length < 7 || eventId !== event.id) return history.push('/dashboard');\n    if (event && event.status && event.status !== \"creating\") return history.push('/dashboard');\n    getSaleTokenOfEventFromDb().then(token => {\n      return saleToken !== token && history.push('/dashboard');\n    });\n    checkoutCheck(session_id).then(res => {\n      return res.status === \"paid\" ? createSales(res.amount, res.id) : history.push('/dashboard');\n    });\n  }, []);\n\n  async function createSales(amount, stripeId) {\n    const sellersUniqueIds = await getSellersIds();\n    let finalSales = []; // On map sur les ids tri√©s, puis on trie les services pour les attribuer au bon seller\n\n    sellersUniqueIds.map(async uniqueId => {\n      const sellerServices = event.choosedServices.filter(service => service.sellerId === uniqueId); // On modifie les services dans le tableau pour leur donner la structure dont on a besoin\n\n      let newSellerServices = [];\n      sellerServices.forEach(service => {\n        const newService = {\n          id: service.id,\n          quantity: service.quantity,\n          price: service.price,\n          image: service.images[0].url,\n          name: service.name,\n          variations: service.variations,\n          variation: service.variation,\n          note: service.note\n        };\n        newSellerServices = [...newSellerServices, newService];\n      });\n      const sellerSales = await getSalesOfSellerIdFromDB(uniqueId);\n      let total = 0;\n      newSellerServices.forEach(service => service.variations && service.variations.length > 0 ? total += service.variations.filter(vari => vari.name === service.variation)[0].price * service.quantity : total += service.price * service.quantity); // On structure le sale comme on l'a d√©cid√©\n\n      finalSales = [...finalSales, {\n        eventID: event.id,\n        sellerID: uniqueId,\n        userID: user.uid,\n        eventDate: event.date,\n        choosedServices: newSellerServices,\n        paid: amount,\n        date: Date.now(),\n        // √† recevoir de stripe\n        status: \"pending\",\n        transactionID: stripeId,\n        total: total,\n        id: sellerSales.length + 1,\n        people: event.people,\n        placeSize: event.placeSize,\n        startAt: event.startAt,\n        endAt: event.endAt,\n        sellerNote: \"\"\n      }];\n      const sellersEmail = await getEmailOfSellerWithUid(uniqueId);\n      sendInBlue_sendNewSaleToSeller(sellersEmail, newSellerServices, event); // Cette fonction est appel√©e pour le moment au chargement de la pag mais il faudra une confirmation de stripe pour l'appeler.\n\n      if (sellersUniqueIds.length === finalSales.length) {\n        await addSalesInDB(finalSales);\n        updateEventStatus(\"pending\");\n        sendInBlue_sendRecapToUserAfterPayment(user.email, finalSales, event);\n      }\n    });\n  }\n\n  async function getSellersIds() {\n    // On r√©cup√®re tous les ids des sellers pr√©sents dans tous les services puis on les trie\n    let sellersIds = [];\n    event.choosedServices.map(service => sellersIds.push(service.sellerId));\n    const sellersUniqueIds = sellersIds.reduce((acc, current) => {\n      const isFound = acc.find(item => item === current);\n      return !isFound ? acc = [...acc, current] : acc;\n    }, []);\n    return sellersUniqueIds;\n  }\n\n  return !isPayment && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"paymentConfirmContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paymentConfirmTop\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: \"/images/wouhou.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Votre paiement a bien \\xE9t\\xE9 re\\xE7u, merci !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paymentConfirmBottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Vous pouvez aussi d\\xE8s \\xE0 pr\\xE9sent inviter des personnes \\xE0 votre \\xE9v\\xE8nements! \\uD83E\\uDD73\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(ButtonRoundLarge, {\n          onClick: () => history.push('/creer-mon-evenement/etape-3/invitations'),\n          color: \"blue\",\n          value: \"Pr\\xE9parer mes invitations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"backconfirm\",\n        children: \"Revenir \\xE0 l'accueil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PaymentConfirm, \"XonuvymGYL/MvDOW+3DqDVR9Xfw=\", false, function () {\n  return [useHistory, useAuth, useLocation];\n});\n\n_c = PaymentConfirm;\nexport default PaymentConfirm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentConfirm\");","map":{"version":3,"sources":["F:/My Project/Copie de Nivid/Copie de Nivid (1)/src/pages/paymentConfirm.js"],"names":["React","useState","useEffect","useAuth","useHistory","useLocation","ButtonRoundLarge","ServiceDescription","PaymentConfirm","isPayment","setIsPayment","history","user","event","setCurrentStepProcess","addSalesInDB","updateEventStatus","getSalesOfSellerIdFromDB","sendInBlue_sendRecapToUserAfterPayment","sendInBlue_sendNewSaleToSeller","getEmailOfSellerWithUid","getSaleTokenOfEventFromDb","checkoutCheck","search","eventId","URLSearchParams","get","saleToken","session_id","undefined","length","id","push","status","then","token","res","createSales","amount","stripeId","sellersUniqueIds","getSellersIds","finalSales","map","uniqueId","sellerServices","choosedServices","filter","service","sellerId","newSellerServices","forEach","newService","quantity","price","image","images","url","name","variations","variation","note","sellerSales","total","vari","eventID","sellerID","userID","uid","eventDate","date","paid","Date","now","transactionID","people","placeSize","startAt","endAt","sellerNote","sellersEmail","email","sellersIds","reduce","acc","current","isFound","find","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../context/userContext\"; // context\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport { ButtonRoundLarge } from '../components/utilities/Buttons'\r\nimport ServiceDescription from \"../components/ServiceDescription\";\r\n\r\n\r\nconst PaymentConfirm = () => {\r\n\r\n    const [isPayment, setIsPayment] = useState(false)\r\n    const history = useHistory()\r\n\r\n    const { user,\r\n        event,\r\n        setCurrentStepProcess,\r\n        addSalesInDB,\r\n        updateEventStatus,\r\n        getSalesOfSellerIdFromDB,\r\n        sendInBlue_sendRecapToUserAfterPayment,\r\n        sendInBlue_sendNewSaleToSeller,\r\n        getEmailOfSellerWithUid,\r\n        getSaleTokenOfEventFromDb,\r\n        checkoutCheck } = useAuth() // context\r\n\r\n    const search = useLocation().search\r\n    const eventId = new URLSearchParams(search).get('id')\r\n    const saleToken = new URLSearchParams(search).get('token')\r\n    const session_id = new URLSearchParams(search).get('session_id')\r\n\r\n    setCurrentStepProcess(31)\r\n\r\n    useEffect(() => {\r\n        if (eventId === undefined || eventId.length < 7 || eventId !== event.id) return history.push('/dashboard')\r\n        if (event && event.status && event.status !== \"creating\") return history.push('/dashboard')\r\n\r\n        getSaleTokenOfEventFromDb().then(token => {\r\n            return saleToken !== token && history.push('/dashboard')\r\n        })\r\n        checkoutCheck(session_id)\r\n            .then(res => {\r\n                return res.status === \"paid\" ? createSales(res.amount, res.id) : history.push('/dashboard')\r\n            })\r\n    }, [])\r\n\r\n    async function createSales(amount, stripeId) {\r\n        const sellersUniqueIds = await getSellersIds()\r\n        let finalSales = []\r\n        // On map sur les ids tri√©s, puis on trie les services pour les attribuer au bon seller\r\n        sellersUniqueIds.map(async uniqueId => {\r\n            const sellerServices = event.choosedServices.filter(service => service.sellerId === uniqueId)\r\n\r\n            // On modifie les services dans le tableau pour leur donner la structure dont on a besoin\r\n            let newSellerServices = []\r\n            sellerServices.forEach(service => {\r\n                const newService = {\r\n                    id: service.id,\r\n                    quantity: service.quantity,\r\n                    price: service.price,\r\n                    image: service.images[0].url,\r\n                    name: service.name,\r\n                    variations: service.variations,\r\n                    variation: service.variation,\r\n                    note: service.note\r\n                }\r\n                newSellerServices = [...newSellerServices, newService]\r\n            })\r\n            const sellerSales = await getSalesOfSellerIdFromDB(uniqueId)\r\n            let total = 0\r\n            newSellerServices.forEach(service =>\r\n                (service.variations && service.variations.length > 0) ? \r\n                total += service.variations.filter(vari => vari.name === service.variation)[0].price * service.quantity\r\n                : total += service.price * service.quantity\r\n            )\r\n\r\n            // On structure le sale comme on l'a d√©cid√©\r\n            finalSales = [...finalSales, {\r\n                eventID: event.id,\r\n                sellerID: uniqueId,\r\n                userID: user.uid,\r\n                eventDate: event.date,\r\n                choosedServices: newSellerServices,\r\n                paid: amount,\r\n                date: Date.now(), // √† recevoir de stripe\r\n                status: \"pending\",\r\n                transactionID: stripeId,\r\n                total: total,\r\n                id: sellerSales.length + 1,\r\n                people: event.people,\r\n                placeSize: event.placeSize,\r\n                startAt: event.startAt,\r\n                endAt: event.endAt,\r\n                sellerNote: \"\"\r\n            }]\r\n\r\n            const sellersEmail = await getEmailOfSellerWithUid(uniqueId)\r\n            sendInBlue_sendNewSaleToSeller(sellersEmail, newSellerServices, event)\r\n\r\n            // Cette fonction est appel√©e pour le moment au chargement de la pag mais il faudra une confirmation de stripe pour l'appeler.\r\n            if (sellersUniqueIds.length === finalSales.length) {\r\n                await addSalesInDB(finalSales)\r\n                updateEventStatus(\"pending\")\r\n                sendInBlue_sendRecapToUserAfterPayment(user.email, finalSales, event)\r\n            }\r\n        })\r\n    }\r\n\r\n    async function getSellersIds() {\r\n        // On r√©cup√®re tous les ids des sellers pr√©sents dans tous les services puis on les trie\r\n        let sellersIds = []\r\n        event.choosedServices.map(service => sellersIds.push(service.sellerId))\r\n\r\n        const sellersUniqueIds = sellersIds.reduce((acc, current) => {\r\n            const isFound = acc.find(item => item === current);\r\n            return !isFound ? acc = [...acc, current] : acc\r\n        }, [])\r\n        return sellersUniqueIds\r\n    }\r\n\r\n    return !isPayment && (\r\n        <div>\r\n            <div className=\"paymentConfirmContainer\">\r\n                <div className=\"paymentConfirmTop\">\r\n                    <img alt=\"\" src=\"/images/wouhou.png\" />\r\n                    <h2>Votre paiement a bien √©t√© re√ßu, merci !</h2>\r\n                    {/* <ButtonRoundLarge\r\n                        onClick={() => history.push('/dashboard')}\r\n                        color=\"orange\"\r\n                        value=\"Voir mon √©v√®nement\"\r\n                    /> */}\r\n                </div>\r\n                <div className=\"paymentConfirmBottom\">\r\n                <p>Vous pouvez aussi d√®s √† pr√©sent inviter des personnes √† votre √©v√®nements! ü•≥</p>\r\n                    <ButtonRoundLarge\r\n                        onClick={() => history.push('/creer-mon-evenement/etape-3/invitations')}\r\n                        color=\"blue\"\r\n                        value=\"Pr√©parer mes invitations\"\r\n                    />\r\n                </div>\r\n                <div className=\"backconfirm\">Revenir √† l'accueil</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PaymentConfirm;\r\n"]},"metadata":{},"sourceType":"module"}