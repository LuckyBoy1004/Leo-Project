{"ast":null,"code":"import _regeneratorRuntime from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{useState,useEffect}from'react';import{useAuth}from'../context/userContext';import{CSSTransition}from'react-transition-group';import Title from'./utilities/Title';import SubTitle from'./utilities/SubTitle';import{ButtonSmall}from'./utilities/Buttons';import Image from'../components/utilities/Image';import ModalYesNo from'./utilities/ModalYesNo';import imgwitness from\"../images/witness.svg\";import imgwishlist from\"../images/wishlist.svg\";import imgshooping from\"../images/shopping-bag.svg\";import emptyStar from\"../images/starempty.png\";import star from\"../images/star.svg\";import greenTrace from\"../images/greenTrace.png\";import EarningChart from'../components/EarningChart';import NoteWidget from'../components/NoteWidget';import Loader from'./Loader';var Prest_Dashboard_Dashboard=function Prest_Dashboard_Dashboard(_ref){var setStep=_ref.setStep;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMounted=_useState2[0],setIsMounted=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sales=_useState4[0],setSales=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),monthlyEarns=_useState6[0],setmMonthlyEarns=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),monthlySales=_useState8[0],setmMonthlySales=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),monthlyViews=_useState10[0],setmMonthlyViews=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isModalOpened=_useState12[0],setIsModalOpened=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalAmount=_useState14[0],setTotalAmount=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),wishListCount=_useState16[0],setWishListCount=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),reviews=_useState18[0],setReviews=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),position=_useState20[0],setPosition=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),sellersCount=_useState22[0],setSellersCount=_useState22[1];var _useAuth=useAuth(),seller=_useAuth.seller,getSalesOfSellerIdFromDB=_useAuth.getSalesOfSellerIdFromDB,formateToDateWithWords=_useAuth.formateToDateWithWords,formateToDate=_useAuth.formateToDate,getViewsOfSeller=_useAuth.getViewsOfSeller,sendInBlue_sendPaymentRequestToAdmin=_useAuth.sendInBlue_sendPaymentRequestToAdmin,getTotalAmountDueToSeller=_useAuth.getTotalAmountDueToSeller,getWishListCountOfSeller=_useAuth.getWishListCountOfSeller,getReviewsOfSellerUid=_useAuth.getReviewsOfSellerUid,getSellerPosition=_useAuth.getSellerPosition,getSellersCount=_useAuth.getSellersCount;useEffect(function(){getSales().then(function(salesList){getMonthlyEarns(salesList).then(function(res){setmMonthlyEarns(res);getMonthlySales(salesList).then(function(res){setmMonthlySales(res);getMonthlyViews().then(function(res){setmMonthlyViews(res);getWishListCountOfSeller(seller.uid).then(function(res){setWishListCount(res);getReviewsOfSellerUid(seller.uid).then(function(res){setReviews(res);getPositionOfSeller().then(function(res){getSellersCount().then(function(res){setSellersCount(res);setIsMounted(true);});});});});});});});});},[]);function getSales(){return _getSales.apply(this,arguments);}function _getSales(){_getSales=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var salesList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getSalesOfSellerIdFromDB(seller.uid);case 2:salesList=_context.sent;setSales(salesList);return _context.abrupt(\"return\",salesList);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getSales.apply(this,arguments);}function getMonthlyEarns(_x){return _getMonthlyEarns.apply(this,arguments);}function _getMonthlyEarns(){_getMonthlyEarns=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(salesList){var lastMonthEarns,earns;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:lastMonthEarns=salesList.filter(function(sale){return sale.date>dateTodayMinusByDay(30)&&sale.status===\"validated\"&&sale.total===sale.paid;});earns=0;lastMonthEarns.map(function(sale){return earns=earns+sale.total;});return _context2.abrupt(\"return\",earns);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getMonthlyEarns.apply(this,arguments);}function getMonthlySales(_x2){return _getMonthlySales.apply(this,arguments);}function _getMonthlySales(){_getMonthlySales=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(salesList){var lastMonthSales,lastMonthServices;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:lastMonthSales=salesList.filter(function(sale){return sale.date>dateTodayMinusByDay(30)&&sale.status===\"validated\";});lastMonthServices=[];lastMonthSales.forEach(function(sale){sale.choosedServices.forEach(function(service){lastMonthServices.push(service);});});return _context3.abrupt(\"return\",lastMonthServices.length);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _getMonthlySales.apply(this,arguments);}function getMonthlyViews(){return _getMonthlyViews.apply(this,arguments);}function _getMonthlyViews(){_getMonthlyViews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var views,lastMonthViews;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getViewsOfSeller(seller.uid);case 2:views=_context4.sent;lastMonthViews=views.filter(function(view){return view.date.seconds*1000>dateTodayMinusByDay(30);});return _context4.abrupt(\"return\",lastMonthViews);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _getMonthlyViews.apply(this,arguments);}function dateTodayMinusByDay(day){var date=new Date();date.setHours(date.getHours()-24*day);return date;}function dateTodayPlusByDay(day){var date=new Date();date.setHours(date.getHours()+24*day);return date;}function getDaysLeftBeforeSaleDelete(eventDate){var daysLeftTimestamp=(eventDate.seconds*1000||eventDate)-Date.now();var daysLeft=Math.ceil(daysLeftTimestamp/1000/86400);return daysLeft-10===0?\"aujourd'hui\":\"\".concat(daysLeft-10,\" jours\");}function handlePaymentRequest(){return _handlePaymentRequest.apply(this,arguments);}function _handlePaymentRequest(){_handlePaymentRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var amount;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getTotalAmountDueToSeller();case 2:amount=_context5.sent;setTotalAmount(amount);setIsModalOpened(true);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return _handlePaymentRequest.apply(this,arguments);}function handleYesNoRequestPayment(val){if(val===\"yes\"){if(totalAmount>10){sendInBlue_sendPaymentRequestToAdmin();}else{}}setIsModalOpened(false);}function getPositionOfSeller(){return _getPositionOfSeller.apply(this,arguments);}function _getPositionOfSeller(){_getPositionOfSeller=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var position;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getSellerPosition(seller.uid);case 2:position=_context6.sent;setPosition(position);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return _getPositionOfSeller.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CSSTransition,{in:!isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsx(Loader,{})}),/*#__PURE__*/_jsx(CSSTransition,{in:isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"prest_Dashboard_Dashboard\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"prest_dashboard_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard_left_container\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Revenus du mois actuel\"}),/*#__PURE__*/_jsx(Title,{type:\"h1\",font:\"roboto-bold\",value:\"\".concat(monthlyEarns,\"\\u20AC\")}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return handlePaymentRequest();},color:\"blue\",value:\"Demander un virement\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard_statsHeader_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image blue\",children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Image,{url:imgwitness})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-bold\",value:\"\".concat(monthlyViews.length)}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(SubTitle,{color:\"grey\",type:\"big\",font:\"roboto-bold\",value:\"Nombre de vues mensuelles\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image red\",children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Image,{url:imgwishlist})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-bold\",value:wishListCount}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(SubTitle,{color:\"grey\",type:\"big\",font:\"roboto-bold\",value:\"Ajouts en wishlist\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image yellow\",children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Image,{url:imgshooping})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-bold\",value:\"\".concat(monthlySales)}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(SubTitle,{color:\"grey\",type:\"big\",font:\"roboto-bold\",value:\"Nombre de ventes mensuelles\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"prest_dashboard_1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Vos commandes r\\xE9centes\"}),sales.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"blueLink\",onClick:function onClick(){return setStep(2);},children:\"Voir toutes les commandes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[sales.filter(function(sale){return sale.status!==\"rejected\";}).sort(function(a,b){return b.date-a.date;}).slice(0,4).map(function(sale,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[sale.status===\"pending\"&&/*#__PURE__*/_jsx(SubTitle,{color:\"#acacac\",type:\"big\",font:\"roboto-bold\",value:\"Commande r\\xE9cente en attente de validation\"}),sale.status===\"validated\"&&/*#__PURE__*/_jsx(SubTitle,{color:\"rgb(127, 207, 127)\",type:\"big\",font:\"roboto-bold\",value:\"Commande valid\\xE9e\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left imagesSuperpos\",children:sale.choosedServices.slice(0,3).map(function(service){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Image,{url:service.image})});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"commandTitle\",children:[\"Commande #\",sale.id,\" - \",/*#__PURE__*/_jsx(\"span\",{children:formateToDate(sale.date)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Montant de la commande : \",/*#__PURE__*/_jsxs(\"span\",{children:[sale.total,\"\\u20AC\"]})]})]})]})]},key);}),sales.filter(function(sale){return sale.status!==\"rejected\";}).length<1&&/*#__PURE__*/_jsx(\"div\",{className:\"textInEmptyQuery\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Aucune commande r\\xE9cente\"})})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"prest_dashboard_2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Rappel\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(SubTitle,{type:\"big\",font:\"roboto-bold\",value:\"\\xC9v\\xE8nements prochains \\xE0 pr\\xE9parer\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[sales.filter(function(sale){return sale.eventDate<dateTodayPlusByDay(10)&&sale.status===\"validated\";}).sort(function(a,b){return b.eventDate-a.eventDate;}).slice(0,3).map(function(sale,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"item \".concat(sale.eventDate<dateTodayPlusByDay(5)?\"red\":\"blue\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"commandTitle\",children:[\"Commande #\",sale.id,\" - \",/*#__PURE__*/_jsx(\"span\",{children:formateToDate(sale.date)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"blueLink\",children:\"Voir les d\\xE9tails de la commande\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de l'\\xE9v\\xE8nement :\"}),/*#__PURE__*/_jsx(\"p\",{children:formateToDateWithWords(sale.eventDate)})]})]},key);}),sales.filter(function(sale){return sale.date>dateTodayMinusByDay(10)&&sale.status===\"validated\";}).length<1&&/*#__PURE__*/_jsx(\"div\",{className:\"textInEmptyQuery\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Aucun rappel\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(SubTitle,{type:\"big\",font:\"roboto-bold\",value:\"Commandes \\xE0 valider/v\\xE9rifier avant expiration\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[sales.filter(function(sale){return sale.eventDate<dateTodayPlusByDay(20)&&sale.status===\"pending\";}).sort(function(a,b){return b.eventDate-a.eventDate;}).slice(0,2).map(function(sale,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Commande toujours en attente de validation\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Expire: \",/*#__PURE__*/_jsx(\"span\",{children:getDaysLeftBeforeSaleDelete(sale.eventDate)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left imagesSuperpos\",children:sale.choosedServices.slice(0,3).map(function(service){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Image,{url:service.image})});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"commandTitle\",children:[\"Commande #\",sale.id,\" - \",/*#__PURE__*/_jsx(\"span\",{children:formateToDate(sale.date)})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"commandTitle\",children:[\"Montant de la commande : \",/*#__PURE__*/_jsxs(\"span\",{children:[sale.total,\"\\u20AC\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de l'\\xE9v\\xE8nement :\"}),/*#__PURE__*/_jsx(\"p\",{children:formateToDateWithWords(sale.eventDate)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre de personne :\"}),/*#__PURE__*/_jsxs(\"p\",{children:[sale.people,\" personnes\"]})]})]})]},key);}),sales.filter(function(sale){return sale.eventDate<dateTodayPlusByDay(20)&&sale.status===\"pending\";}).length<1&&/*#__PURE__*/_jsx(\"div\",{className:\"textInEmptyQuery\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Aucune commande \\xE0 valider\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legendeContainer\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"L\\xE9gende :\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"blueLegend\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Prochainement\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"redLegend\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Tr\\xE8s prochainement\"})]})]}),sales.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"buttonContainer\",children:/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return setStep(2);},color:\"blue\",value:\"Voir toutes les commandes\"})})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"reviewsContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviewsContainer__header\",children:/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Commentaires r\\xE9cents\"})}),reviews.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"textInEmptyQuery\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Aucun commentaire \\xE0 afficher\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__left\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Votre note actuelle est\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__globalNoteStars\",children:[/*#__PURE__*/_jsx(Image,{url:star}),/*#__PURE__*/_jsx(Image,{url:star}),/*#__PURE__*/_jsx(Image,{url:star}),/*#__PURE__*/_jsx(Image,{url:star}),/*#__PURE__*/_jsx(Image,{url:emptyStar})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewsContainer__globalNote\",children:/*#__PURE__*/_jsxs(\"p\",{children:[seller.note,\"/5\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__classement\",children:[/*#__PURE__*/_jsx(Title,{type:\"h2\",align:\"center\",font:\"roboto-medium\",value:\"Vous \\xEAtes class\\xE9*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__classementContent\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[position,\"\\xE8me\",/*#__PURE__*/_jsx(Image,{url:greenTrace})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"sur \",sellersCount]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewsContainer__right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reviewsContainer__cards__container\",children:reviews.sort(function(a,b){var keyA=new Date(a.date),keyB=new Date(b.date);// Compare the 2 dates\nif(keyA<keyB)return-1;if(keyA>keyB)return 1;return 0;}).slice(0,3).map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__card\",children:[new Date().getDate()-7<new Date(item.date.seconds*1000).getDate()&&/*#__PURE__*/_jsx(\"span\",{children:\"Nouveau\"}),/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"reviewsContainer__card__subTitle\",children:[\"Ev\\xE8nement du \",formateToDate(item.eventDate.seconds*1000)]}),/*#__PURE__*/_jsx(\"p\",{className:\"reviewsContainer__card__content\",children:item.comment}),/*#__PURE__*/_jsx(NoteWidget,{note:item.note})]});})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewsContainer__bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviewsContainer__bottom_button\",children:/*#__PURE__*/_jsx(ButtonSmall,{color:\"grey\",value:\"Voir plus de commentaires\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"* Ce classement est g\\xE9n\\xE9r\\xE9 en fonction du type de service que vous proposez & du p\\xE9rim\\xE8tre dans lequel vous vous trouvez par rapport aux autres pr\\xE9stataires\"})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"chartContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chartContainer__header\",children:/*#__PURE__*/_jsx(Title,{type:\"h2\",font:\"roboto-medium\",value:\"Vos statistiques\"})}),/*#__PURE__*/_jsx(EarningChart,{sales:sales})]})]})}),/*#__PURE__*/_jsx(CSSTransition,{in:isModalOpened,timeout:200,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsx(ModalYesNo,{callback:function callback(val){return handleYesNoRequestPayment(val);},value:\"Solde actuel: \".concat(totalAmount,\"\\u20AC\"),value2:totalAmount<10&&\"Impossible de demander un virement, votre solde est nul.\",disabled:totalAmount<10?true:false})})]});};export default Prest_Dashboard_Dashboard;","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/components/Prest_Dashboard_Dashboard.js"],"names":["useState","useEffect","useAuth","CSSTransition","Title","SubTitle","ButtonSmall","Image","ModalYesNo","emptyStar","greenTrace","EarningChart","NoteWidget","Loader","Prest_Dashboard_Dashboard","setStep","isMounted","setIsMounted","sales","setSales","monthlyEarns","setmMonthlyEarns","monthlySales","setmMonthlySales","monthlyViews","setmMonthlyViews","isModalOpened","setIsModalOpened","totalAmount","setTotalAmount","wishListCount","setWishListCount","reviews","setReviews","position","setPosition","sellersCount","setSellersCount","seller","getSalesOfSellerIdFromDB","formateToDateWithWords","formateToDate","getViewsOfSeller","sendInBlue_sendPaymentRequestToAdmin","getTotalAmountDueToSeller","getWishListCountOfSeller","getReviewsOfSellerUid","getSellerPosition","getSellersCount","getSales","then","salesList","getMonthlyEarns","res","getMonthlySales","getMonthlyViews","uid","getPositionOfSeller","lastMonthEarns","filter","sale","date","dateTodayMinusByDay","status","total","paid","earns","map","lastMonthSales","lastMonthServices","forEach","choosedServices","service","push","length","views","lastMonthViews","view","seconds","day","Date","setHours","getHours","dateTodayPlusByDay","getDaysLeftBeforeSaleDelete","eventDate","daysLeftTimestamp","now","daysLeft","Math","ceil","handlePaymentRequest","amount","handleYesNoRequestPayment","val","imgwitness","imgwishlist","imgshooping","sort","a","b","slice","key","image","id","people","star","note","keyA","keyB","item","getDate","name","comment"],"mappings":"ojBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,OAAT,KAAwB,wBAAxB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,OAASC,WAAT,KAA4B,qBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,+BAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,C,kJAKA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,C,qCAEA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CAEA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAGA,GAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eAEbf,QAAQ,CAAC,KAAD,CAFK,wCAExCgB,SAFwC,eAE7BC,YAF6B,8BAGrBjB,QAAQ,CAAC,EAAD,CAHa,yCAGxCkB,KAHwC,eAGjCC,QAHiC,8BAINnB,QAAQ,CAAC,CAAD,CAJF,yCAIxCoB,YAJwC,eAI1BC,gBAJ0B,8BAKNrB,QAAQ,CAAC,CAAD,CALF,yCAKxCsB,YALwC,eAK1BC,gBAL0B,8BAMNvB,QAAQ,CAAC,CAAD,CANF,0CAMxCwB,YANwC,gBAM1BC,gBAN0B,gCAOLzB,QAAQ,CAAC,KAAD,CAPH,2CAOxC0B,aAPwC,gBAOzBC,gBAPyB,gCAQT3B,QAAQ,CAAC,CAAD,CARC,2CAQxC4B,WARwC,gBAQ3BC,cAR2B,gCASL7B,QAAQ,CAAC,CAAD,CATH,2CASxC8B,aATwC,gBASzBC,gBATyB,gCAUjB/B,QAAQ,CAAC,EAAD,CAVS,2CAUxCgC,OAVwC,gBAU/BC,UAV+B,gCAWfjC,QAAQ,CAAC,CAAD,CAXO,2CAWxCkC,QAXwC,gBAW9BC,WAX8B,gCAYPnC,QAAQ,CAAC,CAAD,CAZD,2CAYxCoC,YAZwC,gBAY1BC,eAZ0B,6BAwBvBnC,OAAO,EAxBgB,CAcvCoC,MAduC,UAcvCA,MAduC,CAe3CC,wBAf2C,UAe3CA,wBAf2C,CAgB3CC,sBAhB2C,UAgB3CA,sBAhB2C,CAiB3CC,aAjB2C,UAiB3CA,aAjB2C,CAkB3CC,gBAlB2C,UAkB3CA,gBAlB2C,CAmB3CC,oCAnB2C,UAmB3CA,oCAnB2C,CAoB3CC,yBApB2C,UAoB3CA,yBApB2C,CAqB3CC,wBArB2C,UAqB3CA,wBArB2C,CAsB3CC,qBAtB2C,UAsB3CA,qBAtB2C,CAuB3CC,iBAvB2C,UAuB3CA,iBAvB2C,CAwB3CC,eAxB2C,UAwB3CA,eAxB2C,CA0B/C/C,SAAS,CAAC,UAAM,CACZgD,QAAQ,GAAGC,IAAX,CAAgB,SAAAC,SAAS,CAAI,CACzBC,eAAe,CAACD,SAAD,CAAf,CAA2BD,IAA3B,CAAgC,SAAAG,GAAG,CAAI,CACnChC,gBAAgB,CAACgC,GAAD,CAAhB,CACAC,eAAe,CAACH,SAAD,CAAf,CAA2BD,IAA3B,CAAgC,SAAAG,GAAG,CAAI,CACnC9B,gBAAgB,CAAC8B,GAAD,CAAhB,CACAE,eAAe,GAAGL,IAAlB,CAAuB,SAAAG,GAAG,CAAI,CAC1B5B,gBAAgB,CAAC4B,GAAD,CAAhB,CACAR,wBAAwB,CAACP,MAAM,CAACkB,GAAR,CAAxB,CAAqCN,IAArC,CAA0C,SAAAG,GAAG,CAAI,CAC7CtB,gBAAgB,CAACsB,GAAD,CAAhB,CACAP,qBAAqB,CAACR,MAAM,CAACkB,GAAR,CAArB,CAAkCN,IAAlC,CAAuC,SAAAG,GAAG,CAAI,CAC1CpB,UAAU,CAACoB,GAAD,CAAV,CACAI,mBAAmB,GAAGP,IAAtB,CAA2B,SAAAG,GAAG,CAAI,CAC9BL,eAAe,GAAGE,IAAlB,CAAuB,SAAAG,GAAG,CAAI,CAC1BhB,eAAe,CAACgB,GAAD,CAAf,CACApC,YAAY,CAAC,IAAD,CAAZ,CACH,CAHD,EAIH,CALD,EAMH,CARD,EASH,CAXD,EAYH,CAdD,EAeH,CAjBD,EAkBH,CApBD,EAqBH,CAtBD,EAuBH,CAxBQ,CAwBN,EAxBM,CAAT,CA1B+C,QAoDhCgC,CAAAA,QApDgC,kIAoD/C,uKAC4BV,CAAAA,wBAAwB,CAACD,MAAM,CAACkB,GAAR,CADpD,QACUL,SADV,eAEIhC,QAAQ,CAACgC,SAAD,CAAR,CAFJ,gCAGWA,SAHX,wDApD+C,mDA0DhCC,CAAAA,eA1DgC,yJA0D/C,kBAA+BD,SAA/B,+IACUO,cADV,CAC2BP,SAAS,CAACQ,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,CAAYC,mBAAmB,CAAC,EAAD,CAA/B,EAAuCF,IAAI,CAACG,MAAL,GAAgB,WAAvD,EAAsEH,IAAI,CAACI,KAAL,GAAeJ,IAAI,CAACK,IAA9F,EAArB,CAD3B,CAEQC,KAFR,CAEgB,CAFhB,CAGIR,cAAc,CAACS,GAAf,CAAmB,SAAAP,IAAI,QAAIM,CAAAA,KAAK,CAAGA,KAAK,CAAGN,IAAI,CAACI,KAAzB,EAAvB,EAHJ,iCAIWE,KAJX,0DA1D+C,0DAiEhCZ,CAAAA,eAjEgC,0JAiE/C,kBAA+BH,SAA/B,2JACUiB,cADV,CAC2BjB,SAAS,CAACQ,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,CAAYC,mBAAmB,CAAC,EAAD,CAA/B,EAAuCF,IAAI,CAACG,MAAL,GAAgB,WAA3D,EAArB,CAD3B,CAEUM,iBAFV,CAE8B,EAF9B,CAGID,cAAc,CAACE,OAAf,CAAuB,SAAAV,IAAI,CAAI,CAC3BA,IAAI,CAACW,eAAL,CAAqBD,OAArB,CAA6B,SAAAE,OAAO,CAAI,CACpCH,iBAAiB,CAACI,IAAlB,CAAuBD,OAAvB,EACH,CAFD,EAGH,CAJD,EAHJ,iCAQWH,iBAAiB,CAACK,MAR7B,0DAjE+C,0DA4EhCnB,CAAAA,eA5EgC,uJA4E/C,wLACwBb,CAAAA,gBAAgB,CAACJ,MAAM,CAACkB,GAAR,CADxC,QACUmB,KADV,gBAEUC,cAFV,CAE2BD,KAAK,CAAChB,MAAN,CAAa,SAAAkB,IAAI,QAAIA,CAAAA,IAAI,CAAChB,IAAL,CAAUiB,OAAV,CAAoB,IAApB,CAA2BhB,mBAAmB,CAAC,EAAD,CAAlD,EAAjB,CAF3B,kCAGWc,cAHX,0DA5E+C,kDAkF/C,QAASd,CAAAA,mBAAT,CAA6BiB,GAA7B,CAAkC,CAC9B,GAAMlB,CAAAA,IAAI,CAAG,GAAImB,CAAAA,IAAJ,EAAb,CACAnB,IAAI,CAACoB,QAAL,CAAcpB,IAAI,CAACqB,QAAL,GAAmB,GAAKH,GAAtC,EACA,MAAOlB,CAAAA,IAAP,CACH,CAED,QAASsB,CAAAA,kBAAT,CAA4BJ,GAA5B,CAAiC,CAC7B,GAAMlB,CAAAA,IAAI,CAAG,GAAImB,CAAAA,IAAJ,EAAb,CACAnB,IAAI,CAACoB,QAAL,CAAcpB,IAAI,CAACqB,QAAL,GAAmB,GAAKH,GAAtC,EACA,MAAOlB,CAAAA,IAAP,CACH,CAED,QAASuB,CAAAA,2BAAT,CAAqCC,SAArC,CAAgD,CAC5C,GAAMC,CAAAA,iBAAiB,CAAG,CAACD,SAAS,CAACP,OAAV,CAAoB,IAApB,EAA4BO,SAA7B,EAA0CL,IAAI,CAACO,GAAL,EAApE,CACA,GAAMC,CAAAA,QAAQ,CAAGC,IAAI,CAACC,IAAL,CAAUJ,iBAAiB,CAAG,IAApB,CAA2B,KAArC,CAAjB,CACA,MAAOE,CAAAA,QAAQ,CAAG,EAAX,GAAkB,CAAlB,CAAsB,aAAtB,WAAyCA,QAAQ,CAAG,EAApD,UAAP,CACH,CAlG8C,QAoGhCG,CAAAA,oBApGgC,sKAoG/C,0KACyB/C,CAAAA,yBAAyB,EADlD,QACUgD,MADV,gBAEI/D,cAAc,CAAC+D,MAAD,CAAd,CACAjE,gBAAgB,CAAC,IAAD,CAAhB,CAHJ,wDApG+C,uDA0G/C,QAASkE,CAAAA,yBAAT,CAAmCC,GAAnC,CAAwC,CACpC,GAAIA,GAAG,GAAK,KAAZ,CAAmB,CACf,GAAIlE,WAAW,CAAG,EAAlB,CAAsB,CAClBe,oCAAoC,GACvC,CAFD,IAGK,CAEJ,CACJ,CACDhB,gBAAgB,CAAC,KAAD,CAAhB,CACH,CApH8C,QAsHhC8B,CAAAA,mBAtHgC,mKAsH/C,4KAC2BV,CAAAA,iBAAiB,CAACT,MAAM,CAACkB,GAAR,CAD5C,QACUtB,QADV,gBAEIC,WAAW,CAACD,QAAD,CAAX,CAFJ,wDAtH+C,sDA2H/C,mBACI,wCACI,KAAC,aAAD,EACI,EAAE,CAAE,CAAClB,SADT,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,KAAC,MAAD,IANJ,EADJ,cAUI,KAAC,aAAD,EACI,EAAE,CAAEA,SADR,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,aAAK,SAAS,CAAC,2BAAf,wBAEI,iBAAS,SAAS,CAAC,wBAAnB,wBACI,aAAK,SAAS,CAAC,0BAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,wBAA5C,EADJ,cAEI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,aAAtB,CAAoC,KAAK,WAAKI,YAAL,UAAzC,EAFJ,cAGI,KAAC,WAAD,EAAa,OAAO,CAAE,yBAAMuE,CAAAA,oBAAoB,EAA1B,EAAtB,CAAoD,KAAK,CAAC,MAA1D,CAAiE,KAAK,CAAC,sBAAvE,EAHJ,GADJ,cAMI,aAAK,SAAS,CAAC,iCAAf,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBAA4B,mCAAM,KAAC,KAAD,EAAO,GAAG,CAAEI,UAAZ,EAAN,EAA5B,EADJ,cAEI,aAAK,SAAS,CAAC,SAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,aAAtB,CAAoC,KAAK,WAAKvE,YAAY,CAACkD,MAAlB,CAAzC,EADJ,cAEI,eAFJ,cAGI,KAAC,QAAD,EAAU,KAAK,CAAC,MAAhB,CAAuB,IAAI,CAAC,KAA5B,CAAkC,IAAI,CAAC,aAAvC,CAAqD,KAAK,CAAC,2BAA3D,EAHJ,GAFJ,GADJ,cASI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,WAAf,uBAA2B,mCAAM,KAAC,KAAD,EAAO,GAAG,CAAEsB,WAAZ,EAAN,EAA3B,EADJ,cAEI,aAAK,SAAS,CAAC,SAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,aAAtB,CAAoC,KAAK,CAAElE,aAA3C,EADJ,cAEI,eAFJ,cAGI,KAAC,QAAD,EAAU,KAAK,CAAC,MAAhB,CAAuB,IAAI,CAAC,KAA5B,CAAkC,IAAI,CAAC,aAAvC,CAAqD,KAAK,CAAC,oBAA3D,EAHJ,GAFJ,GATJ,cAiBI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,cAAf,uBAA8B,mCAAM,KAAC,KAAD,EAAO,GAAG,CAAEmE,WAAZ,EAAN,EAA9B,EADJ,cAEI,aAAK,SAAS,CAAC,SAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,aAAtB,CAAoC,KAAK,WAAK3E,YAAL,CAAzC,EADJ,cAEI,eAFJ,cAGI,KAAC,QAAD,EAAU,KAAK,CAAC,MAAhB,CAAuB,IAAI,CAAC,KAA5B,CAAkC,IAAI,CAAC,aAAvC,CAAqD,KAAK,CAAC,6BAA3D,EAHJ,GAFJ,GAjBJ,GANJ,GAFJ,cAoCI,iBAAS,SAAS,CAAC,mBAAnB,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,2BAA5C,EADJ,CAEKJ,KAAK,CAACwD,MAAN,CAAe,CAAf,eACG,UAAG,SAAS,CAAC,UAAb,CAAwB,OAAO,CAAE,yBAAM3D,CAAAA,OAAO,CAAC,CAAD,CAAb,EAAjC,uCAHR,GADJ,cAOI,aAAK,SAAS,CAAC,SAAf,WAEKG,KAAK,CACDyC,MADJ,CACW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACG,MAAL,GAAgB,UAApB,EADf,EAEImC,IAFJ,CAES,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAACvC,IAAF,CAASsC,CAAC,CAACtC,IAArB,EAFT,EAGIwC,KAHJ,CAGU,CAHV,CAGa,CAHb,EAIIlC,GAJJ,CAIQ,SAACP,IAAD,CAAO0C,GAAP,qBACD,aAAK,SAAS,CAAC,MAAf,wBACI,aAAK,SAAS,CAAC,QAAf,WACK1C,IAAI,CAACG,MAAL,GAAgB,SAAhB,eAA6B,KAAC,QAAD,EAAU,KAAK,CAAC,SAAhB,CAA0B,IAAI,CAAC,KAA/B,CAAqC,IAAI,CAAC,aAA1C,CAAwD,KAAK,CAAC,8CAA9D,EADlC,CAEKH,IAAI,CAACG,MAAL,GAAgB,WAAhB,eAA+B,KAAC,QAAD,EAAU,KAAK,CAAC,oBAAhB,CAAqC,IAAI,CAAC,KAA1C,CAAgD,IAAI,CAAC,aAArD,CAAmE,KAAK,CAAC,qBAAzE,EAFpC,GADJ,cAKI,aAAK,SAAS,CAAC,SAAf,wBACI,YAAK,SAAS,CAAC,qBAAf,UACKH,IAAI,CAACW,eAAL,CAAqB8B,KAArB,CAA2B,CAA3B,CAA8B,CAA9B,EAAiClC,GAAjC,CAAqC,SAAAK,OAAO,qBACzC,kCAAK,KAAC,KAAD,EAAO,GAAG,CAAEA,OAAO,CAAC+B,KAApB,EAAL,EADyC,EAA5C,CADL,EADJ,cAMI,aAAK,SAAS,CAAC,OAAf,wBACI,WAAG,SAAS,CAAC,cAAb,wBAAuC3C,IAAI,CAAC4C,EAA5C,oBAAkD,sBAAO/D,aAAa,CAACmB,IAAI,CAACC,IAAN,CAApB,EAAlD,GADJ,cAEI,8DAA4B,wBAAOD,IAAI,CAACI,KAAZ,YAA5B,GAFJ,GANJ,GALJ,GAA2BsC,GAA3B,CADC,EAJR,CAFL,CAyBKpF,KAAK,CAACyC,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACG,MAAL,GAAgB,UAApB,EAAjB,EAAiDW,MAAjD,CAA0D,CAA1D,eACG,YAAK,SAAS,CAAC,kBAAf,uBAAkC,iDAAlC,EA1BR,GAPJ,GApCJ,cA0EI,iBAAS,SAAS,CAAC,mBAAnB,wBACI,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,QAA5C,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,SAAf,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,QAAD,EAAU,IAAI,CAAC,KAAf,CAAqB,IAAI,CAAC,aAA1B,CAAwC,KAAK,CAAC,6CAA9C,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,SAAf,WAEKxD,KAAK,CACDyC,MADJ,CACW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACyB,SAAL,CAAiBF,kBAAkB,CAAC,EAAD,CAAnC,EAA2CvB,IAAI,CAACG,MAAL,GAAgB,WAA/D,EADf,EAEImC,IAFJ,CAES,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAACf,SAAF,CAAcc,CAAC,CAACd,SAA1B,EAFT,EAGIgB,KAHJ,CAGU,CAHV,CAGa,CAHb,EAIIlC,GAJJ,CAIQ,SAACP,IAAD,CAAO0C,GAAP,qBACD,aAAe,SAAS,gBAAU1C,IAAI,CAACyB,SAAL,CAAiBF,kBAAkB,CAAC,CAAD,CAAnC,CAAyC,KAAzC,CAAiD,MAA3D,CAAxB,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,WAAG,SAAS,CAAC,cAAb,wBAAuCvB,IAAI,CAAC4C,EAA5C,oBAAkD,sBAAO/D,aAAa,CAACmB,IAAI,CAACC,IAAN,CAApB,EAAlD,GADJ,cAEI,UAAG,SAAS,CAAC,UAAb,gDAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,OAAf,wBACI,sDADJ,cAEI,mBAAIrB,sBAAsB,CAACoB,IAAI,CAACyB,SAAN,CAA1B,EAFJ,GALJ,GAAUiB,GAAV,CADC,EAJR,CAFL,CAkBKpF,KAAK,CAACyC,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,CAAYC,mBAAmB,CAAC,EAAD,CAA/B,EAAuCF,IAAI,CAACG,MAAL,GAAgB,WAA3D,EAAjB,EAAyFW,MAAzF,CAAkG,CAAlG,eACG,YAAK,SAAS,CAAC,kBAAf,uBAAkC,mCAAlC,EAnBR,GAJJ,GADJ,cA6BI,aAAK,SAAS,CAAC,OAAf,wBACI,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,QAAD,EAAU,IAAI,CAAC,KAAf,CAAqB,IAAI,CAAC,aAA1B,CAAwC,KAAK,CAAC,qDAA9C,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,SAAf,WAEKxD,KAAK,CACDyC,MADJ,CACW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACyB,SAAL,CAAiBF,kBAAkB,CAAC,EAAD,CAAnC,EAA2CvB,IAAI,CAACG,MAAL,GAAgB,SAA/D,EADf,EAEImC,IAFJ,CAES,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAACf,SAAF,CAAcc,CAAC,CAACd,SAA1B,EAFT,EAGIgB,KAHJ,CAGU,CAHV,CAGa,CAHb,EAIIlC,GAJJ,CAIQ,SAACP,IAAD,CAAO0C,GAAP,qBACD,aAAe,SAAS,CAAC,MAAzB,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,iEADJ,cAEI,6CAAW,sBAAOlB,2BAA2B,CAACxB,IAAI,CAACyB,SAAN,CAAlC,EAAX,GAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,SAAf,wBACI,YAAK,SAAS,CAAC,qBAAf,UACKzB,IAAI,CAACW,eAAL,CAAqB8B,KAArB,CAA2B,CAA3B,CAA8B,CAA9B,EAAiClC,GAAjC,CAAqC,SAAAK,OAAO,qBACzC,kCAAK,KAAC,KAAD,EAAO,GAAG,CAAEA,OAAO,CAAC+B,KAApB,EAAL,EADyC,EAA5C,CADL,EADJ,cAMI,aAAK,SAAS,CAAC,OAAf,wBACI,WAAG,SAAS,CAAC,cAAb,wBAAuC3C,IAAI,CAAC4C,EAA5C,oBAAkD,sBAAO/D,aAAa,CAACmB,IAAI,CAACC,IAAN,CAApB,EAAlD,GADJ,cAEI,WAAG,SAAS,CAAC,cAAb,oDAAqD,wBAAOD,IAAI,CAACI,KAAZ,YAArD,GAFJ,GANJ,GALJ,cAgBI,aAAK,SAAS,CAAC,QAAf,wBACI,oCACI,sDADJ,cAEI,mBAAIxB,sBAAsB,CAACoB,IAAI,CAACyB,SAAN,CAA1B,EAFJ,GADJ,cAKI,oCACI,+CADJ,cAEI,qBAAIzB,IAAI,CAAC6C,MAAT,gBAFJ,GALJ,GAhBJ,GAAUH,GAAV,CADC,EAJR,CAFL,CAmCKpF,KAAK,CAACyC,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACyB,SAAL,CAAiBF,kBAAkB,CAAC,EAAD,CAAnC,EAA2CvB,IAAI,CAACG,MAAL,GAAgB,SAA/D,EAAjB,EAA2FW,MAA3F,CAAoG,CAApG,eACG,YAAK,SAAS,CAAC,kBAAf,uBAAkC,mDAAlC,EApCR,GAJJ,GA7BJ,GAJJ,cA+EI,aAAK,SAAS,CAAC,QAAf,wBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,uCADJ,cAEI,aAAK,SAAS,CAAC,YAAf,wBACI,eADJ,cAEI,oCAFJ,GAFJ,cAMI,aAAK,SAAS,CAAC,WAAf,wBACI,eADJ,cAEI,4CAFJ,GANJ,GADJ,CAYKxD,KAAK,CAACwD,MAAN,CAAe,CAAf,eACG,YAAK,SAAS,CAAC,iBAAf,uBACI,KAAC,WAAD,EAAa,OAAO,CAAE,yBAAM3D,CAAAA,OAAO,CAAC,CAAD,CAAb,EAAtB,CAAwC,KAAK,CAAC,MAA9C,CAAqD,KAAK,CAAC,2BAA3D,EADJ,EAbR,GA/EJ,GA1EJ,cA6KI,iBAAS,SAAS,CAAC,kBAAnB,wBACI,YAAK,SAAS,CAAC,0BAAf,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,yBAA5C,EADJ,EADJ,CAIKiB,OAAO,CAAC0C,MAAR,GAAmB,CAAnB,cAGG,YAAK,SAAS,CAAC,kBAAf,uBACI,sDADJ,EAHH,cAOG,wCACI,aAAK,SAAS,CAAC,2BAAf,wBACI,aAAK,SAAS,CAAC,wBAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,yBAA5C,EADJ,cAEI,aAAK,SAAS,CAAC,mCAAf,wBACI,KAAC,KAAD,EAAO,GAAG,CAAEgC,IAAZ,EADJ,cAEI,KAAC,KAAD,EAAO,GAAG,CAAEA,IAAZ,EAFJ,cAGI,KAAC,KAAD,EAAO,GAAG,CAAEA,IAAZ,EAHJ,cAII,KAAC,KAAD,EAAO,GAAG,CAAEA,IAAZ,EAJJ,cAKI,KAAC,KAAD,EAAO,GAAG,CAAEjG,SAAZ,EALJ,GAFJ,cAUI,YAAK,SAAS,CAAC,8BAAf,uBACI,qBAAI6B,MAAM,CAACqE,IAAX,QADJ,EAVJ,cAcI,aAAK,SAAS,CAAC,8BAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,KAAK,CAAC,QAAvB,CAAgC,IAAI,CAAC,eAArC,CAAqD,KAAK,CAAC,yBAA3D,EADJ,cAEI,aAAK,SAAS,CAAC,qCAAf,wBACI,qBAAIzE,QAAJ,uBAAgB,KAAC,KAAD,EAAO,GAAG,CAAExB,UAAZ,EAAhB,GADJ,cAEI,+BAAW0B,YAAX,GAFJ,GAFJ,GAdJ,GADJ,cAwBI,YAAK,SAAS,CAAC,yBAAf,uBACI,YAAK,SAAS,CAAC,oCAAf,UACKJ,OAAO,CACHkE,IADJ,CACS,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACZ,GAAIQ,CAAAA,IAAI,CAAG,GAAI5B,CAAAA,IAAJ,CAASmB,CAAC,CAACtC,IAAX,CAAX,CACIgD,IAAI,CAAG,GAAI7B,CAAAA,IAAJ,CAASoB,CAAC,CAACvC,IAAX,CADX,CAEA;AACA,GAAI+C,IAAI,CAAGC,IAAX,CAAiB,MAAO,CAAC,CAAR,CACjB,GAAID,IAAI,CAAGC,IAAX,CAAiB,MAAO,EAAP,CACjB,MAAO,EAAP,CACH,CARJ,EASIR,KATJ,CASU,CATV,CASa,CATb,EAUIlC,GAVJ,CAUQ,SAAA2C,IAAI,qBACL,aAAK,SAAS,CAAC,wBAAf,WACK,GAAI9B,CAAAA,IAAJ,GAAW+B,OAAX,GAAuB,CAAvB,CAA2B,GAAI/B,CAAAA,IAAJ,CAAS8B,IAAI,CAACjD,IAAL,CAAUiB,OAAV,CAAoB,IAA7B,EAAmCiC,OAAnC,EAA3B,eACG,iCAFR,cAII,oBAAKD,IAAI,CAACE,IAAV,EAJJ,cAKI,WAAG,SAAS,CAAC,kCAAb,8BAA8DvE,aAAa,CAACqE,IAAI,CAACzB,SAAL,CAAeP,OAAf,CAAyB,IAA1B,CAA3E,GALJ,cAMI,UAAG,SAAS,CAAC,iCAAb,UAAgDgC,IAAI,CAACG,OAArD,EANJ,cAOI,KAAC,UAAD,EAAY,IAAI,CAAEH,IAAI,CAACH,IAAvB,EAPJ,GADK,EAVZ,CADL,EADJ,EAxBJ,GADJ,cAoDI,aAAK,SAAS,CAAC,0BAAf,wBACI,YAAK,SAAS,CAAC,iCAAf,uBACI,KAAC,WAAD,EAAa,KAAK,CAAC,MAAnB,CAA0B,KAAK,CAAC,2BAAhC,EADJ,EADJ,cAII,qMAJJ,GApDJ,GAXR,GA7KJ,cAwPI,iBAAS,SAAS,CAAC,gBAAnB,wBACI,YAAK,SAAS,CAAC,wBAAf,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,IAAI,CAAC,eAAtB,CAAsC,KAAK,CAAC,kBAA5C,EADJ,EADJ,cAII,KAAC,YAAD,EAAc,KAAK,CAAEzF,KAArB,EAJJ,GAxPJ,GANJ,EAVJ,cAiRI,KAAC,aAAD,EACI,EAAE,CAAEQ,aADR,CAEI,OAAO,CAAE,GAFb,CAGI,UAAU,CAAC,gBAHf,CAII,aAAa,KAJjB,uBAMI,KAAC,UAAD,EACI,QAAQ,CAAE,kBAACoE,GAAD,QAASD,CAAAA,yBAAyB,CAACC,GAAD,CAAlC,EADd,CAEI,KAAK,yBAAmBlE,WAAnB,UAFT,CAGI,MAAM,CAAEA,WAAW,CAAG,EAAd,EAAoB,0DAHhC,CAII,QAAQ,CAAEA,WAAW,CAAG,EAAd,CAAmB,IAAnB,CAA0B,KAJxC,EANJ,EAjRJ,GADJ,CAiSH,CA5ZD,CA8ZA,cAAed,CAAAA,yBAAf","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useAuth } from '../context/userContext'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nimport Title from './utilities/Title'\r\nimport SubTitle from './utilities/SubTitle'\r\nimport { ButtonSmall } from './utilities/Buttons'\r\nimport Image from '../components/utilities/Image'\r\nimport ModalYesNo from './utilities/ModalYesNo'\r\n\r\nimport imgwitness from '../images/witness.svg'\r\nimport imgwishlist from '../images/wishlist.svg'\r\nimport imgshooping from '../images/shopping-bag.svg'\r\nimport emptyStar from \"../images/starempty.png\"\r\nimport star from \"../images/star.svg\"\r\nimport greenTrace from \"../images/greenTrace.png\"\r\n\r\nimport EarningChart from '../components/EarningChart'\r\nimport NoteWidget from '../components/NoteWidget'\r\nimport Loader from './Loader'\r\n\r\n\r\nconst Prest_Dashboard_Dashboard = ({ setStep }) => {\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n    const [sales, setSales] = useState([]);\r\n    const [monthlyEarns, setmMonthlyEarns] = useState(0);\r\n    const [monthlySales, setmMonthlySales] = useState(0);\r\n    const [monthlyViews, setmMonthlyViews] = useState(0);\r\n    const [isModalOpened, setIsModalOpened] = useState(false)\r\n    const [totalAmount, setTotalAmount] = useState(0)\r\n    const [wishListCount, setWishListCount] = useState(0)\r\n    const [reviews, setReviews] = useState([])\r\n    const [position, setPosition] = useState(0)\r\n    const [sellersCount, setSellersCount] = useState(0)\r\n\r\n    const { seller,\r\n        getSalesOfSellerIdFromDB,\r\n        formateToDateWithWords,\r\n        formateToDate,\r\n        getViewsOfSeller,\r\n        sendInBlue_sendPaymentRequestToAdmin,\r\n        getTotalAmountDueToSeller,\r\n        getWishListCountOfSeller,\r\n        getReviewsOfSellerUid,\r\n        getSellerPosition,\r\n        getSellersCount } = useAuth()\r\n\r\n    useEffect(() => {\r\n        getSales().then(salesList => {\r\n            getMonthlyEarns(salesList).then(res => {\r\n                setmMonthlyEarns(res)\r\n                getMonthlySales(salesList).then(res => {\r\n                    setmMonthlySales(res)\r\n                    getMonthlyViews().then(res => {\r\n                        setmMonthlyViews(res)\r\n                        getWishListCountOfSeller(seller.uid).then(res => {\r\n                            setWishListCount(res)\r\n                            getReviewsOfSellerUid(seller.uid).then(res => {\r\n                                setReviews(res)\r\n                                getPositionOfSeller().then(res => {\r\n                                    getSellersCount().then(res => {\r\n                                        setSellersCount(res)\r\n                                        setIsMounted(true)\r\n                                    })\r\n                                })\r\n                            })\r\n                        })\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    }, [])\r\n\r\n    async function getSales() {\r\n        const salesList = await getSalesOfSellerIdFromDB(seller.uid)\r\n        setSales(salesList)\r\n        return salesList\r\n    }\r\n\r\n    async function getMonthlyEarns(salesList) {\r\n        const lastMonthEarns = salesList.filter(sale => sale.date > dateTodayMinusByDay(30) && sale.status === \"validated\" && sale.total === sale.paid)\r\n        let earns = 0\r\n        lastMonthEarns.map(sale => earns = earns + sale.total)\r\n        return earns\r\n    }\r\n\r\n    async function getMonthlySales(salesList) {\r\n        const lastMonthSales = salesList.filter(sale => sale.date > dateTodayMinusByDay(30) && sale.status === \"validated\")\r\n        const lastMonthServices = []\r\n        lastMonthSales.forEach(sale => {\r\n            sale.choosedServices.forEach(service => {\r\n                lastMonthServices.push(service)\r\n            })\r\n        })\r\n        return lastMonthServices.length\r\n    }\r\n\r\n    async function getMonthlyViews() {\r\n        const views = await getViewsOfSeller(seller.uid)\r\n        const lastMonthViews = views.filter(view => view.date.seconds * 1000 > dateTodayMinusByDay(30))\r\n        return lastMonthViews\r\n    }\r\n\r\n    function dateTodayMinusByDay(day) {\r\n        const date = new Date()\r\n        date.setHours(date.getHours() - (24 * day))\r\n        return date\r\n    }\r\n\r\n    function dateTodayPlusByDay(day) {\r\n        const date = new Date()\r\n        date.setHours(date.getHours() + (24 * day))\r\n        return date\r\n    }\r\n\r\n    function getDaysLeftBeforeSaleDelete(eventDate) {\r\n        const daysLeftTimestamp = (eventDate.seconds * 1000 || eventDate) - Date.now()\r\n        const daysLeft = Math.ceil(daysLeftTimestamp / 1000 / 86400)\r\n        return daysLeft - 10 === 0 ? \"aujourd'hui\" : `${daysLeft - 10} jours`\r\n    }\r\n\r\n    async function handlePaymentRequest() {\r\n        const amount = await getTotalAmountDueToSeller()\r\n        setTotalAmount(amount)\r\n        setIsModalOpened(true)\r\n    }\r\n\r\n    function handleYesNoRequestPayment(val) {\r\n        if (val === \"yes\") {\r\n            if (totalAmount > 10) {\r\n                sendInBlue_sendPaymentRequestToAdmin()\r\n            }\r\n            else {\r\n\r\n            }\r\n        }\r\n        setIsModalOpened(false)\r\n    }\r\n\r\n    async function getPositionOfSeller() {\r\n        const position = await getSellerPosition(seller.uid)\r\n        setPosition(position)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CSSTransition\r\n                in={!isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <Loader />\r\n            </CSSTransition>\r\n\r\n            <CSSTransition\r\n                in={isMounted}\r\n                timeout={300}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <div className=\"prest_Dashboard_Dashboard\">\r\n\r\n                    <section className=\"prest_dashboard_header\">\r\n                        <div className=\"dashboard_left_container\">\r\n                            <Title type=\"h2\" font=\"roboto-medium\" value=\"Revenus du mois actuel\" />\r\n                            <Title type=\"h1\" font=\"roboto-bold\" value={`${monthlyEarns}€`} />\r\n                            <ButtonSmall onClick={() => handlePaymentRequest()} color=\"blue\" value=\"Demander un virement\" />\r\n                        </div>\r\n                        <div className=\"dashboard_statsHeader_container\">\r\n                            <div className=\"item\">\r\n                                <div className=\"image blue\"><span><Image url={imgwitness} /></span></div>\r\n                                <div className=\"content\">\r\n                                    <Title type=\"h2\" font=\"roboto-bold\" value={`${monthlyViews.length}`} />\r\n                                    <span></span>\r\n                                    <SubTitle color=\"grey\" type=\"big\" font=\"roboto-bold\" value=\"Nombre de vues mensuelles\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"item\">\r\n                                <div className=\"image red\"><span><Image url={imgwishlist} /></span></div>\r\n                                <div className=\"content\">\r\n                                    <Title type=\"h2\" font=\"roboto-bold\" value={wishListCount} />\r\n                                    <span></span>\r\n                                    <SubTitle color=\"grey\" type=\"big\" font=\"roboto-bold\" value=\"Ajouts en wishlist\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"item\">\r\n                                <div className=\"image yellow\"><span><Image url={imgshooping} /></span></div>\r\n                                <div className=\"content\">\r\n                                    <Title type=\"h2\" font=\"roboto-bold\" value={`${monthlySales}`} />\r\n                                    <span></span>\r\n                                    <SubTitle color=\"grey\" type=\"big\" font=\"roboto-bold\" value=\"Nombre de ventes mensuelles\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"prest_dashboard_1\">\r\n                        <div className=\"header\">\r\n                            <Title type=\"h2\" font=\"roboto-medium\" value=\"Vos commandes récentes\" />\r\n                            {sales.length > 0 &&\r\n                                <p className=\"blueLink\" onClick={() => setStep(2)}>Voir toutes les commandes</p>\r\n                            }\r\n                        </div>\r\n                        <div className=\"content\">\r\n\r\n                            {sales\r\n                                .filter(sale => sale.status !== \"rejected\")\r\n                                .sort((a, b) => b.date - a.date)\r\n                                .slice(0, 4)\r\n                                .map((sale, key) =>\r\n                                    <div className=\"item\" key={key}>\r\n                                        <div className=\"header\">\r\n                                            {sale.status === \"pending\" && <SubTitle color=\"#acacac\" type=\"big\" font=\"roboto-bold\" value=\"Commande récente en attente de validation\" />}\r\n                                            {sale.status === \"validated\" && <SubTitle color=\"rgb(127, 207, 127)\" type=\"big\" font=\"roboto-bold\" value=\"Commande validée\" />}\r\n                                        </div>\r\n                                        <div className=\"content\">\r\n                                            <div className=\"left imagesSuperpos\">\r\n                                                {sale.choosedServices.slice(0, 3).map(service =>\r\n                                                    <div><Image url={service.image} /></div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"right\">\r\n                                                <p className=\"commandTitle\">Commande #{sale.id} - <span>{formateToDate(sale.date)}</span></p>\r\n                                                <p>Montant de la commande : <span>{sale.total}€</span></p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            {sales.filter(sale => sale.status !== \"rejected\").length < 1 &&\r\n                                <div className=\"textInEmptyQuery\"><p>Aucune commande récente</p></div>\r\n                            }\r\n\r\n                        </div>\r\n                    </section>\r\n                    <section className=\"prest_dashboard_2\">\r\n                        <div className=\"header\">\r\n                            <Title type=\"h2\" font=\"roboto-medium\" value=\"Rappel\" />\r\n                        </div>\r\n                        <div className=\"content\">\r\n                            <div className=\"left\">\r\n                                <div className=\"header\">\r\n                                    <SubTitle type=\"big\" font=\"roboto-bold\" value=\"Évènements prochains à préparer\" />\r\n                                </div>\r\n                                <div className=\"content\">\r\n\r\n                                    {sales\r\n                                        .filter(sale => sale.eventDate < dateTodayPlusByDay(10) && sale.status === \"validated\")\r\n                                        .sort((a, b) => b.eventDate - a.eventDate)\r\n                                        .slice(0, 3)\r\n                                        .map((sale, key) =>\r\n                                            <div key={key} className={`item ${sale.eventDate < dateTodayPlusByDay(5) ? \"red\" : \"blue\"}`}>\r\n                                                <div className=\"left\">\r\n                                                    <p className=\"commandTitle\">Commande #{sale.id} - <span>{formateToDate(sale.date)}</span></p>\r\n                                                    <p className=\"blueLink\">Voir les détails de la commande</p>\r\n                                                </div>\r\n                                                <div className=\"right\">\r\n                                                    <label>Date de l'évènement :</label>\r\n                                                    <p>{formateToDateWithWords(sale.eventDate)}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    {sales.filter(sale => sale.date > dateTodayMinusByDay(10) && sale.status === \"validated\").length < 1 &&\r\n                                        <div className=\"textInEmptyQuery\"><p>Aucun rappel</p></div>\r\n                                    }\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"right\">\r\n                                <div className=\"header\">\r\n                                    <SubTitle type=\"big\" font=\"roboto-bold\" value=\"Commandes à valider/vérifier avant expiration\" />\r\n                                </div>\r\n                                <div className=\"content\">\r\n\r\n                                    {sales\r\n                                        .filter(sale => sale.eventDate < dateTodayPlusByDay(20) && sale.status === \"pending\")\r\n                                        .sort((a, b) => b.eventDate - a.eventDate)\r\n                                        .slice(0, 2)\r\n                                        .map((sale, key) =>\r\n                                            <div key={key} className=\"item\">\r\n                                                <div className=\"header\">\r\n                                                    <p>Commande toujours en attente de validation</p>\r\n                                                    <p>Expire: <span>{getDaysLeftBeforeSaleDelete(sale.eventDate)}</span></p>\r\n                                                </div>\r\n                                                <div className=\"content\">\r\n                                                    <div className=\"left imagesSuperpos\">\r\n                                                        {sale.choosedServices.slice(0, 3).map(service =>\r\n                                                            <div><Image url={service.image} /></div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"right\">\r\n                                                        <p className=\"commandTitle\">Commande #{sale.id} - <span>{formateToDate(sale.date)}</span></p>\r\n                                                        <p className=\"commandTitle\">Montant de la commande : <span>{sale.total}€</span></p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"bottom\">\r\n                                                    <div>\r\n                                                        <label>Date de l'évènement :</label>\r\n                                                        <p>{formateToDateWithWords(sale.eventDate)}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <label>Nombre de personne :</label>\r\n                                                        <p>{sale.people} personnes</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    {sales.filter(sale => sale.eventDate < dateTodayPlusByDay(20) && sale.status === \"pending\").length < 1 &&\r\n                                        <div className=\"textInEmptyQuery\"><p>Aucune commande à valider</p></div>\r\n                                    }\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bottom\">\r\n                            <div className=\"legendeContainer\">\r\n                                <label>Légende :</label>\r\n                                <div className=\"blueLegend\">\r\n                                    <span></span>\r\n                                    <p>Prochainement</p>\r\n                                </div>\r\n                                <div className=\"redLegend\">\r\n                                    <span></span>\r\n                                    <p>Très prochainement</p>\r\n                                </div>\r\n                            </div>\r\n                            {sales.length > 0 &&\r\n                                <div className=\"buttonContainer\">\r\n                                    <ButtonSmall onClick={() => setStep(2)} color=\"blue\" value=\"Voir toutes les commandes\" />\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"reviewsContainer\">\r\n                        <div className=\"reviewsContainer__header\">\r\n                            <Title type=\"h2\" font=\"roboto-medium\" value=\"Commentaires récents\" />\r\n                        </div>\r\n                        {reviews.length === 0 ?\r\n\r\n\r\n                            <div className=\"textInEmptyQuery\">\r\n                                <p>Aucun commentaire à afficher</p>\r\n                            </div>\r\n                            :\r\n                            <>\r\n                                <div className=\"reviewsContainer__content\">\r\n                                    <div className=\"reviewsContainer__left\">\r\n                                        <Title type=\"h2\" font=\"roboto-medium\" value=\"Votre note actuelle est\" />\r\n                                        <div className=\"reviewsContainer__globalNoteStars\">\r\n                                            <Image url={star} />\r\n                                            <Image url={star} />\r\n                                            <Image url={star} />\r\n                                            <Image url={star} />\r\n                                            <Image url={emptyStar} />\r\n                                        </div>\r\n\r\n                                        <div className=\"reviewsContainer__globalNote\">\r\n                                            <p>{seller.note}/5</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"reviewsContainer__classement\">\r\n                                            <Title type=\"h2\" align=\"center\" font=\"roboto-medium\" value=\"Vous êtes classé*\" />\r\n                                            <div className=\"reviewsContainer__classementContent\">\r\n                                                <p>{position}ème<Image url={greenTrace} /></p>\r\n                                                <span>sur {sellersCount}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <div className=\"reviewsContainer__right\">\r\n                                        <div className=\"reviewsContainer__cards__container\">\r\n                                            {reviews\r\n                                                .sort((a, b) => {\r\n                                                    var keyA = new Date(a.date),\r\n                                                        keyB = new Date(b.date);\r\n                                                    // Compare the 2 dates\r\n                                                    if (keyA < keyB) return -1;\r\n                                                    if (keyA > keyB) return 1;\r\n                                                    return 0;\r\n                                                })\r\n                                                .slice(0, 3)\r\n                                                .map(item =>\r\n                                                    <div className=\"reviewsContainer__card\">\r\n                                                        {new Date().getDate() - 7 < new Date(item.date.seconds * 1000).getDate() &&\r\n                                                            <span>Nouveau</span>\r\n                                                        }\r\n                                                        <h3>{item.name}</h3>\r\n                                                        <p className=\"reviewsContainer__card__subTitle\">Evènement du {formateToDate(item.eventDate.seconds * 1000)}</p>\r\n                                                        <p className=\"reviewsContainer__card__content\">{item.comment}</p>\r\n                                                        <NoteWidget note={item.note} />\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"reviewsContainer__bottom\">\r\n                                    <div className=\"reviewsContainer__bottom_button\">\r\n                                        <ButtonSmall color=\"grey\" value=\"Voir plus de commentaires\" />\r\n                                    </div>\r\n                                    <p>* Ce classement est généré en fonction du type de service que vous proposez\r\n                                        & du périmètre dans lequel vous vous trouvez par rapport aux autres préstataires</p>\r\n                                </div>\r\n                            </>\r\n                        }\r\n\r\n                    </section>\r\n\r\n                    <section className=\"chartContainer\">\r\n                        <div className=\"chartContainer__header\">\r\n                            <Title type=\"h2\" font=\"roboto-medium\" value=\"Vos statistiques\" />\r\n                        </div>\r\n                        <EarningChart sales={sales} />\r\n                    </section>\r\n\r\n                </div>\r\n            </CSSTransition>\r\n            <CSSTransition\r\n                in={isModalOpened}\r\n                timeout={200}\r\n                classNames=\"pageTransition\"\r\n                unmountOnExit\r\n            >\r\n                <ModalYesNo\r\n                    callback={(val) => handleYesNoRequestPayment(val)}\r\n                    value={`Solde actuel: ${totalAmount}€`}\r\n                    value2={totalAmount < 10 && \"Impossible de demander un virement, votre solde est nul.\"}\r\n                    disabled={totalAmount < 10 ? true : false}\r\n                />\r\n            </CSSTransition>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Prest_Dashboard_Dashboard"]},"metadata":{},"sourceType":"module"}