{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useFirebase}from\"../../../assets/base-context\";import{Table}from'../Table';export var Services=function Services(props){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var currentEvent=props.currentEvent;var refServices=firestore.collection(\"events\").doc(currentEvent).collection(\"services\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),services=_useState2[0],setServices=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),step=_useState6[0],setStep=_useState6[1];useEffect(function(){getData().then(function(){setLoading(false);});},[step]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refServices.get();case 2:query=_context.sent;results=[];query.forEach(function(doc){results.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id,action:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteService(doc.id);},children:\"Supprimer\"})}));});setServices(results);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function handleDeleteService(_x){return _handleDeleteService.apply(this,arguments);}function _handleDeleteService(){_handleDeleteService=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return refServices.doc(id).delete().then(function(){setStep(!step);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteService.apply(this,arguments);}return!loading&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"servicesShowSellerContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Les services:\"}),/*#__PURE__*/_jsx(Table,{data:services,type:\"services\"})]})});};","map":{"version":3,"sources":["/Users/bc/Desktop/New Nivid/Leo-Project/src/components/Admin/event/Services.js"],"names":["React","useEffect","useState","useFirebase","Table","Services","props","firebaseContext","firestore","currentEvent","refServices","collection","doc","services","setServices","loading","setLoading","step","setStep","getData","then","get","query","results","forEach","push","data","id","action","handleDeleteService","delete"],"mappings":"4sBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,8BAA5B,CACA,OAASC,KAAT,KAAsB,UAAtB,CAIA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAE/B,GAAMC,CAAAA,eAAe,CAAGJ,WAAW,EAAnC,CACA,GAAMK,CAAAA,SAAS,CAAGD,eAAe,CAACC,SAAhB,EAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAGH,KAAK,CAACG,YAA3B,CACA,GAAMC,CAAAA,WAAW,CAAGF,SAAS,CAACG,UAAV,CAAqB,QAArB,EAA+BC,GAA/B,CAAmCH,YAAnC,EAAiDE,UAAjD,CAA4D,UAA5D,CAApB,CAN+B,cAQCT,QAAQ,CAAC,EAAD,CART,wCAQxBW,QARwB,eAQdC,WARc,8BASDZ,QAAQ,CAAC,IAAD,CATP,yCASxBa,OATwB,eASfC,UATe,8BAUPd,QAAQ,CAAC,IAAD,CAVD,yCAUxBe,IAVwB,eAUlBC,OAVkB,eAY/BjB,SAAS,CAAC,UAAM,CACZkB,OAAO,GAAGC,IAAV,CAAe,UAAM,CACjBJ,UAAU,CAAC,KAAD,CAAV,CACH,CAFD,EAGH,CAJQ,CAIN,CAACC,IAAD,CAJM,CAAT,CAZ+B,QAkBhBE,CAAAA,OAlBgB,+HAkB/B,2KACwBT,CAAAA,WAAW,CAACW,GAAZ,EADxB,QACUC,KADV,eAEUC,OAFV,CAEoB,EAFpB,CAIID,KAAK,CAACE,OAAN,CAAc,SAAAZ,GAAG,CAAI,CACjBW,OAAO,CAACE,IAAR,gCAAkBb,GAAG,CAACc,IAAJ,EAAlB,MAA8BC,EAAE,CAAEf,GAAG,CAACe,EAAtC,CAA0CC,MAAM,cAAE,eAAQ,OAAO,CAAE,yBAAOC,CAAAA,mBAAmB,CAACjB,GAAG,CAACe,EAAL,CAA1B,EAAjB,uBAAlD,IACH,CAFD,EAGAb,WAAW,CAACS,OAAD,CAAX,CAPJ,sDAlB+B,kDA4BhBM,CAAAA,mBA5BgB,qKA4B/B,kBAAmCF,EAAnC,6IACUjB,CAAAA,WAAW,CAACE,GAAZ,CAAgBe,EAAhB,EAAoBG,MAApB,GAA6BV,IAA7B,CAAkC,UAAM,CAC1CF,OAAO,CAAC,CAACD,IAAF,CAAP,CACH,CAFK,CADV,yDA5B+B,sDAkC/B,MAAO,CAACF,OAAD,eACH,kCACI,aAAK,SAAS,CAAC,6BAAf,wBACI,qCADJ,cAEI,KAAC,KAAD,EAAO,IAAI,CAAEF,QAAb,CAAuB,IAAI,CAAC,UAA5B,EAFJ,GADJ,EADJ,CAQH,CA1CM","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useFirebase } from \"../../../assets/base-context\";\nimport { Table } from '../Table'\n\n\n\nexport const Services = (props) => {\n\n    const firebaseContext = useFirebase()\n    const firestore = firebaseContext.firestore()\n\n    const currentEvent = props.currentEvent;\n    const refServices = firestore.collection(\"events\").doc(currentEvent).collection(\"services\");\n\n    const [services, setServices] = useState([])\n    const [loading, setLoading] = useState(true)\n    const [step, setStep] = useState(true)\n\n    useEffect(() => {\n        getData().then(() => {\n            setLoading(false)\n        })\n    }, [step])\n\n    async function getData() {\n        const query = await refServices.get();\n        const results = []\n\n        query.forEach(doc => {\n            results.push({ ...doc.data(), id: doc.id, action: <button onClick={() => (handleDeleteService(doc.id))}>Supprimer</button> })\n        })\n        setServices(results)\n    }\n\n    async function handleDeleteService(id) {\n        await refServices.doc(id).delete().then(() => {\n            setStep(!step)\n        })\n    }\n\n    return !loading && (\n        <div>\n            <div className=\"servicesShowSellerContainer\">\n                <h2>Les services:</h2>\n                <Table data={services} type=\"services\" />\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}