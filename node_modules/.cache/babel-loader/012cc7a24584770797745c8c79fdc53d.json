{"ast":null,"code":"import _slicedToArray from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import NumericInput from\"react-numeric-input\";import{useAuth}from\"../context/userContext\";// context\nimport ReactLoading from\"react-loading\";import{ButtonLarge}from\"./utilities/Buttons\";import Image from\"./utilities/Image\";import ServiceConfirmModal from\"./ServiceConfirmModal\";import CustomSelect from\"../components/utilities/CustomSelect\";import{ReactComponent as CheckTypeImg}from\"@svgr/webpack?-svgo,+titleProp,+ref!../images/checked-type.svg\";import FullScreenImg from\"./FullScreenImg\";var ServiceDescription=function ServiceDescription(props){var item=props.item;var handleAddToCard=props.handleAddToCard;var display=props.display;var isMobile=props.isMobile;var handleCloseService=props.handleCloseService;var _useAuth=useAuth(),event=_useAuth.event,getServiceQuantityInCard=_useAuth.getServiceQuantityInCard,loadingButtonAddToCard=_useAuth.loadingButtonAddToCard,setLoadingButtonAddToCard=_useAuth.setLoadingButtonAddToCard;// context\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),activePathImage=_useState2[0],setActivePathImage=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),variation=_useState6[0],setVariation=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isModalOpened=_useState10[0],setIsModalOpened=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),currentQuantity=_useState12[0],setCurrentQuantity=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isFullscreenImgOpen=_useState14[0],setIsFullscreenImgOpen=_useState14[1];useEffect(function(){function getActivePath(){setActivePathImage(item.images[0].url);setQuantity(1);setLoadingButtonAddToCard(false);}item.variations&&item.variations.length>0?setVariation(item.variations[0].name):setVariation(\"\");if(item.images)getActivePath();},[item]);function handleImageClick(path){setActivePathImage(path);}function preHandleAddToCard(note,quantity){handleCloseModal();var currentQuantity=getServiceQuantityInCard(item.id);var total=(quantity-currentQuantity)*item.price;setError(\"\");handleAddToCard(quantity,variation,note);}function organizeImg(){if(item.images){return Object.entries(item.images).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],item=_ref2[1];return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleImageClick(item.url);},className:item.url===activePathImage?\"active verticalImgItem\":\"verticalImgItem\",children:/*#__PURE__*/_jsx(Image,{url:item.url})},key);});}}function openModal(e,quantity){e.stopPropagation();setLoadingButtonAddToCard(true);setCurrentQuantity(quantity);setIsModalOpened(true);}function handleCloseModal(){setLoadingButtonAddToCard(false);setIsModalOpened(false);}return/*#__PURE__*/_jsxs(\"div\",{className:display?\"serviceDescriptionContainer active\":\"serviceDescriptionContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"serviceDescription\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleCloseService();},className:\"closeButton\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"serviceDescriptionImgAndDetails\",children:[!isMobile&&/*#__PURE__*/_jsxs(\"div\",{className:\"serviceDescriptionLeft\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"verticalLineImg\",children:organizeImg()}),/*#__PURE__*/_jsx(\"div\",{className:\"activeImageItem\",onClick:function onClick(){return setIsFullscreenImgOpen(true);},children:/*#__PURE__*/_jsx(Image,{url:activePathImage})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"serviceDescriptionRight\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"title\",children:[item.name&&item.name,\" \",/*#__PURE__*/_jsx(\"span\",{children:item.foodType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckTypeImg,{}),item.foodType]})})]}),item.variations&&item.variations.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:variation}),/*#__PURE__*/_jsx(\"span\",{children:item.variations&&item.variations.length>0?variation===\"\"?item.variations[0].price:item.variations.filter(function(vari){return vari.name===variation;}).length>0&&item.variations.filter(function(vari){return vari.name===variation;})[0].price+\"€\":item.price&&item.price+\"€\"})]}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(e){return e.stopPropagation();},className:\"smallTitle\",children:\"Description de l'offre:\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(e){return e.stopPropagation();},children:item.description&&item.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"serviceDescriptionActionContainer\",children:[!isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"infoServiceDescriptionAction\",children:item.id&&getServiceQuantityInCard(item.id)!==0&&/*#__PURE__*/_jsxs(\"p\",{children:[\"D\\xE9j\\xE0 dans votre panier\",\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"x \",getServiceQuantityInCard(item.id)]})]})}),error.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error}),item.variations&&item.variations.length>0&&/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return e.stopPropagation();},className:\"serviceDescriptionAction\",children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"20px\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"smallTitle\",children:\"Variante:\"}),/*#__PURE__*/_jsx(CustomSelect,{currentVariation:variation,callback:function callback(e){return setVariation(e.target.value);},options:item.variations})]})}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return e.stopPropagation();},className:\"serviceDescriptionAction\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"smallTitle\",children:\"Quantit\\xE9:\"}),/*#__PURE__*/_jsx(NumericInput,{className:\"form-control\",value:quantity,min:1,max:20,step:1,precision:0,size:4,mobile:true,onChange:function onChange(value){return setQuantity(value);}})]}),/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(e){return openModal(e,quantity);},color:\"orange\",value:loadingButtonAddToCard?/*#__PURE__*/_jsx(ReactLoading,{className:\"loadingSpinnerButton\",type:\"spin\",color:\"white\",height:23,width:23}):\"Ajouter au panier\",marginTop:\"10px\",disabled:loadingButtonAddToCard?\"disabled\":null})]})]})]}),isModalOpened&&/*#__PURE__*/_jsx(ServiceConfirmModal,{item:item,variation:variation,closeCallback:handleCloseModal,confirmCallback:function confirmCallback(note){return preHandleAddToCard(note,quantity);}}),isFullscreenImgOpen&&/*#__PURE__*/_jsx(FullScreenImg,{imgpath:activePathImage,closeCallback:function closeCallback(){return setIsFullscreenImgOpen(false);}})]});};export default ServiceDescription;","map":{"version":3,"sources":["/Users/bc/Desktop/Nivid/src/components/ServiceDescription.js"],"names":["React","useEffect","useState","NumericInput","useAuth","ReactLoading","ButtonLarge","Image","ServiceConfirmModal","CustomSelect","FullScreenImg","ServiceDescription","props","item","handleAddToCard","display","isMobile","handleCloseService","event","getServiceQuantityInCard","loadingButtonAddToCard","setLoadingButtonAddToCard","activePathImage","setActivePathImage","quantity","setQuantity","variation","setVariation","error","setError","isModalOpened","setIsModalOpened","currentQuantity","setCurrentQuantity","isFullscreenImgOpen","setIsFullscreenImgOpen","getActivePath","images","url","variations","length","name","handleImageClick","path","preHandleAddToCard","note","handleCloseModal","id","total","price","organizeImg","Object","entries","map","key","openModal","e","stopPropagation","foodType","filter","vari","description","marginBottom","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport NumericInput from \"react-numeric-input\";\r\nimport { useAuth } from \"../context/userContext\"; // context\r\nimport ReactLoading from \"react-loading\";\r\n\r\nimport { ButtonLarge } from \"./utilities/Buttons\";\r\nimport Image from \"./utilities/Image\";\r\nimport ServiceConfirmModal from \"./ServiceConfirmModal\";\r\n\r\nimport CustomSelect from \"../components/utilities/CustomSelect\";\r\n\r\nimport { ReactComponent as CheckTypeImg } from \"../images/checked-type.svg\";\r\n\r\nimport FullScreenImg from \"./FullScreenImg\";\r\n\r\nconst ServiceDescription = (props) => {\r\n  const item = props.item;\r\n  const handleAddToCard = props.handleAddToCard;\r\n  const display = props.display;\r\n  const isMobile = props.isMobile;\r\n  const handleCloseService = props.handleCloseService;\r\n\r\n  const {\r\n    event,\r\n    getServiceQuantityInCard,\r\n    loadingButtonAddToCard,\r\n    setLoadingButtonAddToCard,\r\n  } = useAuth(); // context\r\n\r\n  const [activePathImage, setActivePathImage] = useState();\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [variation, setVariation] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isModalOpened, setIsModalOpened] = useState(false);\r\n  const [currentQuantity, setCurrentQuantity] = useState(0);\r\n  const [isFullscreenImgOpen, setIsFullscreenImgOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function getActivePath() {\r\n      setActivePathImage(item.images[0].url);\r\n      setQuantity(1);\r\n      setLoadingButtonAddToCard(false);\r\n    }\r\n    item.variations && item.variations.length > 0\r\n      ? setVariation(item.variations[0].name)\r\n      : setVariation(\"\");\r\n    if (item.images) getActivePath();\r\n  }, [item]);\r\n\r\n  function handleImageClick(path) {\r\n    setActivePathImage(path);\r\n  }\r\n\r\n  function preHandleAddToCard(note, quantity) {\r\n    handleCloseModal();\r\n    const currentQuantity = getServiceQuantityInCard(item.id);\r\n    const total = (quantity - currentQuantity) * item.price;\r\n    setError(\"\");\r\n    handleAddToCard(quantity, variation, note);\r\n  }\r\n\r\n  function organizeImg() {\r\n    if (item.images) {\r\n      return Object.entries(item.images).map(([key, item]) => {\r\n        return (\r\n          <div\r\n            key={key}\r\n            onClick={() => handleImageClick(item.url)}\r\n            className={\r\n              item.url === activePathImage\r\n                ? \"active verticalImgItem\"\r\n                : \"verticalImgItem\"\r\n            }\r\n          >\r\n            <Image url={item.url} />\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  function openModal(e, quantity) {\r\n    e.stopPropagation();\r\n    setLoadingButtonAddToCard(true);\r\n    setCurrentQuantity(quantity);\r\n    setIsModalOpened(true);\r\n  }\r\n\r\n  function handleCloseModal() {\r\n    setLoadingButtonAddToCard(false);\r\n    setIsModalOpened(false);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        display\r\n          ? \"serviceDescriptionContainer active\"\r\n          : \"serviceDescriptionContainer\"\r\n      }\r\n    >\r\n      <div className=\"serviceDescription\">\r\n        <span\r\n          onClick={() => handleCloseService()}\r\n          className=\"closeButton\"\r\n        ></span>\r\n        <div className=\"serviceDescriptionImgAndDetails\">\r\n          {!isMobile && (\r\n            <div className=\"serviceDescriptionLeft\">\r\n              <div className=\"verticalLineImg\">{organizeImg()}</div>\r\n              <div className=\"activeImageItem\" onClick={() => setIsFullscreenImgOpen(true)}>\r\n                <Image url={activePathImage} />\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div className=\"serviceDescriptionRight\">\r\n            <div>\r\n              <p className=\"title\">\r\n                {item.name && item.name}{\" \"}\r\n                <span>\r\n                  {item.foodType && (\r\n                    <>\r\n                      <CheckTypeImg />\r\n                      {item.foodType}\r\n                    </>\r\n                  )}\r\n                </span>\r\n              </p>\r\n              {item.variations && item.variations.length > 0 && (\r\n                <p className=\"subtitle\">{variation}</p>\r\n              )}\r\n              <span>\r\n                {item.variations && item.variations.length > 0\r\n                  ? variation === \"\"\r\n                    ? item.variations[0].price\r\n                    : item.variations.filter((vari) => vari.name === variation)\r\n                        .length > 0 &&\r\n                      item.variations.filter(\r\n                        (vari) => vari.name === variation\r\n                      )[0].price + \"€\"\r\n                  : item.price && item.price + \"€\"}\r\n              </span>\r\n            </div>\r\n            <p onClick={(e) => e.stopPropagation()} className=\"smallTitle\">\r\n              Description de l'offre:\r\n            </p>\r\n            <p onClick={(e) => e.stopPropagation()}>\r\n              {item.description && item.description}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"serviceDescriptionActionContainer\">\r\n          {!isMobile && (\r\n            <div className=\"infoServiceDescriptionAction\">\r\n              {item.id && getServiceQuantityInCard(item.id) !== 0 && (\r\n                <p>\r\n                  Déjà dans votre panier{\" \"}\r\n                  <span>x {getServiceQuantityInCard(item.id)}</span>\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {error.length > 0 && <p className=\"errorMessage\">{error}</p>}\r\n\r\n          {item.variations && item.variations.length > 0 && (\r\n            <div\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"serviceDescriptionAction\"\r\n            >\r\n              <div style={{ marginBottom: \"20px\" }}>\r\n                <p className=\"smallTitle\">Variante:</p>\r\n                <CustomSelect\r\n                  currentVariation={variation}\r\n                  callback={(e) => setVariation(e.target.value)}\r\n                  options={item.variations}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            onClick={(e) => e.stopPropagation()}\r\n            className=\"serviceDescriptionAction\"\r\n          >\r\n            <div>\r\n              <p className=\"smallTitle\">Quantité:</p>\r\n              <NumericInput\r\n                className=\"form-control\"\r\n                value={quantity}\r\n                min={1}\r\n                max={20}\r\n                step={1}\r\n                precision={0}\r\n                size={4}\r\n                mobile\r\n                onChange={(value) => setQuantity(value)}\r\n              />\r\n            </div>\r\n            <ButtonLarge\r\n              onClick={(e) => openModal(e, quantity)}\r\n              color=\"orange\"\r\n              value={\r\n                loadingButtonAddToCard ? (\r\n                  <ReactLoading\r\n                    className=\"loadingSpinnerButton\"\r\n                    type=\"spin\"\r\n                    color=\"white\"\r\n                    height={23}\r\n                    width={23}\r\n                  />\r\n                ) : (\r\n                  \"Ajouter au panier\"\r\n                )\r\n              }\r\n              marginTop=\"10px\"\r\n              disabled={loadingButtonAddToCard ? \"disabled\" : null}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {isModalOpened && (\r\n        <ServiceConfirmModal\r\n          item={item}\r\n          variation={variation}\r\n          closeCallback={handleCloseModal}\r\n          confirmCallback={(note) => preHandleAddToCard(note, quantity)}\r\n        />\r\n      )}\r\n\r\n      {isFullscreenImgOpen && <FullScreenImg imgpath={activePathImage} closeCallback={() => setIsFullscreenImgOpen(false)} />}\r\n    </div>\r\n  );\r\n};\r\nexport default ServiceDescription;\r\n"]},"metadata":{},"sourceType":"module"}