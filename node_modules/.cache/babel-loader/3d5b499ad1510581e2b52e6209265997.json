{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\My Project\\\\Leo\\\\Nivid\\\\src\\\\pages\\\\Subscribe.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles/Login.css\";\nimport { Link, useHistory } from 'react-router-dom';\nimport logo from \"../images/Logo Nivid - Noir.png\";\nimport { useAuth } from \"../context/userContext\"; // context\n\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport DatePicker from '@mui/lab/DatePicker';\nimport frLocale from 'date-fns/locale/fr';\nimport MobileDatePicker from '@mui/lab/MobileDatePicker';\nimport { ButtonLarge } from '../components/utilities/Buttons';\n\nconst Subscribe = () => {\n  _s();\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [emailConfirm, setEmailConfirm] = useState(\"\");\n  const [tel, setTel] = useState(\"\");\n  const [birthDate, setBirthDate] = useState(new Date('January 1, 1989'));\n  const [gender, setGender] = useState(\"h\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [fieldError, setFieldError] = useState(\"\");\n  const [windowsWidth, setWindowsWidth] = useState(window.innerWidth);\n  const [isCalendarOpened, setIsCalendarOpened] = useState(false);\n  const {\n    subscribe,\n    signInWithGoogle\n  } = useAuth(); // context\n\n  const history = useHistory();\n\n  function isMobile() {\n    if (windowsWidth > 1100) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function handleResize(width) {\n    setWindowsWidth(width);\n  }\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", e => handleResize(window.innerWidth));\n  }, []);\n\n  async function handleSubscribeForm(e) {\n    e.preventDefault();\n    const valid = await isValid();\n\n    if (valid === true) {\n      const res = await subscribe(email, password, firstName, name, tel, gender, birthDate);\n\n      if (res === \"auth/email-already-in-use\") {\n        setError(\"Cet email est déjà utilisé\");\n      } else if (res === true) {\n        history.push('/confirmation');\n      }\n    }\n  }\n\n  async function isValid() {\n    // else if(birthDate !== 0) {setError(\"Veuillez renseigner votre nom\")} A faire avec la date de naissance\n    if (firstName.length > 1) {\n      if (name.length > 1) {\n        if (tel.toString().length === 0 || tel.toString().length === 10) {\n          if (password.length >= 8) {\n            if (password === passwordConfirm) {\n              if (email === emailConfirm) {\n                return true;\n              } else {\n                setError(\"La confirmation de l'email ne correspond pas\");\n                setFieldError(\"emailconfirm\");\n              }\n            } else {\n              setError(\"La confirmation du mot de passe ne correspond pas\");\n              setFieldError(\"passwordconfirm\");\n            }\n          } else {\n            setError(\"Votre mot de passe doit contenir au moins 8 caractères\");\n            setFieldError(\"password\");\n          }\n        } else {\n          setError(\"Veuillez renseigner un numéro de téléphone valide\");\n          setFieldError(\"tel\");\n        }\n      } else {\n        setError(\"Veuillez renseigner votre nom\");\n        setFieldError(\"nom\");\n      }\n    } else {\n      setError(\"Veuillez renseigner votre prénom\");\n      setFieldError(\"prenom\");\n    }\n  }\n\n  function handleOnChangeInputs(name, value) {\n    if (name === fieldError) {\n      setFieldError(\"\");\n    }\n\n    if (name === \"prenom\") {\n      setFirstName(value);\n    } else if (name === \"nom\") {\n      setName(value);\n    } else if (name === \"birthDate\") {\n      setBirthDate(value);\n      setIsCalendarOpened(false);\n    } else if (name === \"sexe\") {\n      setGender(value);\n    } else if (name === \"tel\") {\n      setTel(value);\n    } else if (name === \"email\") {\n      setEmail(value);\n    } else if (name === \"emailconfirm\") {\n      setEmailConfirm(value);\n    } else if (name === \"password\") {\n      setPassword(value);\n    } else if (name === \"passwordconfirm\") {\n      setPasswordConfirm(value);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: !isMobile() ? \"loginSubscribeContainer\" : \"loginSubscribeContainer mobile\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logoContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: logo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blocLoginTopRight\",\n      children: [!isMobile() && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"LoginBackLink\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"Revenir \\xE0 l'accueil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Vous avez d\\xE9j\\xE0 un compte ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/compte\",\n        children: \"Connectez-vous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !isMobile() ? \"subscribePageContainer\" : \"subscribePageContainer mobile\",\n      children: [!isMobile() && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marketingBlocForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"marketingItem\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Inscris-toi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"gratuitement en 1 minute pour cr\\xE9er ton \\xE9v\\xE8nement et d\\xE9couvrir les offres de partenaires autour de chez toi.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"marketingItem\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Imagine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"ton \\xE9v\\xE8nement en choisissant ce dont tu as envie, en g\\xE9rant habilement ton budget\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"marketingItem\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Que la f\\xEAte commence !\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginsubscribeContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"googleSignInContainer\",\n          children: /*#__PURE__*/_jsxDEV(\"buttton\", {\n            className: \"googleSignInButton\",\n            onClick: () => signInWithGoogle(),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"googleSignInButtonImageContainer\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"\",\n                src: '/images/google.png'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Inscrivez-vous avec Google\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"googleSignInContainer\",\n          children: /*#__PURE__*/_jsxDEV(\"buttton\", {\n            className: \"googleSignInButton\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"googleSignInButtonImageContainer\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"\",\n                src: '/images/user.png'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Utiliser mon e-mail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Subscribe, \"mo7lQVLf38jAyhl6/WocXpLeEUY=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = Subscribe;\nexport default Subscribe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Subscribe\");","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/pages/Subscribe.js"],"names":["React","useState","useEffect","Link","useHistory","logo","useAuth","AdapterDateFns","LocalizationProvider","DatePicker","frLocale","MobileDatePicker","ButtonLarge","Subscribe","firstName","setFirstName","name","setName","email","setEmail","emailConfirm","setEmailConfirm","tel","setTel","birthDate","setBirthDate","Date","gender","setGender","password","setPassword","passwordConfirm","setPasswordConfirm","error","setError","fieldError","setFieldError","windowsWidth","setWindowsWidth","window","innerWidth","isCalendarOpened","setIsCalendarOpened","subscribe","signInWithGoogle","history","isMobile","handleResize","width","addEventListener","e","handleSubscribeForm","preventDefault","valid","isValid","res","push","length","toString","handleOnChangeInputs","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles/Login.css\"\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport logo from \"../images/Logo Nivid - Noir.png\"\r\nimport { useAuth } from \"../context/userContext\"; // context\r\n\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport frLocale from 'date-fns/locale/fr';\r\nimport MobileDatePicker from '@mui/lab/MobileDatePicker';\r\n\r\nimport { ButtonLarge } from '../components/utilities/Buttons'\r\n\r\nconst Subscribe = () => {\r\n\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [emailConfirm, setEmailConfirm] = useState(\"\");\r\n    const [tel, setTel] = useState(\"\");\r\n    const [birthDate, setBirthDate] = useState(new Date('January 1, 1989'));\r\n    const [gender, setGender] = useState(\"h\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [fieldError, setFieldError] = useState(\"\");\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    const [isCalendarOpened, setIsCalendarOpened] = useState(false);\r\n\r\n\r\n    const { subscribe, signInWithGoogle } = useAuth() // context\r\n    const history = useHistory()\r\n\r\n\r\n    function isMobile() {\r\n        if (windowsWidth > 1100) {\r\n            return false\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n\r\n    function handleResize(width) {\r\n        setWindowsWidth(width)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n    }, [])\r\n\r\n    async function handleSubscribeForm(e) {\r\n        e.preventDefault()\r\n        const valid = await isValid()\r\n        if (valid === true) {\r\n            const res = await subscribe(email, password, firstName, name, tel, gender, birthDate)\r\n            if (res === \"auth/email-already-in-use\") {\r\n                setError(\"Cet email est déjà utilisé\")\r\n            }\r\n            else if (res === true) {\r\n                history.push('/confirmation')\r\n            }\r\n        }\r\n    }\r\n\r\n    async function isValid() {\r\n        // else if(birthDate !== 0) {setError(\"Veuillez renseigner votre nom\")} A faire avec la date de naissance\r\n        if (firstName.length > 1) {\r\n            if (name.length > 1) {\r\n                if (tel.toString().length === 0 || (tel.toString().length === 10)) {\r\n                    if (password.length >= 8) {\r\n                        if (password === passwordConfirm) {\r\n                            if (email === emailConfirm) {\r\n                                return true\r\n                            }\r\n                            else {\r\n                                setError(\"La confirmation de l'email ne correspond pas\")\r\n                                setFieldError(\"emailconfirm\")\r\n                            }\r\n                        }\r\n                        else {\r\n                            setError(\"La confirmation du mot de passe ne correspond pas\")\r\n                            setFieldError(\"passwordconfirm\")\r\n                        }\r\n                    }\r\n                    else {\r\n                        setError(\"Votre mot de passe doit contenir au moins 8 caractères\")\r\n                        setFieldError(\"password\")\r\n                    }\r\n                }\r\n                else {\r\n                    setError(\"Veuillez renseigner un numéro de téléphone valide\")\r\n                    setFieldError(\"tel\")\r\n                }\r\n            }\r\n            else {\r\n                setError(\"Veuillez renseigner votre nom\")\r\n                setFieldError(\"nom\")\r\n            }\r\n        }\r\n        else {\r\n            setError(\"Veuillez renseigner votre prénom\")\r\n            setFieldError(\"prenom\")\r\n        }\r\n    }\r\n\r\n    function handleOnChangeInputs(name, value) {\r\n        if (name === fieldError) {\r\n            setFieldError(\"\")\r\n        }\r\n        if (name === \"prenom\") { setFirstName(value) }\r\n        else if (name === \"nom\") { setName(value) }\r\n        else if (name === \"birthDate\") { setBirthDate(value); setIsCalendarOpened(false) }\r\n        else if (name === \"sexe\") { setGender(value) }\r\n        else if (name === \"tel\") { setTel(value) }\r\n        else if (name === \"email\") { setEmail(value) }\r\n        else if (name === \"emailconfirm\") { setEmailConfirm(value) }\r\n        else if (name === \"password\") { setPassword(value) }\r\n        else if (name === \"passwordconfirm\") { setPasswordConfirm(value) }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={!isMobile() ? \"loginSubscribeContainer\" : \"loginSubscribeContainer mobile\"}>\r\n            <header>\r\n                <div className=\"logoContainer\">\r\n                    <img alt=\"\" src={logo} />\r\n                </div>\r\n            </header>\r\n            <div className=\"blocLoginTopRight\">\r\n                {!isMobile() &&\r\n                    <div className=\"LoginBackLink\">\r\n                        <Link to=\"/\">Revenir à l'accueil</Link>\r\n                    </div>\r\n                }\r\n                <p>Vous avez déjà un compte ?</p>\r\n                <Link to=\"/compte\">Connectez-vous</Link>\r\n            </div>\r\n            <div className={!isMobile() ? \"subscribePageContainer\" : \"subscribePageContainer mobile\"}>\r\n                {!isMobile() &&\r\n                    <div className=\"marketingBlocForm\">\r\n                        <div className=\"marketingItem\">\r\n                            <h2>Inscris-toi</h2>\r\n                            <p>gratuitement en 1 minute pour créer ton évènement et découvrir les offres de partenaires autour de chez toi.</p>\r\n                        </div>\r\n                        <div className=\"marketingItem\">\r\n                            <h3>Imagine</h3>\r\n                            <p>ton évènement en choisissant ce dont tu as envie, en gérant habilement ton budget</p>\r\n                        </div>\r\n                        <div className=\"marketingItem\">\r\n                            <h3>Que la fête commence !</h3>\r\n                            {/* <p>En vous inscrivant, vous accéderez à des tarifs spécialement négociés pour vous, et que vous ne trouverez nulle part ailleurs.</p> */}\r\n                        </div>\r\n                    </div>\r\n                }\r\n                <div className=\"loginsubscribeContainer\">\r\n                    <div className=\"googleSignInContainer\">\r\n                        <buttton className=\"googleSignInButton\" onClick={() => signInWithGoogle()}>\r\n                            <div className=\"googleSignInButtonImageContainer\">\r\n                                <img alt=\"\" src={'/images/google.png'} />\r\n                            </div>\r\n                            <span>Inscrivez-vous avec Google</span>\r\n                        </buttton>\r\n                    </div>\r\n                    <div className=\"googleSignInContainer\">\r\n                        <buttton className=\"googleSignInButton\">\r\n                            <div className=\"googleSignInButtonImageContainer\">\r\n                                <img alt=\"\" src={'/images/user.png'} />\r\n                            </div>\r\n                            <span>Utiliser mon e-mail</span>\r\n                        </buttton>\r\n                    </div>\r\n                    {/* <div className=\"LoginDiviserContainer\">\r\n                        <div className=\"LoginDiviser\">\r\n                            <p>ou</p>\r\n                        </div>\r\n                    </div> */}\r\n                    {/* <p className=\"errorMessage\">{error}</p> */}\r\n                    \r\n                </div>\r\n            </div>\r\n            {/* <div className=\"bottomSubscribeContainer\">\r\n                <div className=\"formField conditionsGenerales\">\r\n                    <p>En créant un compte chez Nivid, vous acceptez les <a href=\"CGU\">conditions générales</a> du site.</p>\r\n                </div>\r\n                <div className=\"formField\">\r\n                    <ButtonLarge\r\n                        onClick={(e) => handleSubscribeForm(e)}\r\n                        color=\"orange\"\r\n                        value=\"S'inscrire\"\r\n                        backgroundColor=\"rgba(245, 192, 67)\"\r\n                        marginTop=\"10px\"\r\n                    />\r\n                </div>\r\n            </div> */}\r\n        </div>\r\n    )\r\n}\r\nexport default Subscribe;\r\n"]},"metadata":{},"sourceType":"module"}