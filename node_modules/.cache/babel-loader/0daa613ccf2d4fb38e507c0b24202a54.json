{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bc/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useFirebase}from\"../../../assets/base-context\";// import { Services } from './Services'\nimport LocationSearchInput from\"../../autocompletePlaces\";import{useAuth}from\"../../../context/userContext\";// context\nimport InputRange from'react-input-range';import\"react-input-range/lib/css/index.css\";import DatePicker from\"react-date-picker\";import{Services}from'./Services';import{GoogleApiWrapper}from'google-maps-react';var ShowEvent=function ShowEvent(props){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var currentEvent=props.currentEvent;var handleDeleteEvent=props.handleDeleteEvent;var refEvent=firestore.collection(\"events\").doc(currentEvent);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),event=_useState2[0],setEvent=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentSubmenu=_useState6[0],setCurrentSubmenu=_useState6[1];var _useState7=useState(\"show\"),_useState8=_slicedToArray(_useState7,2),step=_useState8[0],setStep=_useState8[1];var _useAuth=useAuth(),formatLabelTimePicker=_useAuth.formatLabelTimePicker;useEffect(function(){getData().then(function(){setLoading(false);});appendToSliderTimePicker();},[step]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results,timstamp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refEvent.get();case 2:query=_context.sent;results=query.data();timstamp=results.date.toDate();setEvent(_objectSpread(_objectSpread({},results),{},{date:timstamp}));case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function handleAdressChanged(adress,latLng){setEvent(_objectSpread(_objectSpread({},event),{},{place:adress,latLng:latLng}));}function handleOnChangeInputs(name,value){if(name===\"name\"){setEvent(_objectSpread(_objectSpread({},event),{},{name:value}));}else if(name===\"place\"){setEvent(_objectSpread(_objectSpread({},event),{},{place:value}));}else if(name===\"latLng\"){setEvent(_objectSpread(_objectSpread({},event),{},{latLng:value}));}else if(name===\"budget\"){setEvent(_objectSpread(_objectSpread({},event),{},{budget:value}));}else if(name===\"people\"){setEvent(_objectSpread(_objectSpread({},event),{},{people:value}));}else if(name===\"placeSize\"){setEvent(_objectSpread(_objectSpread({},event),{},{placeSize:value}));}else if(name===\"date\"){setEvent(_objectSpread(_objectSpread({},event),{},{date:value}));}else if(name===\"startAt\"){setEvent(_objectSpread(_objectSpread({},event),{},{startAt:value}));appendToSliderTimePicker();}else if(name===\"endAt\"){setEvent(_objectSpread(_objectSpread({},event),{},{endAt:value}));appendToSliderTimePicker();}}function handleSendForm(_x){return _handleSendForm.apply(this,arguments);}function _handleSendForm(){_handleSendForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return refEvent.update(_objectSpread(_objectSpread({},event),{},{budget:parseInt(event.budget),people:parseInt(event.people),placeSize:parseInt(event.placeSize)})).catch(function(error){console.error(error);}).then(function(){setStep(\"show\");});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSendForm.apply(this,arguments);}function appendToSliderTimePicker(){var element=document.getElementsByClassName(\"input-range__slider\");var formatedEndTime=formatLabelTimePicker(event.endAt);var formatedStartTime=formatLabelTimePicker(event.startAt);if(element[0]!==undefined){element[0].innerHTML=\"Commence à \"+formatedStartTime;element[1].innerHTML=\"Termine à \"+formatedEndTime;}}return!loading&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:event.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"showSellerContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"headerShowSellerContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:currentSubmenu===0&&\"active\",onClick:function onClick(){return setCurrentSubmenu(0);},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Infos\"})}),/*#__PURE__*/_jsx(\"div\",{className:currentSubmenu===1&&\"active\",onClick:function onClick(){return setCurrentSubmenu(1);},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Services\"})})]}),currentSubmenu===0?/*#__PURE__*/_jsx(\"div\",{children:step===\"show\"?/*#__PURE__*/_jsxs(\"div\",{className:\"infoShowSellerContainer\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom: \"}),event.name]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse: \"}),event.place]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Budget: \"}),event.budget]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre de personnes: \"}),event.people]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Surface du lieu: \"}),event.placeSize]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date: \"}),event.date.toLocaleDateString(\"fr-FR\",{year:\"numeric\",month:\"numeric\",day:\"numeric\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Commence \\xE0: \"}),formatLabelTimePicker(event.startAt)]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Termine \\xE0: \"}),formatLabelTimePicker(event.endAt)]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Utilisateur: \"}),event.user]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"buttonAdminTransparent\",onClick:function onClick(){return setStep(\"edit\");},children:\"Modifier les informations\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteEvent();},className:\"buttonAdminTransparent\",children:\"Supprimer cet \\xE9v\\xE8nement\"})]}):step===\"edit\"&&/*#__PURE__*/_jsx(\"div\",{className:\"infoEditSellerContainer\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom de l'\\xE9v\\xE8nement\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:event.name,onChange:function onChange(e){return handleOnChangeInputs(\"name\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de l'\\xE9v\\xE8nement\"}),/*#__PURE__*/_jsx(LocationSearchInput,{placeType:\"address\",value:event.place,onChanged:handleAdressChanged})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Budget\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"budget\",value:event.budget,onChange:function onChange(e){return handleOnChangeInputs(\"budget\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre de personnes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"people\",value:event.people,onChange:function onChange(e){return handleOnChangeInputs(\"people\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Surface du lieu\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"placeSize\",value:event.placeSize,onChange:function onChange(e){return handleOnChangeInputs(\"placeSize\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date\"}),/*#__PURE__*/_jsx(DatePicker,{value:event.date,onChange:function onChange(date){return handleOnChangeInputs(\"date\",date);},className:\"etape1DatePicker\",format:\"dd/MM/yyyy\",clearIcon:null,calendarIcon:null,minDate:new Date()})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cr\\xE9neau horaire\"}),/*#__PURE__*/_jsx(\"div\",{className:\"etape1TimePickerContainer\",children:/*#__PURE__*/_jsx(InputRange,{maxValue:86400,minValue:0,draggableTrack:true,step:900,value:event.startAt,formatLabel:function formatLabel(value){return formatLabelTimePicker(value);},onChange:function onChange(value){return handleOnChangeInputs(\"startAt\",value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"etape1TimePickerContainer endAt\",children:/*#__PURE__*/_jsx(InputRange,{maxValue:86400,minValue:0,draggableTrack:true,step:900,value:event.endAt,formatLabel:function formatLabel(value){return formatLabelTimePicker(value);},onChange:function onChange(value){return handleOnChangeInputs(\"endAt\",value);}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Sauvegarder\",onClick:function onClick(e){return handleSendForm(e);}}),/*#__PURE__*/_jsx(\"button\",{className:\"buttonAdminTransparent\",onClick:function onClick(){return setStep('show');},children:\"Revenir en arri\\xE8re\"})]})})]})})}):/*#__PURE__*/_jsx(Services,{eventName:event.name,currentEvent:currentEvent})]})]});};export default GoogleApiWrapper({apiKey:\"AIzaSyAim92JbJjr_fgoP0bYxzdCAz9PsAu5JWY\"})(ShowEvent);","map":{"version":3,"sources":["/Users/bc/Desktop/Nivid/src/components/Admin/event/ShowEvent.js"],"names":["React","useEffect","useState","useFirebase","LocationSearchInput","useAuth","InputRange","DatePicker","Services","GoogleApiWrapper","ShowEvent","props","firebaseContext","firestore","currentEvent","handleDeleteEvent","refEvent","collection","doc","event","setEvent","loading","setLoading","currentSubmenu","setCurrentSubmenu","step","setStep","formatLabelTimePicker","getData","then","appendToSliderTimePicker","get","query","results","data","timstamp","date","toDate","handleAdressChanged","adress","latLng","place","handleOnChangeInputs","name","value","budget","people","placeSize","startAt","endAt","handleSendForm","e","preventDefault","update","parseInt","catch","error","console","element","document","getElementsByClassName","formatedEndTime","formatedStartTime","undefined","innerHTML","toLocaleDateString","year","month","day","user","target","Date","apiKey"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useFirebase } from \"../../../assets/base-context\";\r\n// import { Services } from './Services'\r\nimport LocationSearchInput from \"../../autocompletePlaces\"\r\nimport { useAuth } from \"../../../context/userContext\"; // context\r\nimport InputRange from 'react-input-range';\r\nimport \"react-input-range/lib/css/index.css\";\r\nimport DatePicker from \"react-date-picker\";\r\nimport { Services } from './Services'\r\nimport { GoogleApiWrapper } from 'google-maps-react';\r\n\r\nconst ShowEvent = (props) => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n    const currentEvent = props.currentEvent\r\n    const handleDeleteEvent = props.handleDeleteEvent\r\n    const refEvent = firestore.collection(\"events\").doc(currentEvent);\r\n\r\n    const [event, setEvent] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [currentSubmenu, setCurrentSubmenu] = useState(0)\r\n    const [step, setStep] = useState(\"show\")\r\n\r\n    const { formatLabelTimePicker } = useAuth()\r\n\r\n    useEffect(() => {\r\n        getData().then(() => {\r\n            setLoading(false)\r\n        })\r\n        appendToSliderTimePicker()\r\n    }, [step])\r\n\r\n    async function getData() {\r\n        const query = await refEvent.get();\r\n        const results = query.data()\r\n        const timstamp = results.date.toDate()\r\n        setEvent({\r\n            ...results,\r\n            date: timstamp\r\n        })\r\n    }\r\n\r\n    function handleAdressChanged(adress, latLng) {\r\n        setEvent({ ...event, place: adress, latLng: latLng })\r\n    }\r\n\r\n    function handleOnChangeInputs(name, value) {\r\n        if (name === \"name\") { setEvent({ ...event, name: value }) }\r\n        else if (name === \"place\") { setEvent({ ...event, place: value }) }\r\n        else if (name === \"latLng\") { setEvent({ ...event, latLng: value }) }\r\n        else if (name === \"budget\") { setEvent({ ...event, budget: value }) }\r\n        else if (name === \"people\") { setEvent({ ...event, people: value }) }\r\n        else if (name === \"placeSize\") { setEvent({ ...event, placeSize: value }) }\r\n        else if (name === \"date\") { setEvent({ ...event, date: value }) }\r\n        else if (name === \"startAt\") { setEvent({ ...event, startAt: value }); appendToSliderTimePicker() }\r\n        else if (name === \"endAt\") { setEvent({ ...event, endAt: value }); appendToSliderTimePicker() }\r\n    }\r\n\r\n    async function handleSendForm(e) {\r\n        e.preventDefault()\r\n\r\n        await refEvent.update({\r\n            ...event,\r\n            budget: parseInt(event.budget),\r\n            people: parseInt(event.people),\r\n            placeSize: parseInt(event.placeSize)\r\n        })\r\n            .catch((error) => {\r\n                console.error(error)\r\n            })\r\n            .then(() => {\r\n                setStep(\"show\")\r\n            })\r\n    }\r\n\r\n    function appendToSliderTimePicker() {\r\n        const element = document.getElementsByClassName(\"input-range__slider\")\r\n        const formatedEndTime = formatLabelTimePicker(event.endAt)\r\n        const formatedStartTime = formatLabelTimePicker(event.startAt)\r\n        if (element[0] !== undefined) {\r\n            element[0].innerHTML = \"Commence à \" + formatedStartTime\r\n            element[1].innerHTML = \"Termine à \" + formatedEndTime\r\n        }\r\n    }\r\n\r\n    return !loading && (\r\n        <div>\r\n            <h2>{event.name}</h2>\r\n            <div className=\"showSellerContainer\">\r\n                <div className=\"headerShowSellerContainer\">\r\n                    <div className={currentSubmenu === 0 && \"active\"} onClick={() => setCurrentSubmenu(0)}><h3>Infos</h3></div>\r\n                    <div className={currentSubmenu === 1 && \"active\"} onClick={() => setCurrentSubmenu(1)}><h3>Services</h3></div>\r\n                </div>\r\n                {currentSubmenu === 0 ?\r\n                    <div>\r\n                        {step === \"show\" ?\r\n                            <div className=\"infoShowSellerContainer\">\r\n                                <ul>\r\n                                    <li><label>Nom: </label>{event.name}</li>\r\n                                    <li><label>Adresse: </label>{event.place}</li>\r\n                                    <li><label>Budget: </label>{event.budget}</li>\r\n                                    <li><label>Nombre de personnes: </label>{event.people}</li>\r\n                                    <li><label>Surface du lieu: </label>{event.placeSize}</li>\r\n                                    <li><label>Date: </label>{event.date.toLocaleDateString(\"fr-FR\", { year: \"numeric\", month: \"numeric\", day: \"numeric\" })}</li>\r\n                                    <li><label>Commence à: </label>{formatLabelTimePicker(event.startAt)}</li>\r\n                                    <li><label>Termine à: </label>{formatLabelTimePicker(event.endAt)}</li>\r\n                                    <li><label>Utilisateur: </label>{event.user}</li>\r\n                                </ul>\r\n                                <button className=\"buttonAdminTransparent\" onClick={() => setStep(\"edit\")}>Modifier les informations</button>\r\n                                <button onClick={() => handleDeleteEvent()} className=\"buttonAdminTransparent\">Supprimer cet évènement</button>\r\n                            </div>\r\n                            : step === \"edit\" &&\r\n                            <div className=\"infoEditSellerContainer\">\r\n                                <form>\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Nom de l'évènement</label>\r\n                                            <input type=\"text\" name=\"name\" value={event.name} onChange={e => handleOnChangeInputs(\"name\", e.target.value)} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Lieu de l'évènement</label>\r\n                                            <LocationSearchInput placeType=\"address\" value={event.place} onChanged={handleAdressChanged} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Budget</label>\r\n                                            <input type=\"text\" name=\"budget\" value={event.budget} onChange={e => handleOnChangeInputs(\"budget\", e.target.value)} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Nombre de personnes</label>\r\n                                            <input type=\"text\" name=\"people\" value={event.people} onChange={e => handleOnChangeInputs(\"people\", e.target.value)} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Surface du lieu</label>\r\n                                            <input type=\"text\" name=\"placeSize\" value={event.placeSize} onChange={e => handleOnChangeInputs(\"placeSize\", e.target.value)} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Date</label>\r\n                                            <DatePicker\r\n                                                value={event.date}\r\n                                                onChange={date => handleOnChangeInputs(\"date\", date)}\r\n                                                className=\"etape1DatePicker\"\r\n                                                format=\"dd/MM/yyyy\"\r\n                                                clearIcon={null}\r\n                                                calendarIcon={null}\r\n                                                minDate={new Date()}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <label>Créneau horaire</label>\r\n                                            <div className=\"etape1TimePickerContainer\">\r\n                                                <InputRange\r\n                                                    maxValue={86400}\r\n                                                    minValue={0}\r\n                                                    draggableTrack\r\n                                                    step={900}\r\n                                                    value={event.startAt}\r\n                                                    formatLabel={value => formatLabelTimePicker(value)}\r\n                                                    onChange={value => handleOnChangeInputs(\"startAt\", value)} />\r\n                                            </div>\r\n                                            <div className=\"etape1TimePickerContainer endAt\">\r\n                                                <InputRange\r\n                                                    maxValue={86400}\r\n                                                    minValue={0}\r\n                                                    draggableTrack\r\n                                                    step={900}\r\n                                                    value={event.endAt}\r\n                                                    formatLabel={value => formatLabelTimePicker(value)}\r\n                                                    onChange={value => handleOnChangeInputs(\"endAt\", value)} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"formLine\">\r\n                                        <div className=\"formField\">\r\n                                            <input type=\"submit\" value=\"Sauvegarder\" onClick={(e) => handleSendForm(e)} />\r\n                                            <button className=\"buttonAdminTransparent\" onClick={() => setStep('show')}>Revenir en arrière</button>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    :\r\n                    <Services eventName={event.name} currentEvent={currentEvent} />\r\n                }\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\nexport default GoogleApiWrapper({\r\n    apiKey: (\"AIzaSyAim92JbJjr_fgoP0bYxzdCAz9PsAu5JWY\")\r\n})(ShowEvent)"]},"metadata":{},"sourceType":"module"}