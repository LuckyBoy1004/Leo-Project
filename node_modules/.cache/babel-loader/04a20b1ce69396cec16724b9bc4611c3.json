{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{useAuth}from'../context/userContext';import Title from'./utilities/Title';import{ButtonSmall}from'./utilities/Buttons';import{CSSTransition}from'react-transition-group';import ReactLoading from'react-loading';var Prest_Dashboard_Info=function Prest_Dashboard_Info(){var _useAuth=useAuth(),updateSellerProfil=_useAuth.updateSellerProfil,seller=_useAuth.seller;var _useState=useState({type:\"\",message:\"\"}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirm=_useState4[0],setConfirm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),buttonLoading=_useState6[0],setButtonLoading=_useState6[1];var initialData={companyName:\"\",adress:\"\",siret:\"\",website:\"\",firstName:\"\",lastName:\"\",email:\"\",phone:\"\",affiliateCode:\"\",status:\"\"};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMounted=_useState8[0],setIsMounted=_useState8[1];var _useState9=useState(initialData),_useState10=_slicedToArray(_useState9,2),sellerData=_useState10[0],setSellerData=_useState10[1];var _useState11=useState({companyName:false,website:false,firstName:false,lastName:false,phone:false}),_useState12=_slicedToArray(_useState11,2),sellerDataStatus=_useState12[0],setSellerDataStatus=_useState12[1];useEffect(function(){setSellerData({companyName:seller.companyName,adress:seller.adress,siret:seller.siret,website:seller.website,firstName:seller.firstName,lastName:seller.lastName,email:seller.email,phone:seller.phone,status:seller.status});setFieldsStatus(seller);return setIsMounted(true);},[]);function setFieldsStatus(data){setSellerDataStatus({companyName:data.companyName.length>0?true:false,firstName:data.firstName.length>0?true:false,lastName:data.lastName.length>0?true:false,phone:data.phone.length===10||data.phone.length===0?true:false});}function handleFormSubmit(){return _handleFormSubmit.apply(this,arguments);}function _handleFormSubmit(){_handleFormSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!buttonLoading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(sellerDataStatus.companyName){_context.next=4;break;}return _context.abrupt(\"return\",setError({type:\"companyName\",message:\"Vous devez renseigner le nom de votre entreprise.\"}));case 4:if(sellerDataStatus.firstName){_context.next=6;break;}return _context.abrupt(\"return\",setError({type:\"firstName\",message:\"Merci de renseigner le prénom du gérant\"}));case 6:if(sellerDataStatus.lastName){_context.next=8;break;}return _context.abrupt(\"return\",setError({type:\"lastName\",message:\"Merci de renseigner le nom du gérant\"}));case 8:if(sellerDataStatus.phone){_context.next=10;break;}return _context.abrupt(\"return\",setError({type:\"phone\",message:\"Merci de renseigner un numéro de téléphone valide\"}));case 10:setButtonLoading(true);data={companyName:sellerData.companyName,website:sellerData.website,firstName:sellerData.firstName,lastName:sellerData.lastName,phone:sellerData.phone};_context.next=14;return updateSellerProfil(data);case 14:setButtonLoading(false);setError({type:\"\",message:\"\"});setConfirm(\"Vos informations ont été modifiées\");case 17:case\"end\":return _context.stop();}}},_callee);}));return _handleFormSubmit.apply(this,arguments);}function handleFieldChange(data){setFieldsStatus(data);setSellerData(data);}return/*#__PURE__*/_jsx(CSSTransition,{in:isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"prest_Dashboard_Info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"prest_dashboard_info_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"prest_dashboard_info_header\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Vous pouvez modifier sur cette page vos informations personnelles entr\\xE9es lors de votre inscription mais attention ! \",/*#__PURE__*/_jsx(\"br\",{}),\"Celles-ci ne sont modifiables seulement pendant la p\\xE9riode d'attente de validation de votre compte, apr\\xE8s cette p\\xE9riode in ne sera plus possible de modifier vos informations personnelles.\"]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage\",children:error.message}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"leftForm\",children:[/*#__PURE__*/_jsx(Title,{value:\"Votre entreprise\",type:\"h2\",font:\"roboto-medium\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField withoutMargin\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom de l'entreprise\"}),/*#__PURE__*/_jsx(\"input\",{className:sellerDataStatus.companyName?\"valid\":\"notValid\",value:sellerData.companyName,type:\"text\",name:\"companyName\",onChange:function onChange(e){return handleFieldChange(_objectSpread(_objectSpread({},sellerData),{},{companyName:e.target.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField withoutMargin\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,value:sellerData.adress,type:\"text\",name:\"adress\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField withoutMargin\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Num\\xE9ro de Siret\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,value:sellerData.siret,type:\"text\",name:\"siret\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField withoutMargin\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Site internet\"}),/*#__PURE__*/_jsx(\"input\",{value:sellerData.website,type:\"text\",name:\"text\",onChange:function onChange(e){return handleFieldChange(_objectSpread(_objectSpread({},sellerData),{},{website:e.target.value}));}})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightForm\",children:[/*#__PURE__*/_jsx(Title,{value:\"Coordonn\\xE9es du g\\xE9rant\",type:\"h2\",font:\"roboto-medium\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"formLine\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{className:sellerDataStatus.firstName?\"valid\":\"notValid\",value:sellerData.firstName,type:\"text\",name:\"firstName\",onChange:function onChange(e){return handleFieldChange(_objectSpread(_objectSpread({},sellerData),{},{firstName:e.target.value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{className:sellerDataStatus.lastName?\"valid\":\"notValid\",value:sellerData.lastName,type:\"text\",name:\"lastName\",onChange:function onChange(e){return handleFieldChange(_objectSpread(_objectSpread({},sellerData),{},{lastName:e.target.value}));}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,value:sellerData.email,type:\"email\",name:\"email\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Num\\xE9ro de t\\xE9l\\xE9phone (fixe ou portable)\"}),/*#__PURE__*/_jsx(\"input\",{className:sellerDataStatus.phone?\"valid\":sellerData.phone.length===0?\"\":\"notValid\",value:sellerData.phone,type:\"text\",name:\"phone\",onChange:function onChange(e){return handleFieldChange(_objectSpread(_objectSpread({},sellerData),{},{phone:e.target.value}));}})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actionFormContainer\",children:[confirm.length>0&&/*#__PURE__*/_jsx(\"p\",{children:confirm}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return handleFormSubmit();},color:\"orange\",disabled:buttonLoading,value:buttonLoading?/*#__PURE__*/_jsx(ReactLoading,{className:\"loadingSpinnerButton\",type:\"spin\",color:\"white\",height:23,width:23}):\"Sauvegarder les changements\"})]})]})})});};export default Prest_Dashboard_Info;","map":{"version":3,"sources":["/Users/bonnieclyde/Desktop/Nivid/src/components/Prest_Dashboard_Info.js"],"names":["React","useState","useEffect","useAuth","Title","ButtonSmall","CSSTransition","ReactLoading","Prest_Dashboard_Info","updateSellerProfil","seller","type","message","error","setError","confirm","setConfirm","buttonLoading","setButtonLoading","initialData","companyName","adress","siret","website","firstName","lastName","email","phone","affiliateCode","status","isMounted","setIsMounted","sellerData","setSellerData","sellerDataStatus","setSellerDataStatus","setFieldsStatus","data","length","handleFormSubmit","handleFieldChange","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '../context/userContext'\r\n\r\nimport Title from './utilities/Title'\r\nimport { ButtonSmall } from './utilities/Buttons'\r\n\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport ReactLoading from 'react-loading';\r\n\r\n\r\nconst Prest_Dashboard_Info = () => {\r\n\r\n    const {\r\n        updateSellerProfil,\r\n        seller\r\n    } = useAuth()\r\n\r\n    const [error, setError] = useState({ type: \"\", message: \"\" });\r\n    const [confirm, setConfirm] = useState(\"\");\r\n    const [buttonLoading, setButtonLoading] = useState(false)\r\n\r\n    const initialData = {\r\n        companyName: \"\",\r\n        adress: \"\",\r\n        siret: \"\",\r\n        website: \"\",\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        affiliateCode: \"\",\r\n        status: \"\"\r\n    }\r\n\r\n    const [isMounted, setIsMounted] = useState(false);\r\n\r\n    const [sellerData, setSellerData] = useState(initialData);\r\n    const [sellerDataStatus, setSellerDataStatus] = useState({\r\n        companyName: false,\r\n        website: false,\r\n        firstName: false,\r\n        lastName: false,\r\n        phone: false,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setSellerData({\r\n            companyName: seller.companyName,\r\n            adress: seller.adress,\r\n            siret: seller.siret,\r\n            website: seller.website,\r\n            firstName: seller.firstName,\r\n            lastName: seller.lastName,\r\n            email: seller.email,\r\n            phone: seller.phone,\r\n            status: seller.status\r\n        })\r\n        setFieldsStatus(seller)\r\n        return setIsMounted(true)\r\n    }, [])\r\n\r\n    function setFieldsStatus(data) {\r\n        setSellerDataStatus({\r\n            companyName: data.companyName.length > 0 ? true : false,\r\n            firstName: data.firstName.length > 0 ? true : false,\r\n            lastName: data.lastName.length > 0 ? true : false,\r\n            phone: data.phone.length === 10 || data.phone.length === 0 ? true : false,\r\n        })\r\n    }\r\n\r\n    async function handleFormSubmit() {\r\n        if (buttonLoading) return\r\n        if (!sellerDataStatus.companyName) return setError({ type: \"companyName\", message: \"Vous devez renseigner le nom de votre entreprise.\" })\r\n        if (!sellerDataStatus.firstName) return setError({ type: \"firstName\", message: \"Merci de renseigner le prénom du gérant\" })\r\n        if (!sellerDataStatus.lastName) return setError({ type: \"lastName\", message: \"Merci de renseigner le nom du gérant\" })\r\n        if (!sellerDataStatus.phone) return setError({ type: \"phone\", message: \"Merci de renseigner un numéro de téléphone valide\" })\r\n        setButtonLoading(true)\r\n        const data = {\r\n            companyName: sellerData.companyName,\r\n            website: sellerData.website,\r\n            firstName: sellerData.firstName,\r\n            lastName: sellerData.lastName,\r\n            phone: sellerData.phone\r\n        }\r\n        await updateSellerProfil(data)\r\n        setButtonLoading(false)\r\n        setError({ type: \"\", message: \"\" })\r\n        setConfirm(\"Vos informations ont été modifiées\")\r\n    }\r\n\r\n\r\n    function handleFieldChange(data) {\r\n        setFieldsStatus(data)\r\n        setSellerData(data)\r\n    }\r\n\r\n\r\n    return (\r\n        <CSSTransition\r\n            in={isMounted}\r\n            timeout={300}\r\n            classNames=\"pageTransition\"\r\n            unmountOnExit\r\n        >\r\n            <div className=\"prest_Dashboard_Info\">\r\n                <div className=\"prest_dashboard_info_container\">\r\n                    <div className=\"prest_dashboard_info_header\">\r\n                        <p>Vous pouvez modifier sur cette page vos informations personnelles entrées lors de votre inscription mais attention ! <br />\r\n                    Celles-ci ne sont modifiables seulement pendant la période d'attente de validation de votre compte, après cette période in ne sera plus possible de modifier vos informations personnelles.\r\n                    </p>\r\n                    </div>\r\n\r\n                    {error && <div className=\"errorMessage\">{error.message}</div>}\r\n\r\n                    <form>\r\n                        <div className=\"leftForm\">\r\n                            <Title value=\"Votre entreprise\" type=\"h2\" font=\"roboto-medium\" />\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField withoutMargin\">\r\n                                    <label>Nom de l'entreprise</label>\r\n                                    <input\r\n                                        className={sellerDataStatus.companyName ? \"valid\" : \"notValid\"}\r\n                                        value={sellerData.companyName}\r\n                                        type=\"text\"\r\n                                        name=\"companyName\"\r\n                                        onChange={(e) => handleFieldChange({ ...sellerData, companyName: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField withoutMargin\">\r\n                                    <label>Adresse</label>\r\n                                    <input disabled value={sellerData.adress} type=\"text\" name=\"adress\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField withoutMargin\">\r\n                                    <label>Numéro de Siret</label>\r\n                                    <input disabled value={sellerData.siret} type=\"text\" name=\"siret\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField withoutMargin\">\r\n                                    <label>Site internet</label>\r\n                                    <input\r\n                                        value={sellerData.website}\r\n                                        type=\"text\"\r\n                                        name=\"text\"\r\n                                        onChange={(e) => handleFieldChange({ ...sellerData, website: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"rightForm\">\r\n                            <Title value=\"Coordonnées du gérant\" type=\"h2\" font=\"roboto-medium\" />\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField\">\r\n                                    <label>Prénom</label>\r\n                                    <input\r\n                                        className={sellerDataStatus.firstName ? \"valid\" : \"notValid\"}\r\n                                        value={sellerData.firstName}\r\n                                        type=\"text\"\r\n                                        name=\"firstName\"\r\n                                        onChange={(e) => handleFieldChange({ ...sellerData, firstName: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"formField\">\r\n                                    <label>Nom</label>\r\n                                    <input\r\n                                        className={sellerDataStatus.lastName ? \"valid\" : \"notValid\"}\r\n                                        value={sellerData.lastName}\r\n                                        type=\"text\"\r\n                                        name=\"lastName\"\r\n                                        onChange={(e) => handleFieldChange({ ...sellerData, lastName: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField\">\r\n                                    <label>Email</label>\r\n                                    <input disabled value={sellerData.email} type=\"email\" name=\"email\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"formLine\">\r\n                                <div className=\"formField\">\r\n                                    <label>Numéro de téléphone (fixe ou portable)</label>\r\n                                    <input\r\n                                        className={sellerDataStatus.phone ? \"valid\" : sellerData.phone.length === 0 ? \"\" : \"notValid\"}\r\n                                        value={sellerData.phone}\r\n                                        type=\"text\"\r\n                                        name=\"phone\"\r\n                                        onChange={(e) => handleFieldChange({ ...sellerData, phone: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"actionFormContainer\">\r\n                        {confirm.length > 0 && <p>{confirm}</p>}\r\n                        <ButtonSmall\r\n                            onClick={() => handleFormSubmit()}\r\n                            color=\"orange\"\r\n                            disabled={buttonLoading}\r\n                            value={buttonLoading ? <ReactLoading className=\"loadingSpinnerButton\" type=\"spin\" color=\"white\" height={23} width={23} /> : \"Sauvegarder les changements\"}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </CSSTransition>\r\n    )\r\n}\r\n\r\nexport default Prest_Dashboard_Info"]},"metadata":{},"sourceType":"module"}