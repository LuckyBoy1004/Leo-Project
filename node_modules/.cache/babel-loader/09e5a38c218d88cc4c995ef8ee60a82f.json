{"ast":null,"code":"import _regeneratorRuntime from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{Table}from'../Table';import{useFirebase}from\"../../../assets/base-context\";export var Users=function Users(){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var refUsers=firestore.collection(\"users\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),step=_useState6[0],setStep=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];useEffect(function(){getData().then(function(){setLoading(false);});},[step]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refUsers.get();case 2:query=_context.sent;results=[];query.forEach(function(doc){results.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id,action:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteUser(doc.id);},children:\"Supprimer\"})}));});setUsers(results);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function handleDeleteUser(_x){return _handleDeleteUser.apply(this,arguments);}function _handleDeleteUser(){_handleDeleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return refUsers.doc(id).delete().then(function(){setStep(!step);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteUser.apply(this,arguments);}function handleSearch(val){setSearch(val);}return!loading&&/*#__PURE__*/_jsx(\"div\",{title:\"Liste des users\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Table,{data:users,type:\"users\"})})});};","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/components/Admin/user/Users.js"],"names":["React","useEffect","useState","Table","useFirebase","Users","firebaseContext","firestore","refUsers","collection","users","setUsers","loading","setLoading","step","setStep","search","setSearch","getData","then","get","query","results","forEach","doc","push","data","id","action","handleDeleteUser","delete","handleSearch","val"],"mappings":"+lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,KAAsB,UAAtB,CACA,OAASC,WAAT,KAA4B,8BAA5B,CAEA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAEvB,GAAMC,CAAAA,eAAe,CAAGF,WAAW,EAAnC,CACA,GAAMG,CAAAA,SAAS,CAAGD,eAAe,CAACC,SAAhB,EAAlB,CAGA,GAAMC,CAAAA,QAAQ,CAAGD,SAAS,CAACE,UAAV,CAAqB,OAArB,CAAjB,CANuB,cAOGP,QAAQ,CAAC,EAAD,CAPX,wCAOhBQ,KAPgB,eAOTC,QAPS,8BAQOT,QAAQ,CAAC,IAAD,CARf,yCAQhBU,OARgB,eAQPC,UARO,8BASCX,QAAQ,CAAC,IAAD,CATT,yCAShBY,IATgB,eASVC,OATU,8BAUKb,QAAQ,CAAC,EAAD,CAVb,yCAUhBc,MAVgB,eAURC,SAVQ,eAYvBhB,SAAS,CAAC,UAAM,CACZiB,OAAO,GAAGC,IAAV,CAAe,UAAM,CACjBN,UAAU,CAAC,KAAD,CAAV,CACH,CAFD,EAGH,CAJQ,CAIN,CAACC,IAAD,CAJM,CAAT,CAZuB,QAkBRI,CAAAA,OAlBQ,+HAkBvB,2KACwBV,CAAAA,QAAQ,CAACY,GAAT,EADxB,QACUC,KADV,eAEUC,OAFV,CAEoB,EAFpB,CAIID,KAAK,CAACE,OAAN,CAAc,SAAAC,GAAG,CAAI,CACjBF,OAAO,CAACG,IAAR,gCACOD,GAAG,CAACE,IAAJ,EADP,MAEIC,EAAE,CAAEH,GAAG,CAACG,EAFZ,CAGIC,MAAM,cAAE,eAAQ,OAAO,CAAE,yBAAOC,CAAAA,gBAAgB,CAACL,GAAG,CAACG,EAAL,CAAvB,EAAjB,uBAHZ,IAKH,CAND,EAOAhB,QAAQ,CAACW,OAAD,CAAR,CAXJ,sDAlBuB,kDAgCRO,CAAAA,gBAhCQ,4JAgCvB,kBAAgCF,EAAhC,6IACUnB,CAAAA,QAAQ,CAACgB,GAAT,CAAaG,EAAb,EAAiBG,MAAjB,GAA0BX,IAA1B,CAA+B,UAAM,CACvCJ,OAAO,CAAC,CAACD,IAAF,CAAP,CACH,CAFK,CADV,yDAhCuB,mDAsCvB,QAASiB,CAAAA,YAAT,CAAsBC,GAAtB,CAA2B,CACvBf,SAAS,CAACe,GAAD,CAAT,CACH,CAED,MAAO,CAACpB,OAAD,eACH,YAAK,KAAK,CAAC,iBAAX,uBACY,kCACI,KAAC,KAAD,EAAO,IAAI,CAAEF,KAAb,CAAoB,IAAI,CAAC,OAAzB,EADJ,EADZ,EADJ,CAOH,CAjDM","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Table } from '../Table'\r\nimport { useFirebase } from \"../../../assets/base-context\";\r\n\r\nexport const Users = () => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n\r\n    const refUsers = firestore.collection(\"users\");\r\n    const [users, setUsers] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [step, setStep] = useState(true)\r\n    const [search, setSearch] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        getData().then(() => {\r\n            setLoading(false)\r\n        })\r\n    }, [step])\r\n\r\n    async function getData() {\r\n        const query = await refUsers.get();\r\n        const results = []\r\n\r\n        query.forEach(doc => {\r\n            results.push({\r\n                ...doc.data(),\r\n                id: doc.id,\r\n                action: <button onClick={() => (handleDeleteUser(doc.id))}>Supprimer</button>\r\n            })\r\n        })\r\n        setUsers(results)\r\n    }\r\n\r\n    async function handleDeleteUser(id) {\r\n        await refUsers.doc(id).delete().then(() => {\r\n            setStep(!step)\r\n        })\r\n    }\r\n\r\n    function handleSearch(val) {\r\n        setSearch(val)\r\n    }\r\n\r\n    return !loading && (\r\n        <div title=\"Liste des users\">\r\n                    <div>\r\n                        <Table data={users} type=\"users\" />\r\n                    </div>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}