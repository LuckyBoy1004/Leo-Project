{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bonnieclyde/Desktop/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useFirebase}from\"../../assets/base-context\";import ShowSeller from'./ShowSeller';import{Table}from'./Table';import{CreateSeller}from'./CreateSeller';export var Sellers=function Sellers(){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var refSellers=firestore.collection(\"sellers\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sellers=_useState2[0],setSellers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"list\"),_useState6=_slicedToArray(_useState5,2),step=_useState6[0],setStep=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentSeller=_useState8[0],setCurrentSeller=_useState8[1];useEffect(function(){var refSellers=firestore.collection(\"sellers\");function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refSellers.get();case 2:query=_context.sent;results=[];query.forEach(function(doc){results.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id,action:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleOpeningSeller(doc.id);},children:\"Voir\"})}));});setSellers(results);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData().then(function(){setLoading(false);});},[step]);function handleDeletePrestataire(){return _handleDeletePrestataire.apply(this,arguments);}function _handleDeletePrestataire(){_handleDeletePrestataire=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return refSellers.doc(currentSeller).delete().then(function(){setStep(\"list\");});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeletePrestataire.apply(this,arguments);}function handleOpeningSeller(id){setStep('show');setCurrentSeller(id);}return!loading&&/*#__PURE__*/_jsx(\"div\",{title:\"Liste des prestataires\",children:step===\"list\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"create\");},className:\"buttonAdminTransparent\",children:\" + Cr\\xE9er un pr\\xE9stataire\"}),/*#__PURE__*/_jsx(Table,{data:sellers,type:\"sellers\"})]}):step===\"show\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"list\");},className:\"buttonAdminTransparent\",children:\"Revenir \\xE0 la liste des pr\\xE9stataires\"}),/*#__PURE__*/_jsx(ShowSeller,{handleDeletePrestataire:handleDeletePrestataire,currentSeller:currentSeller})]}):step===\"create\"&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"list\");},className:\"buttonAdminTransparent\",children:\"Revenir \\xE0 la liste des pr\\xE9stataires\"}),/*#__PURE__*/_jsx(CreateSeller,{setStep:setStep,setCurrentSeller:setCurrentSeller})]})});};","map":{"version":3,"sources":["/Users/bonnieclyde/Desktop/Nivid/src/components/Admin/Sellers.js"],"names":["React","useEffect","useState","useFirebase","ShowSeller","Table","CreateSeller","Sellers","firebaseContext","firestore","refSellers","collection","sellers","setSellers","loading","setLoading","step","setStep","currentSeller","setCurrentSeller","getData","get","query","results","forEach","doc","push","data","id","action","handleOpeningSeller","then","handleDeletePrestataire","delete"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useFirebase } from \"../../assets/base-context\";\r\nimport ShowSeller from './ShowSeller'\r\nimport { Table } from './Table'\r\nimport { CreateSeller } from './CreateSeller'\r\n\r\nexport const Sellers = () => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n    const refSellers = firestore.collection(\"sellers\");\r\n    const [sellers, setSellers] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [step, setStep] = useState(\"list\")\r\n    const [currentSeller, setCurrentSeller] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        const refSellers = firestore.collection(\"sellers\");\r\n\r\n        async function getData() {\r\n            const query = await refSellers.get();\r\n            const results = []\r\n\r\n            query.forEach(doc => {\r\n                results.push({\r\n                    ...doc.data(),\r\n                    id: doc.id,\r\n                    action: <button onClick={() => handleOpeningSeller(doc.id)}>Voir</button>\r\n                })\r\n            })\r\n            setSellers(results)\r\n        }\r\n\r\n        getData().then(() => {\r\n            setLoading(false)\r\n        })\r\n    }, [step])\r\n\r\n\r\n    async function handleDeletePrestataire() {\r\n        await refSellers.doc(currentSeller).delete().then(() => {\r\n            setStep(\"list\")\r\n        })\r\n    }\r\n\r\n    function handleOpeningSeller(id) {\r\n        setStep('show')\r\n        setCurrentSeller(id)\r\n    }\r\n\r\n\r\n    return !loading && (\r\n        <div title=\"Liste des prestataires\">\r\n            {\r\n                step === \"list\" ?\r\n                    <div>\r\n                        <button onClick={() => setStep(\"create\")} className=\"buttonAdminTransparent\"> + Créer un préstataire</button>\r\n                        <Table data={sellers} type=\"sellers\" />\r\n                    </div>\r\n                    : step === \"show\" ?\r\n                        <div>\r\n                            <button onClick={() => setStep(\"list\")} className=\"buttonAdminTransparent\">Revenir à la liste des préstataires</button>\r\n                            <ShowSeller handleDeletePrestataire={handleDeletePrestataire} currentSeller={currentSeller} />\r\n                        </div>\r\n                        : step === \"create\" &&\r\n                        <div>\r\n                            <button onClick={() => setStep(\"list\")} className=\"buttonAdminTransparent\">Revenir à la liste des préstataires</button>\r\n                            <CreateSeller setStep={setStep} setCurrentSeller={setCurrentSeller} />\r\n                        </div>\r\n            }\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}