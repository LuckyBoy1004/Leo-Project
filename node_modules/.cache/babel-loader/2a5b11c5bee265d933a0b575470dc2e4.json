{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bc/Desktop/New Nivid/Leo-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{useAuth}from'../context/userContext';import{useHistory}from\"react-router-dom\";import ReactLoading from'react-loading';import{ButtonSmall}from'./utilities/Buttons';import Image from'./utilities/Image';var WishList=function WishList(_ref){var eventStatus=_ref.eventStatus,isMobile=_ref.isMobile;var _useAuth=useAuth(),user=_useAuth.user,getWishList=_useAuth.getWishList,getSellersInDbWithUids=_useAuth.getSellersInDbWithUids,deleteItemFromWishList=_useAuth.deleteItemFromWishList;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),wishList=_useState4[0],setWishList=_useState4[1];var history=useHistory();useEffect(function(){getWishList(user.uid).then(function(sellersIds){sellersIds.length>0?getSellersInDbWithUids(sellersIds).then(function(sellersData){setWishList(sellersData);setLoading(false);}):setLoading(false);});},[]);function deleteItem(_x){return _deleteItem.apply(this,arguments);}function _deleteItem(){_deleteItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(sellerID){var newWishList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return deleteItemFromWishList(sellerID);case 2:newWishList=wishList.filter(function(item){return item.uid!==sellerID;});setWishList(newWishList);return _context.abrupt(\"return\");case 5:case\"end\":return _context.stop();}}},_callee);}));return _deleteItem.apply(this,arguments);}function handleSellerClicked(sellerID){if(eventStatus===\"creating\"){history.push(\"/creer-mon-evenement/etape-2/prestataires/\".concat(sellerID));}}return loading?/*#__PURE__*/_jsx(\"div\",{className:isMobile?\"dashboardWishlist mobile\":\"dashboardWishlist\",children:/*#__PURE__*/_jsx(ReactLoading,{className:isMobile?\"loadingSpinner mobile\":\"loadingSpinner\",type:\"spin\",color:\"rgba(245, 192, 67)\",height:50,width:50})}):/*#__PURE__*/_jsx(\"div\",{className:isMobile?\"dashboardWishlist mobile\":\"dashboardWishlist\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"leftSide\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Vos prestataires favoris\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"wishlist_content\",children:[wishList.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"wishlist__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"heartContainer\",children:/*#__PURE__*/_jsx(Image,{url:\"/images/heart.svg\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleSellerClicked(item.uid);},className:\"wishlist__item_top \".concat(eventStatus===\"creating\"&&\"clickable\"),style:{backgroundImage:\"url(\".concat(item.image_path.url,\")\"),backgroundSize:\"cover\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wishlist__item_details\",children:[/*#__PURE__*/_jsx(\"p\",{children:item.companyName}),/*#__PURE__*/_jsx(\"p\",{children:\"+ en savoir plus\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"wishlist__item_bottom\",children:/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return deleteItem(item.uid);},color:\"red\",value:\"Retirer de ma liste\"})})]},key);}),wishList.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"noContent\",children:\"Pas de prestataires dans vos favoris\"})]})]})});};export default WishList;","map":{"version":3,"sources":["/Users/bc/Desktop/New Nivid/Leo-Project/src/components/WishList.js"],"names":["React","useState","useEffect","useAuth","useHistory","ReactLoading","ButtonSmall","Image","WishList","eventStatus","isMobile","user","getWishList","getSellersInDbWithUids","deleteItemFromWishList","loading","setLoading","wishList","setWishList","history","uid","then","sellersIds","length","sellersData","deleteItem","sellerID","newWishList","filter","item","handleSellerClicked","push","map","key","backgroundImage","image_path","url","backgroundSize","companyName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from '../context/userContext'\nimport { useHistory } from \"react-router-dom\";\nimport ReactLoading from 'react-loading';\n\nimport { ButtonSmall } from './utilities/Buttons'\nimport Image from './utilities/Image'\n\nconst WishList = ({ eventStatus, isMobile }) => {\n\n    const { user, getWishList, getSellersInDbWithUids, deleteItemFromWishList } = useAuth()\n\n    const [loading, setLoading] = useState(true)\n    const [wishList, setWishList] = useState([])\n\n    const history = useHistory()\n\n\n    useEffect(() => {\n        getWishList(user.uid)\n            .then(sellersIds => {\n                sellersIds.length > 0 ?\n                    getSellersInDbWithUids(sellersIds)\n                        .then(sellersData => {\n                            setWishList(sellersData)\n                            setLoading(false)\n                        })\n                    :\n                    setLoading(false)\n\n            })\n    }, [])\n\n    async function deleteItem(sellerID) {\n        await deleteItemFromWishList(sellerID)\n        const newWishList = wishList.filter(item => item.uid !== sellerID)\n        setWishList(newWishList)\n        return\n    }\n\n    function handleSellerClicked(sellerID) {\n        if (eventStatus === \"creating\") {\n            history.push(`/creer-mon-evenement/etape-2/prestataires/${sellerID}`)\n        }\n    }\n\n    return loading ?\n        <div className={isMobile ? \"dashboardWishlist mobile\" : \"dashboardWishlist\"}>\n            <ReactLoading className={isMobile ? \"loadingSpinner mobile\" : \"loadingSpinner\"} type=\"spin\" color=\"rgba(245, 192, 67)\" height={50} width={50} />\n        </div>\n        : (\n            <div className={isMobile ? \"dashboardWishlist mobile\" : \"dashboardWishlist\"}>\n                <div className=\"leftSide\">\n                    <h1>Vos prestataires favoris</h1>\n                    <div className=\"wishlist_content\">\n                        {wishList.map((item, key) =>\n                            <div key={key} className=\"wishlist__item\">\n                                <span className=\"heartContainer\">\n                                    <Image url=\"/images/heart.svg\" />\n                                </span>\n                                <div\n                                    onClick={() => handleSellerClicked(item.uid)}\n                                    className={`wishlist__item_top ${eventStatus === \"creating\" && \"clickable\"}`}\n                                    style={{backgroundImage:`url(${item.image_path.url})`, backgroundSize:\"cover\"}}\n                                >\n                                    <div className=\"wishlist__item_details\">\n                                        <p>{item.companyName}</p>\n                                        <p>+ en savoir plus</p>\n                                    </div>\n                                </div>\n                                <div className=\"wishlist__item_bottom\">\n                                    <ButtonSmall onClick={() => deleteItem(item.uid)} color=\"red\" value=\"Retirer de ma liste\" />\n                                </div>\n                            </div>\n                        )}\n                        {wishList.length === 0 && <p className=\"noContent\">Pas de prestataires dans vos favoris</p>}\n                    </div>\n                </div>\n            </div >\n        )\n}\n\nexport default WishList"]},"metadata":{},"sourceType":"module"}