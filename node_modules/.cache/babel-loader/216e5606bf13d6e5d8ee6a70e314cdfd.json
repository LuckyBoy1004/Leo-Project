{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Home/Desktop/Boulot/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useFirebase}from\"../../assets/base-context\";export var ShowService=function ShowService(props){var firebaseContext=useFirebase();var firestore=firebaseContext.firestore();var currentSeller=props.currentSeller;var currentService=props.currentService;var handleDeleteService=props.handleDeleteService;var refService=firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\").doc(currentService);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),service=_useState2[0],setService=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"show\"),_useState6=_slicedToArray(_useState5,2),step=_useState6[0],setStep=_useState6[1];useEffect(function(){getData().then(function(){setLoading(false);});},[]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refService.get();case 2:query=_context.sent;results=query.data();setService(results);console.log(results);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function handleOnChangeInputs(name,value){if(name===\"name\"){setService(_objectSpread(_objectSpread({},service),{},{name:value}));}else if(name===\"price\"){setService(_objectSpread(_objectSpread({},service),{},{price:value}));}else if(name===\"description\"){setService(_objectSpread(_objectSpread({},service),{},{description:value}));}}function handleSendForm(_x){return _handleSendForm.apply(this,arguments);}function _handleSendForm(){_handleSendForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return refService.update(service).catch(function(error){console.error(error);}).then(function(){setStep(\"show\");});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSendForm.apply(this,arguments);}return!loading&&/*#__PURE__*/_jsx(\"div\",{children:step===\"show\"?/*#__PURE__*/_jsxs(\"div\",{className:\"infoShowServiceContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:service.name}),/*#__PURE__*/_jsx(\"div\",{className:\"infoShowServiceImages\",children:service.images.map(function(image){return/*#__PURE__*/_jsx(\"img\",{alt:\"nivid\",src:image.url});})}),/*#__PURE__*/_jsxs(\"ul\",{children:[service.variations.length===0&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prix: \"}),service.price]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cat\\xE9gorie: \"}),service.category]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"D\\xE9scription: \"}),service.description]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Variations: \"}),/*#__PURE__*/_jsx(\"p\",{children:service.variations.length===0?\"Non\":service.variations.map(function(variation){return\"\".concat(variation.name,\" -- \").concat(variation.price,\"\\u20AC \");})})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setStep(\"edit\");},className:\"buttonAdminTransparent\",children:\"Modifier\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteService();},className:\"buttonAdminTransparent\",children:\"Supprimer ce service\"})]}):step===\"edit\"&&/*#__PURE__*/_jsx(\"div\",{className:\"infoEditSellerContainer\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom du service\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:service.name,onChange:function onChange(e){return handleOnChangeInputs(\"name\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prix\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price\",value:service.price,onChange:function onChange(e){return handleOnChangeInputs(\"price\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"D\\xE9scription\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"description\",value:service.description,onChange:function onChange(e){return handleOnChangeInputs(\"description\",e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"formLine\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Sauvegarder\",onClick:function onClick(e){return handleSendForm(e);}}),/*#__PURE__*/_jsx(\"button\",{className:\"buttonAdminTransparent\",onClick:function onClick(){return setStep('show');},children:\"Revenir en arri\\xE8re\"})]})})]})})});};","map":{"version":3,"sources":["C:/Users/Home/Desktop/Boulot/Nivid/src/components/Admin/ShowService.js"],"names":["React","useEffect","useState","useFirebase","ShowService","props","firebaseContext","firestore","currentSeller","currentService","handleDeleteService","refService","collection","doc","service","setService","loading","setLoading","step","setStep","getData","then","get","query","results","data","console","log","handleOnChangeInputs","name","value","price","description","handleSendForm","e","preventDefault","update","catch","error","images","map","image","url","variations","length","category","variation","target"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useFirebase } from \"../../assets/base-context\";\r\n\r\n\r\nexport const ShowService = (props) => {\r\n\r\n    const firebaseContext = useFirebase()\r\n    const firestore = firebaseContext.firestore()\r\n\r\n    const currentSeller = props.currentSeller\r\n    const currentService = props.currentService\r\n    const handleDeleteService = props.handleDeleteService\r\n    const refService = firestore.collection(\"sellers\").doc(currentSeller).collection(\"services\").doc(currentService);\r\n\r\n    const [service, setService] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [step, setStep] = useState(\"show\")\r\n\r\n    useEffect(() => {\r\n        getData().then(() => {\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    async function getData() {\r\n        const query = await refService.get();\r\n        const results = query.data()\r\n        setService(results)\r\n        console.log(results)\r\n    }\r\n\r\n    function handleOnChangeInputs(name, value) {\r\n        if (name === \"name\") { setService({ ...service, name: value }) }\r\n        else if (name === \"price\") { setService({ ...service, price: value }) }\r\n        else if (name === \"description\") { setService({ ...service, description: value }) }\r\n    }\r\n\r\n    async function handleSendForm(e) {\r\n        e.preventDefault()\r\n\r\n        await refService.update(service)\r\n            .catch((error) => {\r\n                console.error(error)\r\n            })\r\n            .then(() => {\r\n                setStep(\"show\")\r\n            })\r\n    }\r\n\r\n\r\n    return !loading && (\r\n        <div>\r\n            {step === \"show\" ?\r\n                <div className=\"infoShowServiceContainer\">\r\n                    <h2>{service.name}</h2>\r\n                    <div className=\"infoShowServiceImages\">\r\n                        {service.images.map(image => {\r\n                            return <img alt=\"nivid\" src={image.url} />\r\n                        })}\r\n                    </div>\r\n                    <ul>\r\n                        {service.variations.length === 0 && <li><label>Prix: </label>{service.price}</li>}\r\n                        <li><label>Catégorie: </label>{service.category}</li>\r\n                        <li><label>Déscription: </label>{service.description}</li>\r\n                        <li>\r\n                            <label>Variations: </label>\r\n                            <p>{\r\n                                service.variations.length === 0 ? \"Non\"\r\n                            : service.variations.map(variation => `${variation.name} -- ${variation.price}€ `)\r\n                            }</p>\r\n                        </li>\r\n                    </ul>\r\n                    <button onClick={() => setStep(\"edit\")} className=\"buttonAdminTransparent\">Modifier</button>\r\n                    <button onClick={() => handleDeleteService()} className=\"buttonAdminTransparent\">Supprimer ce service</button>\r\n                </div>\r\n                : step === \"edit\" &&\r\n                <div className=\"infoEditSellerContainer\">\r\n                    <form>\r\n                        <div className=\"formLine\">\r\n                            <div className=\"formField\">\r\n                                <label>Nom du service</label>\r\n                                <input type=\"text\" name=\"name\" value={service.name} onChange={e => handleOnChangeInputs(\"name\", e.target.value)} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"formLine\">\r\n                            <div className=\"formField\">\r\n                                <label>Prix</label>\r\n                                <input type=\"text\" name=\"price\" value={service.price} onChange={e => handleOnChangeInputs(\"price\", e.target.value)} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"formLine\">\r\n                            <div className=\"formField\">\r\n                                <label>Déscription</label>\r\n                                <textarea type=\"text\" name=\"description\" value={service.description} onChange={e => handleOnChangeInputs(\"description\", e.target.value)} />\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"formLine\">\r\n                            <div className=\"formField\">\r\n                                <input type=\"submit\" value=\"Sauvegarder\" onClick={(e) => handleSendForm(e)} />\r\n                                <button className=\"buttonAdminTransparent\" onClick={() => setStep('show')}>Revenir en arrière</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}