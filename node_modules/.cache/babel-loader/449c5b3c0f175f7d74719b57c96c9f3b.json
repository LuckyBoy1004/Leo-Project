{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\My Project\\\\Leo\\\\Nivid\\\\src\\\\pages\\\\Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport '../styles/Dashboard.css';\nimport Slideshow from \"../components/Slider\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from '../components/Header';\nimport { useAuth } from '../context/userContext';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport UpdateProfil from '../components/UpdateProfil';\nimport InterestedSellers from '../components/InterestedSellers';\nimport WishList from '../components/WishList';\nimport BlogWidget from '../components/BlogWidget';\nimport { CSSTransition } from 'react-transition-group';\nimport { ButtonSmall } from '../components/utilities/Buttons';\nimport Image from '../components/utilities/Image';\n\nconst Dashboard = () => {\n  _s();\n\n  const {\n    event,\n    user,\n    formatLabelTimePicker,\n    getCurrentUserProfil,\n    getSellersInDbWithUids,\n    getSalesOfEventIdFromDB,\n    updateEventStatus,\n    clearEvent\n  } = useAuth();\n  const history = useHistory();\n  const [windowsWidth, setWindowsWidth] = useState(window.innerWidth);\n  const [error, setError] = useState(\"\");\n  const [step, setStep] = useState(1);\n  const [pourcent, setPourcent] = useState(0);\n  const [sellers, setSellers] = useState([]);\n  const [loading, setLoading] = useState(true); // if (step === 3) {\n  //     const WishList = import('../components/WishList')\n  // }\n\n  function isMobile() {\n    if (windowsWidth > 1160) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function handleResize(width) {\n    setWindowsWidth(width);\n  }\n\n  useEffect(() => {\n    if (event && event.status && event.status !== \"passed\" && event.date && event.date < Date.now()) {\n      updateEventStatus(\"passed\");\n      clearEvent();\n    } else {\n      getSellerListFromServices();\n      getPourcentBar();\n    }\n\n    window.addEventListener(\"resize\", e => handleResize(window.innerWidth));\n  }, [event]);\n\n  async function getPourcentBar() {\n    if (!event.status) return;\n    let pourcentToDisplay;\n    const pourcentBudget = event.budgetLeft / event.budget * 100;\n\n    if (event.status === \"pending\") {\n      const sales = await getSalesOfEventIdFromDB(event.id);\n      pourcentToDisplay = Math.floor((event.date - sales[0].date) * 100 / Date.now());\n    }\n\n    pourcentToDisplay = event.status === \"creating\" ? pourcentBudget : pourcentToDisplay;\n    setPourcent(100 - pourcentToDisplay + 5);\n  }\n\n  async function handleCreateEvent() {\n    const data = await getCurrentUserProfil();\n\n    if (!user.emailVerified) {\n      setError(\"Vous n'avez pas encore confirmé votre adresse email.\");\n    } else if (data.firstName === undefined || data.name === undefined || data.birthDate === undefined) {\n      setError(\"Vous devez compléter votre profil pour pouvoir créer votre premier évènement.\");\n    } else {\n      history.push(\"/creer-mon-evenement/etape-1\");\n    }\n  }\n\n  async function getSellerListFromServices() {\n    if (event.choosedServices.length < 1 || event.status === null) return null;\n    let sellerIDList = [];\n\n    for (const service in event.choosedServices) {\n      sellerIDList = [...sellerIDList, event.choosedServices[service].sellerId];\n    }\n\n    const sellersList = await getSellersInDbWithUids(sellerIDList);\n    const uniqueSellersList = sellersList && sellersList.filter((thing, index, self) => self.findIndex(t => t.email === thing.email) === index);\n\n    if (event.status === \"creating\") {\n      setSellers(uniqueSellersList);\n      setLoading(false);\n      return;\n    }\n\n    let finalSellersList = [];\n    uniqueSellersList.map(async seller => {\n      const status = await getSaleStatus(seller.uid);\n      const newSeller = { ...seller,\n        status: status\n      };\n      finalSellersList = [...finalSellersList, newSeller];\n\n      if (uniqueSellersList.length === finalSellersList.length) {\n        setSellers(finalSellersList);\n        setLoading(false);\n      }\n    });\n\n    if (event.status === \"pending\") {\n      let finalSellersList = [];\n      uniqueSellersList.map(async seller => {\n        const status = await getSaleStatus(seller.uid);\n        const newSeller = { ...seller,\n          status: status\n        };\n        finalSellersList = [...finalSellersList, newSeller];\n\n        if (uniqueSellersList.length === finalSellersList.length) {\n          setSellers(finalSellersList);\n          setLoading(false);\n        }\n      });\n    } else if (event.status === \"creating\") {\n      setSellers(uniqueSellersList);\n      setLoading(false);\n    }\n  }\n\n  async function getSaleStatus(id) {\n    const sales = await getSalesOfEventIdFromDB(event.id);\n    const sale = sales.filter(sale => sale.sellerID === id);\n    return sale[0].status;\n  }\n\n  function getDaysLeftBeforeEvent() {\n    const timestampLeft = event.date - Date.now();\n    const daysLeft = timestampLeft / 1000 / 86400;\n    return Math.ceil(daysLeft);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !isMobile() ? \"dashboard\" : \"dashboard mobile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboardHeader\",\n        children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n          in: step === 1,\n          timeout: 200,\n          classNames: \"elementTransition\",\n          unmountOnExit: true,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"elementTransition\",\n            children: [\"Content de vous revoir \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: user.displayName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 73\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 1 && \"active\",\n            onClick: () => setStep(1),\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 2 && \"active\",\n            onClick: () => setStep(2),\n            children: \"Mes informations personnelles\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: step === 3 && \"active\",\n            onClick: () => setStep(3),\n            children: \"Wishlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), step === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: windowsWidth < 600 ? \"dashboardContent mobile\" : \"dashboardContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftSide\",\n          children: [event && /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Votre \\xE9v\\xE8nement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 35\n          }, this), event.status && event.status !== \"passed\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"containerBudgetHeader\",\n              children: [event.status === \"creating\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: [\"Il vous reste \", event.budgetLeft < 0 ? 0 : event.budgetLeft, \"\\u20AC sur votre budget total de \", event.budget, \"\\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 69\n              }, this), event.status === \"pending\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: [\"Plus que \", getDaysLeftBeforeEvent(), \" jours \\xE0 patienter\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 68\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progressBarEvent\",\n                children: /*#__PURE__*/_jsxDEV(ProgressBar, {\n                  now: pourcent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 37\n              }, this), event.status === \"creating\" && /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                onClick: e => history.push('/creer-mon-evenement/etape-2'),\n                color: \"orange\",\n                value: \"Reprendre la cr\\xE9ation de mon \\xE9v\\xE8nement\",\n                backgroundColor: \"rgba(245, 192, 67)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboardInfo\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: windowsWidth < 600 ? \"insetLeftSide mobile\" : \"insetLeftSide\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: \"Infos \\xE9v\\xE8nement\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dashboardInfoContent\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nom de l'\\xE9v\\xE8nement:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: event.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Date:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: new Date(event.date).toLocaleDateString(\"fr-FR\", {\n                        weekday: \"long\",\n                        year: \"numeric\",\n                        month: \"long\",\n                        day: \"numeric\"\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Cr\\xE9neau:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        color: 'rgb(239 25 136)'\n                      },\n                      children: [\"Commence \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: formatLabelTimePicker(event.startAt)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 97\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        color: 'rgb(27 76 239)'\n                      },\n                      children: [\"se termine \\xE0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: formatLabelTimePicker(event.endAt)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 98\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nombre de personnes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [event.people, \" personnes\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Nombre de m\\xB2:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: event.placeSize\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        fontSize: '20px'\n                      },\n                      children: [\"Afficher plus \", /*#__PURE__*/_jsxDEV(\"b\", {\n                        style: {\n                          fontSize: '30px'\n                        },\n                        children: \"+\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 218,\n                        columnNumber: 96\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item buttonContainer\",\n                  children: event.status === \"creating\" && /*#__PURE__*/_jsxDEV(ButtonSmall, {\n                    onClick: () => history.push('/creer-mon-evenement/etape-1'),\n                    color: \"grey\",\n                    value: \"Modifier les informations de l'\\xE9v\\xE8nement\",\n                    marginTop: \"20px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 37\n              }, this), windowsWidth < 600 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"separator\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 60\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"insetRightSide\",\n                children: [!isMobile() ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: \"Prestataires s\\xE9lectionn\\xE9s\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 49\n                  }, this), event.choosedServices.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: [sellers && sellers.length, \" prestataires au total\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Vous n'avez pas encore choisi de prestataire\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"headerDashboardInset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: \"Prestataires s\\xE9lectionn\\xE9s\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 49\n                  }, this), sellers && sellers.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: 'rgba(245, 192, 67)'\n                    },\n                    children: [sellers && sellers.length, \" prestataires au total\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Vous n'avez pas encore choisi de prestataire\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Slideshow, {\n                    eventStatus: event.status,\n                    sellers: sellers,\n                    windowsWidth: windowsWidth,\n                    isMobile: isMobile()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: isMobile() ? \"noEventDisplayDashboard mobile\" : \"noEventDisplayDashboard\",\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              url: \"/images/triste.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"C\\u2019est dur \\xE0 croire!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Mais il semblerait que n\\u2019ayez toujours pas planifi\\xE9 d\\u2019\\xE9v\\xE8nement sur NIVID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCreateEvent(),\n              children: \"Cr\\xE9er mon premier \\xE9v\\xE8nement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 33\n            }, this), error.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"errorMessage\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), !isMobile() && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [event.status === \"creating\" && /*#__PURE__*/_jsxDEV(InterestedSellers, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(BlogWidget, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 31\n      }, this) : step === 2 ? /*#__PURE__*/_jsxDEV(UpdateProfil, {\n        isMobile: isMobile()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 25\n      }, this) : step === 3 && /*#__PURE__*/_jsxDEV(WishList, {\n        eventStatus: event.status,\n        isMobile: isMobile()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Dashboard, \"G7uj3iYXntq6r4wN63696C7miuQ=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/pages/Dashboard.js"],"names":["React","useState","useEffect","Slideshow","useHistory","Header","useAuth","ProgressBar","UpdateProfil","InterestedSellers","WishList","BlogWidget","CSSTransition","ButtonSmall","Image","Dashboard","event","user","formatLabelTimePicker","getCurrentUserProfil","getSellersInDbWithUids","getSalesOfEventIdFromDB","updateEventStatus","clearEvent","history","windowsWidth","setWindowsWidth","window","innerWidth","error","setError","step","setStep","pourcent","setPourcent","sellers","setSellers","loading","setLoading","isMobile","handleResize","width","status","date","Date","now","getSellerListFromServices","getPourcentBar","addEventListener","e","pourcentToDisplay","pourcentBudget","budgetLeft","budget","sales","id","Math","floor","handleCreateEvent","data","emailVerified","firstName","undefined","name","birthDate","push","choosedServices","length","sellerIDList","service","sellerId","sellersList","uniqueSellersList","filter","thing","index","self","findIndex","t","email","finalSellersList","map","seller","getSaleStatus","uid","newSeller","sale","sellerID","getDaysLeftBeforeEvent","timestampLeft","daysLeft","ceil","displayName","color","toLocaleDateString","weekday","year","month","day","startAt","endAt","people","placeSize","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport '../styles/Dashboard.css'\r\nimport Slideshow from \"../components/Slider\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Header from '../components/Header'\r\nimport { useAuth } from '../context/userContext'\r\nimport ProgressBar from 'react-bootstrap/ProgressBar';\r\nimport UpdateProfil from '../components/UpdateProfil'\r\nimport InterestedSellers from '../components/InterestedSellers'\r\nimport WishList from '../components/WishList'\r\nimport BlogWidget from '../components/BlogWidget'\r\nimport { CSSTransition } from 'react-transition-group'\r\n\r\nimport { ButtonSmall } from '../components/utilities/Buttons'\r\nimport Image from '../components/utilities/Image'\r\n\r\nconst Dashboard = () => {\r\n\r\n    const { event, user, formatLabelTimePicker, getCurrentUserProfil, getSellersInDbWithUids, getSalesOfEventIdFromDB, updateEventStatus, clearEvent } = useAuth()\r\n    const history = useHistory()\r\n\r\n    const [windowsWidth, setWindowsWidth] = useState(window.innerWidth)\r\n    const [error, setError] = useState(\"\")\r\n    const [step, setStep] = useState(1)\r\n    const [pourcent, setPourcent] = useState(0);\r\n\r\n    const [sellers, setSellers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // if (step === 3) {\r\n    //     const WishList = import('../components/WishList')\r\n    // }\r\n\r\n    function isMobile() {\r\n        if (windowsWidth > 1160) {\r\n            return false\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n\r\n    function handleResize(width) {\r\n        setWindowsWidth(width)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (event && event.status && event.status !== \"passed\" && event.date && event.date < Date.now()) {\r\n            updateEventStatus(\"passed\")\r\n            clearEvent()\r\n        } else {\r\n            getSellerListFromServices()\r\n            getPourcentBar()\r\n        }\r\n        window.addEventListener(\"resize\", (e) => handleResize(window.innerWidth))\r\n\r\n    }, [event])\r\n\r\n    async function getPourcentBar() {\r\n        if (!event.status) return\r\n\r\n        let pourcentToDisplay\r\n        const pourcentBudget = (event.budgetLeft / event.budget) * 100\r\n        if (event.status === \"pending\") {\r\n            const sales = await getSalesOfEventIdFromDB(event.id)\r\n            pourcentToDisplay = Math.floor(((event.date - sales[0].date) * 100) / Date.now())\r\n        }\r\n        pourcentToDisplay = event.status === \"creating\" ? pourcentBudget : pourcentToDisplay\r\n        setPourcent(100 - pourcentToDisplay + 5)\r\n    }\r\n\r\n    async function handleCreateEvent() {\r\n        const data = await getCurrentUserProfil()\r\n        if (!user.emailVerified) {\r\n            setError(\"Vous n'avez pas encore confirmé votre adresse email.\")\r\n        }\r\n        else if (data.firstName === undefined || data.name === undefined || data.birthDate === undefined) {\r\n            setError(\"Vous devez compléter votre profil pour pouvoir créer votre premier évènement.\")\r\n        }\r\n        else {\r\n            history.push(\"/creer-mon-evenement/etape-1\")\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async function getSellerListFromServices() {\r\n        if (event.choosedServices.length < 1 || event.status === null) return null\r\n\r\n        let sellerIDList = []\r\n        for (const service in event.choosedServices) {\r\n            sellerIDList = [...sellerIDList, event.choosedServices[service].sellerId]\r\n        }\r\n        const sellersList = await getSellersInDbWithUids(sellerIDList)\r\n        const uniqueSellersList = sellersList && sellersList.filter((thing, index, self) => self.findIndex(t => t.email === thing.email) === index)\r\n\r\n        if (event.status === \"creating\") {\r\n            setSellers(uniqueSellersList)\r\n            setLoading(false)\r\n            return\r\n        }\r\n\r\n        let finalSellersList = []\r\n        uniqueSellersList.map(async seller => {\r\n            const status = await getSaleStatus(seller.uid)\r\n            const newSeller = { ...seller, status: status }\r\n            finalSellersList = [...finalSellersList, newSeller]\r\n\r\n            if (uniqueSellersList.length === finalSellersList.length) {\r\n                setSellers(finalSellersList)\r\n                setLoading(false)\r\n            }\r\n        })\r\n\r\n\r\n        if (event.status === \"pending\") {\r\n            let finalSellersList = []\r\n            uniqueSellersList.map(async seller => {\r\n                const status = await getSaleStatus(seller.uid)\r\n                const newSeller = { ...seller, status: status }\r\n                finalSellersList = [...finalSellersList, newSeller]\r\n\r\n                if (uniqueSellersList.length === finalSellersList.length) {\r\n                    setSellers(finalSellersList)\r\n                    setLoading(false)\r\n                }\r\n            })\r\n        }\r\n        else if (event.status === \"creating\") {\r\n            setSellers(uniqueSellersList)\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    async function getSaleStatus(id) {\r\n        const sales = await getSalesOfEventIdFromDB(event.id)\r\n        const sale = sales.filter(sale => sale.sellerID === id)\r\n        return sale[0].status\r\n    }\r\n\r\n    function getDaysLeftBeforeEvent() {\r\n        const timestampLeft = event.date - Date.now()\r\n        const daysLeft = timestampLeft / 1000 / 86400\r\n        return Math.ceil(daysLeft)\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <div className={!isMobile() ? \"dashboard\" : \"dashboard mobile\"}>\r\n                <div className=\"dashboardHeader\">\r\n                    \r\n            <CSSTransition\r\n                in={step === 1}\r\n                timeout={200}\r\n                classNames=\"elementTransition\"\r\n                unmountOnExit\r\n            >\r\n                <p className=\"elementTransition\">Content de vous revoir <span>{user.displayName}</span></p>\r\n            </CSSTransition>\r\n                    <div>\r\n                        <span className={step === 1 && \"active\"} onClick={() => setStep(1)}>Dashboard</span>\r\n                        <span className={step === 2 && \"active\"} onClick={() => setStep(2)}>Mes informations personnelles</span>\r\n                        <span className={step === 3 && \"active\"} onClick={() => setStep(3)}>Wishlist</span>\r\n                    </div>\r\n                </div>\r\n                {/* {!user.emailVerified && <EmailNotVerified />} */}\r\n                {step === 1 ? <div className={windowsWidth < 600 ? \"dashboardContent mobile\" : \"dashboardContent\"}>\r\n                    <div className=\"leftSide\">\r\n                        {event && <h1>Votre évènement</h1>}\r\n                        {event.status && event.status !== \"passed\" ? (\r\n                            <div>\r\n                                <div className=\"containerBudgetHeader\">\r\n                                    {event.status === \"creating\" && <h2>Il vous reste {event.budgetLeft < 0 ? 0 : event.budgetLeft }€ sur votre budget total de {event.budget}€</h2>}\r\n                                    {event.status === \"pending\" && <h2>Plus que {getDaysLeftBeforeEvent()} jours à patienter</h2>}\r\n                                    <div className=\"progressBarEvent\">\r\n                                        <ProgressBar now={pourcent} />\r\n                                    </div>\r\n                                    {event.status === \"creating\" &&\r\n                                        <ButtonSmall\r\n                                            onClick={(e) => history.push('/creer-mon-evenement/etape-2')}\r\n                                            color=\"orange\"\r\n                                            value=\"Reprendre la création de mon évènement\"\r\n                                            backgroundColor=\"rgba(245, 192, 67)\"\r\n                                        />\r\n                                    }\r\n                                </div>\r\n                                <div className=\"dashboardInfo\">\r\n                                    <div className={windowsWidth < 600 ? \"insetLeftSide mobile\" : \"insetLeftSide\"}>\r\n                                        <div className=\"headerDashboardInset\">\r\n                                            <h2 style={{color:'rgba(245, 192, 67)'}}>Infos évènement</h2>\r\n                                        </div>\r\n                                        <div className=\"dashboardInfoContent\">\r\n                                            <div className=\"item\">\r\n                                                <label>Nom de l'évènement:</label>\r\n                                                <p>{event.name}</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Date:</label>\r\n                                                <p>{new Date(event.date).toLocaleDateString(\"fr-FR\", { weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\" })}</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Créneau:</label>\r\n                                                <p style={{color:'rgb(239 25 136)'}}>Commence à <span>{formatLabelTimePicker(event.startAt)}</span></p>\r\n                                                <p style={{color:'rgb(27 76 239)'}}>se termine à <span>{formatLabelTimePicker(event.endAt)}</span></p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Nombre de personnes:</label>\r\n                                                <p>{event.people} personnes</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label>Nombre de m²:</label>\r\n                                                <p>{event.placeSize}</p>\r\n                                            </div>\r\n                                            <div className=\"item\">\r\n                                                <label style={{fontSize:'20px'}}>Afficher plus <b style={{fontSize:'30px'}}>+</b></label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"item buttonContainer\">\r\n                                            {event.status === \"creating\" &&\r\n                                                <ButtonSmall\r\n                                                    onClick={() => history.push('/creer-mon-evenement/etape-1')}\r\n                                                    color=\"grey\"\r\n                                                    value=\"Modifier les informations de l'évènement\"\r\n                                                    marginTop=\"20px\"\r\n                                                />\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {windowsWidth < 600 && <div className=\"separator\"></div>}\r\n\r\n                                    <div className=\"insetRightSide\">\r\n                                        {!isMobile() ?\r\n                                            <div className=\"headerDashboardInset\">\r\n                                                <h2 style={{color:'rgba(245, 192, 67)'}}>Prestataires sélectionnés</h2>\r\n                                                {event.choosedServices.length > 0 ?\r\n                                                    <p style={{color:'rgba(245, 192, 67)'}}>{sellers && sellers.length} prestataires au total</p>\r\n                                                    : <span>Vous n'avez pas encore choisi de prestataire</span>\r\n                                                }\r\n                                            </div>\r\n                                            :\r\n                                            <div className=\"headerDashboardInset\">\r\n                                                <h2 style={{color:'rgba(245, 192, 67)'}}>Prestataires sélectionnés</h2>\r\n                                                {sellers && sellers.length > 0 ?\r\n                                                    <p style={{color:'rgba(245, 192, 67)'}}>{sellers && sellers.length} prestataires au total</p>\r\n                                                    : <span>Vous n'avez pas encore choisi de prestataire</span>}\r\n                                            </div>\r\n                                        }\r\n                                        <div>\r\n                                            <Slideshow eventStatus={event.status} sellers={sellers} windowsWidth={windowsWidth} isMobile={isMobile()} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                            :\r\n                            <div className={isMobile() ? \"noEventDisplayDashboard mobile\" : \"noEventDisplayDashboard\"}>\r\n                                <Image url=\"/images/triste.png\" />\r\n                                <h2>C’est dur à croire!</h2>\r\n                                <p>Mais il semblerait que n’ayez toujours pas planifié d’évènement sur NIVID</p>\r\n                                <button onClick={() => handleCreateEvent()}>Créer mon premier évènement</button>\r\n                                {error.length > 0 && <p className=\"errorMessage\">{error}</p>}\r\n                            </div>\r\n\r\n                        }\r\n                    </div>\r\n                    {!isMobile() &&\r\n                        <div>\r\n                            {event.status === \"creating\" &&\r\n                                <InterestedSellers />\r\n                            }\r\n                            <BlogWidget />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                    : step === 2 ?\r\n                        <UpdateProfil isMobile={isMobile()} />\r\n                        : step === 3 &&\r\n                        <WishList eventStatus={event.status} isMobile={isMobile()} />\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}