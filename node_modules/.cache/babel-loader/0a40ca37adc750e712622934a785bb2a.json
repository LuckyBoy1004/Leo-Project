{"ast":null,"code":"import _regeneratorRuntime from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/My Project/Leo/Nivid/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import\"../styles/Prest_.css\";import{useHistory}from\"react-router-dom\";import{useAuth}from\"../context/userContext\";// context\nimport{ButtonSmall,ButtonLarge}from\"../components/utilities/Buttons\";import Layout from\"../components/utilities/Layout\";import Title from\"../components/utilities/Title\";import SubTitle from\"../components/utilities/SubTitle\";import{items}from\"../components/servicesData\";import{useFirebase}from\"../assets/base-context\";import ReactLoading from\"react-loading\";import{CSSTransition}from\"react-transition-group\";import{useLocation}from\"react-router-dom\";var Prest_Step1=function Prest_Step1(){var firebaseContext=useFirebase();var storage=firebaseContext.storage();var _useState=useState({type:\"\",message:\"\"}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),buttonLoading=_useState4[0],setButtonLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMounted=_useState6[0],setIsMounted=_useState6[1];var search=useLocation().search;var session_id=new URLSearchParams(search).get(\"session_id\");var initialSellerDetails={description:\"\",category:\"\",subcategory:\"\",image_path:\"\"};var initialPictures={name:\"\",url:\"\",lastModified:0,size:0,type:\"\",webkitRelativePath:\"\"};var _useState7=useState(initialSellerDetails),_useState8=_slicedToArray(_useState7,2),sellerDetails=_useState8[0],setSellerDetails=_useState8[1];var _useState9=useState(initialPictures),_useState10=_slicedToArray(_useState9,2),pictures=_useState10[0],setPictures=_useState10[1];var _useAuth=useAuth(),setCurrentStepProcess=_useAuth.setCurrentStepProcess,setImageSellerDB=_useAuth.setImageSellerDB,addSellerDescription=_useAuth.addSellerDescription,seller=_useAuth.seller,deleteOldSellerPicture=_useAuth.deleteOldSellerPicture,checkoutCheck=_useAuth.checkoutCheck,refSellers=_useAuth.refSellers,setSeller=_useAuth.setSeller;// context\nvar history=useHistory();// seller.status !== \"subscribing\" && history.push(\"/mon-compte-partenaire\");\nsetCurrentStepProcess(1);useEffect(function(){setSellerDetails({description:seller.description,category:seller.category,subcategory:seller.subcategory,image_path:seller.image_path});return setIsMounted(true);},[]);useEffect(function(){if(session_id){checkoutCheck(session_id).then(function(res){if(res.status===\"paid\"){refSellers.doc(seller.uid).update({subscription_id:res.id});setSeller(_objectSpread(_objectSpread({},seller),{},{subscription_id:res.id}));}/*else history.push(\"/mon-compte-partenaire/process/abonnement\")*/;});}},[]);useEffect(function(){if(!seller.subscription_id&&session_id===null)// history.push(\"/mon-compte-partenaire/process/abonnement\");\nreturn;},[]);function handleCategoryChange(category,subcategory){if(category!==sellerDetails.category){setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{category:category,subcategory:subcategory}));}}function handleSubCategoryChange(key){if(key!==sellerDetails.subcategory){setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{subcategory:key}));}}function handleChange(e){var type=e.target.files[0].type;var size=e.target.files[0].size;if(type!==\"image/png\"&&type!==\"image/jpeg\"&&type!==\"image/jpg\"&&type!==\"application/pdf\"){setError({type:\"imageType\",message:\"Votre fichier n'est ni une image jpeg, jpg ou PNG.\"});}else if(size>2000000){setError({type:\"imageSize\",message:\"Votre image fait plus de 2Mo.\"});}else{setPictures(e.target.files[0]);setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{image_path:{url:URL.createObjectURL(e.target.files[0])}}));setError({type:\"\",message:\"\"});}}function isFormValid(){return _isFormValid.apply(this,arguments);}function _isFormValid(){_isFormValid=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(sellerDetails.description.length>350)){_context.next=14;break;}if(!(sellerDetails.category.length>1&&sellerDetails.subcategory.length>1)){_context.next=10;break;}if(!(pictures.name&&pictures.name.length>0||(sellerDetails.image_path&&sellerDetails.image_path.url.length)>0)){_context.next=6;break;}return _context.abrupt(\"return\",true);case 6:setButtonLoading(false);setError({type:\"noImage\",message:\"Vous devez ajouter une image.\"});case 8:_context.next=12;break;case 10:setButtonLoading(false);setError({type:\"noCategory\",message:\"Vous devez séléctionner votre secteur d'activité.\"});case 12:_context.next=16;break;case 14:setButtonLoading(false);setError({type:\"description\",message:\"Votre description doit faire au moins 350 caractères.\"});case 16:case\"end\":return _context.stop();}}},_callee);}));return _isFormValid.apply(this,arguments);}function handleSendForm(){return _handleSendForm.apply(this,arguments);}function _handleSendForm(){_handleSendForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var valid,tokenAndUrl,token,url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setButtonLoading(true);setError({type:\"\",message:\"\"});_context2.next=4;return isFormValid();case 4:valid=_context2.sent;if(!(valid===true)){_context2.next=22;break;}tokenAndUrl={url:\"\",token:\"\"};// Si la photo est une nouvelle\nif(!(pictures.name.length>0)){_context2.next=18;break;}token=Math.random().toString(36).substr(2,19);_context2.next=11;return handleUploadFile(token);case 11:url=_context2.sent;_context2.next=14;return setImageSellerDB(url,token);case 14:tokenAndUrl={url:url,token:token};seller.image_path.url&&deleteOldSellerPicture([seller.image_path.token]);_context2.next=19;break;case 18:tokenAndUrl=sellerDetails.image_path;// Photo non changée\ncase 19:addSellerDescription(sellerDetails,tokenAndUrl).then(function(){setPictures(initialPictures);setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{image_path:tokenAndUrl}));setButtonLoading(false);history.push(\"/mon-compte-partenaire/process/services\");});_context2.next=23;break;case 22:return _context2.abrupt(\"return\");case 23:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSendForm.apply(this,arguments);}function handleUploadFile(_x){return _handleUploadFile.apply(this,arguments);}function _handleUploadFile(){_handleUploadFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(token){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",new Promise(function(resolve,reject){var upload=storage.ref(\"sellers/\".concat(token)).put(pictures);upload.on(\"state_changed\",function(snapshot){},function(error){console.log(error);},function(){storage.ref(\"sellers\").child(token).getDownloadURL().then(function(url){resolve(url);}).catch(function(error){console.error(error);reject(error);});});}));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _handleUploadFile.apply(this,arguments);}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(CSSTransition,{in:isMounted,timeout:300,classNames:\"pageTransition\",unmountOnExit:true,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SubTitle,{value:\"Dites-nous en plus sur votre activit\\xE9\",type:\"big\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step1-Section1\",children:[/*#__PURE__*/_jsx(Title,{value:\"Que devraient savoir vos futurs clients sur vous ?\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsx(\"p\",{children:\"D\\xE9crivez en d\\xE9tail votre entreprise : aussi bien les services que les produits propos\\xE9s afin de renseigner au mieux vos futurs clients. Notre \\xE9quipe r\\xE9visera votre texte afin d'optimiser votre vitrine et vous permettre d'attirer le plus grand nombre de clients. Merci de ne pas inclure de page web, courrier \\xE9lectronique, num\\xE9ro de t\\xE9l\\xE9phone et autres coordonn\\xE9es de contact.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"textAreaContainer\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:sellerDetails.description,onChange:function onChange(e){return setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{description:e.target.value}));}}),/*#__PURE__*/_jsxs(\"span\",{className:sellerDetails.description.length>349&&\"valid\",children:[sellerDetails.description.length,\"/350\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step1-Section2\",children:[/*#__PURE__*/_jsx(Title,{value:\"S\\xE9lectionnez votre secteur d'activit\\xE9\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"headerEtape2 Prest-category\",children:[(sellerDetails.category===\"decorations\"||sellerDetails.category.length===0)&&/*#__PURE__*/_jsx(\"div\",{className:sellerDetails.category===\"decorations\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"decorations\",\"Décorations intérieures\");},children:/*#__PURE__*/_jsx(\"h1\",{children:\"D\\xE9corations\"})}),(sellerDetails.category===\"ambiance\"||sellerDetails.category.length===0)&&/*#__PURE__*/_jsx(\"div\",{className:sellerDetails.category===\"ambiance\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"ambiance\",\"Musique\");},children:/*#__PURE__*/_jsx(\"h1\",{children:\"Ambiance\"})}),(sellerDetails.category===\"table\"||sellerDetails.category.length===0)&&/*#__PURE__*/_jsx(\"div\",{className:sellerDetails.category===\"table\"?\"category active\":\"category\",onClick:function onClick(){return handleCategoryChange(\"table\",\"Nourriture\");},children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\xC0 table\"})}),sellerDetails.category.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"category button\",children:/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){return setSellerDetails(_objectSpread(_objectSpread({},sellerDetails),{},{category:\"\",subcategory:\"\"}));},children:\"Modifier ma s\\xE9lection\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"subHeaderEtape2 Prest-subCategory\",children:sellerDetails.category.length>1&&Object.entries(items[sellerDetails.category]).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],item=_ref2[1];return/*#__PURE__*/_jsxs(\"div\",{className:sellerDetails.subcategory===key?\"subMenuItem active\":\"subMenuItem\",onClick:function onClick(){return handleSubCategoryChange(key);},children:[/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:item.icon}),/*#__PURE__*/_jsx(\"p\",{children:key})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step1-Section3\",children:[/*#__PURE__*/_jsx(Title,{value:\"Photo principale\",type:\"h2\",font:\"roboto-medium\",align:\"left\"}),(error.type===\"imageSize\"||error.type===\"imageType\")&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:error.message}),/*#__PURE__*/_jsx(\"p\",{children:\"De votre boutique ou bien de votre stand, quelque chose de repr\\xE9sentatif !\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fileInputContainer\",children:[sellerDetails.image_path.length===0&&seller.image_path.length===0&&/*#__PURE__*/_jsx(\"label\",{for:\"file\",className:\"label-file\",children:\"+\"}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/jpeg, image/jpg, image/png, application/pdf\",id:\"file\",className:\"input-file\",type:\"file\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"img\",{style:{borderRadius:\"8px\"},alt:\"\",src:sellerDetails.image_path.url||seller.image_path.url}),/*#__PURE__*/_jsxs(\"div\",{className:\"fileInputRight\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"2Mo max.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Type de fichiers accept\\xE9s : jpeg, jpg, png ou PDF\"}),/*#__PURE__*/_jsx(ButtonSmall,{onClick:function onClick(){return document.getElementById(\"file\").click();},color:sellerDetails.image_path.length===0?\"grey\":\"blue\",value:sellerDetails.image_path.length===0?\"Choisir une image\":\"Changer d'image\",marginTop:\"10px\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Prest-Step1-Section4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Attention: \"}),\"Merci de bien v\\xE9rifier toutes vos informations, celles-ci seront modifiables seulement si votre dossier est en attente de validation.\"]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ButtonLarge,{onClick:function onClick(){return handleSendForm();},color:\"orange\",value:buttonLoading?/*#__PURE__*/_jsx(ReactLoading,{className:\"loadingSpinnerButton\",type:\"spin\",color:\"white\",height:23,width:23}):\"Passer à l'étape suivante\",width:\"400px\"})})]}),error.message.length>1&&/*#__PURE__*/_jsx(\"p\",{className:\"PrestErrorMessage\",children:error.message})]})})});};export default Prest_Step1;","map":{"version":3,"sources":["F:/My Project/Leo/Nivid/src/pages/Prest_Step1.js"],"names":["React","useState","useEffect","useHistory","useAuth","ButtonSmall","ButtonLarge","Layout","Title","SubTitle","items","useFirebase","ReactLoading","CSSTransition","useLocation","Prest_Step1","firebaseContext","storage","type","message","error","setError","buttonLoading","setButtonLoading","isMounted","setIsMounted","search","session_id","URLSearchParams","get","initialSellerDetails","description","category","subcategory","image_path","initialPictures","name","url","lastModified","size","webkitRelativePath","sellerDetails","setSellerDetails","pictures","setPictures","setCurrentStepProcess","setImageSellerDB","addSellerDescription","seller","deleteOldSellerPicture","checkoutCheck","refSellers","setSeller","history","then","res","status","doc","uid","update","subscription_id","id","handleCategoryChange","handleSubCategoryChange","key","handleChange","e","target","files","URL","createObjectURL","isFormValid","length","handleSendForm","valid","tokenAndUrl","token","Math","random","toString","substr","handleUploadFile","push","Promise","resolve","reject","upload","ref","put","on","snapshot","console","log","child","getDownloadURL","catch","value","Object","entries","map","item","icon","borderRadius","document","getElementById","click"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles/Prest_.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/userContext\"; // context\r\n\r\nimport { ButtonSmall, ButtonLarge } from \"../components/utilities/Buttons\";\r\nimport Layout from \"../components/utilities/Layout\";\r\nimport Title from \"../components/utilities/Title\";\r\nimport SubTitle from \"../components/utilities/SubTitle\";\r\nimport { items } from \"../components/servicesData\";\r\nimport { useFirebase } from \"../assets/base-context\";\r\nimport ReactLoading from \"react-loading\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst Prest_Step1 = () => {\r\n  const firebaseContext = useFirebase();\r\n  const storage = firebaseContext.storage();\r\n\r\n  const [error, setError] = useState({ type: \"\", message: \"\" });\r\n  const [buttonLoading, setButtonLoading] = useState(false);\r\n\r\n  const [isMounted, setIsMounted] = useState(false);\r\n\r\n  const search = useLocation().search;\r\n  const session_id = new URLSearchParams(search).get(\"session_id\");\r\n\r\n  const initialSellerDetails = {\r\n    description: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    image_path: \"\",\r\n  };\r\n\r\n  const initialPictures = {\r\n    name: \"\",\r\n    url: \"\",\r\n    lastModified: 0,\r\n    size: 0,\r\n    type: \"\",\r\n    webkitRelativePath: \"\",\r\n  };\r\n\r\n  const [sellerDetails, setSellerDetails] = useState(initialSellerDetails);\r\n\r\n  const [pictures, setPictures] = useState(initialPictures);\r\n\r\n  const {\r\n    setCurrentStepProcess,\r\n    setImageSellerDB,\r\n    addSellerDescription,\r\n    seller,\r\n    deleteOldSellerPicture,\r\n    checkoutCheck,\r\n    refSellers,\r\n    setSeller,\r\n  } = useAuth(); // context\r\n  const history = useHistory();\r\n\r\n  // seller.status !== \"subscribing\" && history.push(\"/mon-compte-partenaire\");\r\n\r\n  setCurrentStepProcess(1);\r\n\r\n  useEffect(() => {\r\n    setSellerDetails({\r\n      description: seller.description,\r\n      category: seller.category,\r\n      subcategory: seller.subcategory,\r\n      image_path: seller.image_path,\r\n    });\r\n    return setIsMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (session_id) {\r\n      checkoutCheck(session_id).then((res) => {\r\n        if (res.status === \"paid\") {\r\n          refSellers.doc(seller.uid).update({\r\n            subscription_id: res.id,\r\n          });\r\n          setSeller({ ...seller, subscription_id: res.id });\r\n        } /*else history.push(\"/mon-compte-partenaire/process/abonnement\")*/;\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!seller.subscription_id && session_id === null)\r\n      // history.push(\"/mon-compte-partenaire/process/abonnement\");\r\n      return;\r\n  }, []);\r\n\r\n  function handleCategoryChange(category, subcategory) {\r\n    if (category !== sellerDetails.category) {\r\n      setSellerDetails({\r\n        ...sellerDetails,\r\n        category: category,\r\n        subcategory: subcategory,\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleSubCategoryChange(key) {\r\n    if (key !== sellerDetails.subcategory) {\r\n      setSellerDetails({ ...sellerDetails, subcategory: key });\r\n    }\r\n  }\r\n\r\n  function handleChange(e) {\r\n    const type = e.target.files[0].type;\r\n    const size = e.target.files[0].size;\r\n    if (type !== \"image/png\" && type !== \"image/jpeg\" && type !== \"image/jpg\" && type !== \"application/pdf\") {\r\n      setError({\r\n        type: \"imageType\",\r\n        message: \"Votre fichier n'est ni une image jpeg, jpg ou PNG.\",\r\n      });\r\n    } else if (size > 2000000) {\r\n      setError({ type: \"imageSize\", message: \"Votre image fait plus de 2Mo.\" });\r\n    } else {\r\n      setPictures(e.target.files[0]);\r\n      setSellerDetails({\r\n        ...sellerDetails,\r\n        image_path: { url: URL.createObjectURL(e.target.files[0]) },\r\n      });\r\n      setError({ type: \"\", message: \"\" });\r\n    }\r\n  }\r\n\r\n  async function isFormValid() {\r\n    if (sellerDetails.description.length > 350) {\r\n      if (\r\n        sellerDetails.category.length > 1 &&\r\n        sellerDetails.subcategory.length > 1\r\n      ) {\r\n        if (\r\n          (pictures.name && pictures.name.length > 0) ||\r\n          (sellerDetails.image_path && sellerDetails.image_path.url.length) > 0\r\n        ) {\r\n          return true;\r\n        } else {\r\n          setButtonLoading(false);\r\n          setError({\r\n            type: \"noImage\",\r\n            message: \"Vous devez ajouter une image.\",\r\n          });\r\n        }\r\n      } else {\r\n        setButtonLoading(false);\r\n        setError({\r\n          type: \"noCategory\",\r\n          message: \"Vous devez séléctionner votre secteur d'activité.\",\r\n        });\r\n      }\r\n    } else {\r\n      setButtonLoading(false);\r\n      setError({\r\n        type: \"description\",\r\n        message: \"Votre description doit faire au moins 350 caractères.\",\r\n      });\r\n    }\r\n  }\r\n\r\n  async function handleSendForm() {\r\n    setButtonLoading(true);\r\n    setError({ type: \"\", message: \"\" });\r\n    const valid = await isFormValid();\r\n    if (valid === true) {\r\n      let tokenAndUrl = { url: \"\", token: \"\" };\r\n\r\n      // Si la photo est une nouvelle\r\n      if (pictures.name.length > 0) {\r\n        const token = Math.random().toString(36).substr(2, 19);\r\n        const url = await handleUploadFile(token);\r\n        await setImageSellerDB(url, token);\r\n        tokenAndUrl = { url: url, token: token };\r\n        seller.image_path.url &&\r\n          deleteOldSellerPicture([seller.image_path.token]);\r\n      } else {\r\n        tokenAndUrl = sellerDetails.image_path; // Photo non changée\r\n      }\r\n\r\n      addSellerDescription(sellerDetails, tokenAndUrl).then(() => {\r\n        setPictures(initialPictures);\r\n        setSellerDetails({ ...sellerDetails, image_path: tokenAndUrl });\r\n        setButtonLoading(false);\r\n        history.push(\"/mon-compte-partenaire/process/services\");\r\n      });\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  async function handleUploadFile(token) {\r\n    return new Promise((resolve, reject) => {\r\n      const upload = storage.ref(`sellers/${token}`).put(pictures);\r\n      upload.on(\r\n        \"state_changed\",\r\n        (snapshot) => {},\r\n        (error) => {\r\n          console.log(error);\r\n        },\r\n        () => {\r\n          storage\r\n            .ref(\"sellers\")\r\n            .child(token)\r\n            .getDownloadURL()\r\n            .then((url) => {\r\n              resolve(url);\r\n            })\r\n            .catch((error) => {\r\n              console.error(error);\r\n              reject(error);\r\n            });\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <CSSTransition\r\n        in={isMounted}\r\n        timeout={300}\r\n        classNames=\"pageTransition\"\r\n        unmountOnExit\r\n      >\r\n        <div>\r\n          <SubTitle\r\n            value=\"Dites-nous en plus sur votre activité\"\r\n            type=\"big\"\r\n            font=\"roboto-medium\"\r\n            align=\"left\"\r\n          />\r\n\r\n          <div className=\"Prest-Step1-Section1\">\r\n            <Title\r\n              value=\"Que devraient savoir vos futurs clients sur vous ?\"\r\n              type=\"h2\"\r\n              font=\"roboto-medium\"\r\n              align=\"left\"\r\n            />\r\n            <p>\r\n              Décrivez en détail votre entreprise : aussi bien les services que\r\n              les produits proposés afin de renseigner au mieux vos futurs\r\n              clients. Notre équipe révisera votre texte afin\r\n              d'optimiser votre vitrine et vous permettre d'attirer le plus\r\n              grand nombre de clients. Merci de ne pas inclure de page web,\r\n              courrier électronique, numéro de téléphone et autres coordonnées\r\n              de contact.\r\n            </p>\r\n            <div className=\"textAreaContainer\">\r\n              <textarea\r\n                value={sellerDetails.description}\r\n                onChange={(e) =>\r\n                  setSellerDetails({\r\n                    ...sellerDetails,\r\n                    description: e.target.value,\r\n                  })\r\n                }\r\n              ></textarea>\r\n              <span\r\n                className={sellerDetails.description.length > 349 && \"valid\"}\r\n              >\r\n                {sellerDetails.description.length}/350\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"Prest-Step1-Section2\">\r\n            <Title\r\n              value=\"Sélectionnez votre secteur d'activité\"\r\n              type=\"h2\"\r\n              font=\"roboto-medium\"\r\n              align=\"left\"\r\n            />\r\n\r\n            <div className=\"headerEtape2 Prest-category\">\r\n              {(sellerDetails.category === \"decorations\" ||\r\n                sellerDetails.category.length === 0) && (\r\n                <div\r\n                  className={\r\n                    sellerDetails.category === \"decorations\"\r\n                      ? \"category active\"\r\n                      : \"category\"\r\n                  }\r\n                  onClick={() =>\r\n                    handleCategoryChange(\"decorations\", \"Décorations intérieures\")\r\n                  }\r\n                >\r\n                  <h1>Décorations</h1>\r\n                </div>\r\n              )}\r\n\r\n              {(sellerDetails.category === \"ambiance\" ||\r\n                sellerDetails.category.length === 0) && (\r\n                <div\r\n                  className={\r\n                    sellerDetails.category === \"ambiance\"\r\n                      ? \"category active\"\r\n                      : \"category\"\r\n                  }\r\n                  onClick={() => handleCategoryChange(\"ambiance\", \"Musique\")}\r\n                >\r\n                  <h1>Ambiance</h1>\r\n                </div>\r\n              )}\r\n\r\n              {(sellerDetails.category === \"table\" ||\r\n                sellerDetails.category.length === 0) && (\r\n                <div\r\n                  className={\r\n                    sellerDetails.category === \"table\"\r\n                      ? \"category active\"\r\n                      : \"category\"\r\n                  }\r\n                  onClick={() => handleCategoryChange(\"table\", \"Nourriture\")}\r\n                >\r\n                  <h1>À table</h1>\r\n                </div>\r\n              )}\r\n\r\n             {/* {\r\n                                (sellerDetails.category === \"service\" || sellerDetails.category.length === 0) &&\r\n                                <div\r\n                                    className={sellerDetails.category === \"service\" ? \"category active\" : \"category\"}\r\n                                    onClick={() => handleCategoryChange(\"service\", \"serveurs\")}\r\n                                >\r\n                                    <h1>Service sur place</h1>\r\n                                </div>\r\n                            } */} \r\n\r\n              {sellerDetails.category.length > 0 && (\r\n                <div className=\"category button\">\r\n                  <h1\r\n                    onClick={() =>\r\n                      setSellerDetails({\r\n                        ...sellerDetails,\r\n                        category: \"\",\r\n                        subcategory: \"\",\r\n                      })\r\n                    }\r\n                  >\r\n                    Modifier ma sélection\r\n                  </h1>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"subHeaderEtape2 Prest-subCategory\">\r\n              {sellerDetails.category.length > 1 &&\r\n                Object.entries(items[sellerDetails.category]).map(\r\n                  ([key, item]) => {\r\n                    return (\r\n                      <div\r\n                        key={key}\r\n                        className={\r\n                          sellerDetails.subcategory === key\r\n                            ? \"subMenuItem active\"\r\n                            : \"subMenuItem\"\r\n                        }\r\n                        onClick={() => handleSubCategoryChange(key)}\r\n                      >\r\n                        <img alt=\"\" src={item.icon} />\r\n                        <p>{key}</p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"Prest-Step1-Section3\">\r\n            <Title\r\n              value=\"Photo principale\"\r\n              type=\"h2\"\r\n              font=\"roboto-medium\"\r\n              align=\"left\"\r\n            />\r\n\r\n            {(error.type === \"imageSize\" || error.type === \"imageType\") && (\r\n              <p className=\"errorMessage\">{error.message}</p>\r\n            )}\r\n\r\n            <p>\r\n              De votre boutique ou bien de votre stand, quelque chose de\r\n              représentatif !\r\n            </p>\r\n            <div className=\"fileInputContainer\">\r\n              {sellerDetails.image_path.length === 0 &&\r\n                seller.image_path.length === 0 && (\r\n                  <label for=\"file\" className=\"label-file\">\r\n                    +\r\n                  </label>\r\n                )}\r\n              <input\r\n                accept=\"image/jpeg, image/jpg, image/png, application/pdf\"\r\n                id=\"file\"\r\n                className=\"input-file\"\r\n                type=\"file\"\r\n                onChange={(e) => handleChange(e)}\r\n              />\r\n              <img\r\n                style={{ borderRadius: \"8px\" }}\r\n                alt=\"\"\r\n                src={sellerDetails.image_path.url || seller.image_path.url}\r\n              />\r\n              <div className=\"fileInputRight\">\r\n                <p>2Mo max.</p>\r\n                <p>Type de fichiers acceptés : jpeg, jpg, png ou PDF</p>\r\n                <ButtonSmall\r\n                  onClick={() => document.getElementById(\"file\").click()}\r\n                  color={\r\n                    sellerDetails.image_path.length === 0 ? \"grey\" : \"blue\"\r\n                  }\r\n                  value={\r\n                    sellerDetails.image_path.length === 0\r\n                      ? \"Choisir une image\"\r\n                      : \"Changer d'image\"\r\n                  }\r\n                  marginTop=\"10px\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"Prest-Step1-Section4\">\r\n            <div>\r\n              <p>\r\n                <span>Attention: </span>Merci de bien vérifier toutes vos\r\n                informations, celles-ci seront modifiables seulement si votre\r\n                dossier est en attente de validation.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <ButtonLarge\r\n                onClick={() => handleSendForm()}\r\n                color=\"orange\"\r\n                value={\r\n                  buttonLoading ? (\r\n                    <ReactLoading\r\n                      className=\"loadingSpinnerButton\"\r\n                      type=\"spin\"\r\n                      color=\"white\"\r\n                      height={23}\r\n                      width={23}\r\n                    />\r\n                  ) : (\r\n                    \"Passer à l'étape suivante\"\r\n                  )\r\n                }\r\n                width=\"400px\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {error.message.length > 1 && (\r\n            <p className=\"PrestErrorMessage\">{error.message}</p>\r\n          )}\r\n        </div>\r\n      </CSSTransition>\r\n    </Layout>\r\n  );\r\n};\r\nexport default Prest_Step1;\r\n"]},"metadata":{},"sourceType":"module"}